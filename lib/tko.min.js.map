{"version":3,"file":"tko.min.js","sources":["../../tko.utils/src/array.js","../../tko.utils/src/error.js","../../tko.utils/src/async.js","../../tko.utils/src/object.js","../../tko.utils/src/proto.js","../../tko.utils/src/string.js","../../tko.utils/src/symbol.js","../../tko.utils/src/css.js","../../tko.utils/src/dom/info.js","../../tko.utils/src/dom/data.js","../../tko.utils/src/dom/disposal.js","../../tko.utils/src/dom/event.js","../../tko.utils/src/dom/fixes.js","../../tko.utils/src/dom/virtualElements.js","../../tko.utils/src/dom/manipulation.js","../../tko.utils/src/dom/html.js","../../tko.utils/src/memoization.js","../../tko.utils/src/tasks.js","../../tko.observable/src/defer.js","../../tko.observable/src/extenders.js","../../tko.observable/src/subscribable.js","../../tko.observable/src/dependencyDetection.js","../../tko.observable/src/observable.js","../../tko.observable/src/observableArray.changeTracking.js","../../tko.observable/src/observableArray.js","../../tko.observable/src/mappingHelpers.js","../../tko.computed/src/computed.js","../../tko.utils.parser/src/operators.js","../../tko.utils.parser/src/preparse.js","../../tko.utils.component/src/registry.js","../../tko.utils.component/src/loaders.js","../../tko.provider.mustache/src/mustacheParser.js","../../tko.bind/src/bindingContext.js","../../tko.bind/src/applyBindings.js","../../tko.bind/src/arrayToDomNodeChildren.js","../../tko.binding.template/src/templateSources.js","../../tko.binding.template/src/templateEngine.js","../../tko.binding.template/src/templating.js","../../tko.binding.template/src/nativeTemplateEngine.js","../../tko.binding.if/src/ifIfnotWith.js","../../tko.binding.foreach/src/foreach.js","../../tko.utils/src/options.js","../../tko.utils/src/ie.js","../../tko.utils/src/jquery.js","../../tko.computed/src/throttleExtender.js","../../tko.utils.parser/src/Node.js","../../tko.utils.parser/src/Expression.js","../../tko.utils.parser/src/Arguments.js","../../tko.utils.parser/src/identifierExpressions.js","../../tko.utils.parser/src/Identifier.js","../../tko.utils.parser/src/Ternary.js","../../tko.utils.parser/src/Parser.js","../../tko.provider/src/BindingHandlerObject.js","../../tko.provider/src/Provider.js","../../tko.provider.bindingString/src/BindingStringProvider.js","../../tko.provider.virtual/src/VirtualProvider.js","../../tko.provider.databind/src/DataBindProvider.js","../../tko.lifecycle/src/LifeCycle.js","../../tko.utils.component/src/ComponentABC.js","../../tko.utils.component/src/index.js","../../tko.provider.component/src/ComponentProvider.js","../../tko.provider.attr/src/AttributeProvider.js","../../tko.provider.multi/src/MultiProvider.js","../../tko.provider.mustache/src/AttributeMustacheProvider.js","../../tko.provider.mustache/src/TextMustacheProvider.js","../../tko.bind/src/BindingHandler.js","../../tko.bind/src/LegacyBindingHandler.js","../../tko.binding.core/src/event.js","../../tko.binding.core/src/click.js","../../tko.binding.core/src/css.js","../../tko.binding.core/src/enableDisable.js","../../tko.binding.core/src/hasfocus.js","../../tko.binding.core/src/selectExtensions.js","../../tko.binding.core/src/options.js","../../tko.binding.core/src/selectedOptions.js","../../tko.binding.core/src/textInput.js","../../tko.binding.core/src/uniqueName.js","../../tko.binding.core/src/visible.js","../../tko.binding.template/src/foreach.js","../../tko.binding.if/src/index.js","../../tko.binding.foreach/src/index.js","../../tko.filter.punches/src/index.js","../../tko.binding.component/src/componentBinding.js","../../tko.binding.component/src/index.js","../src/index.js","../../tko.binding.core/src/index.js","../../tko.binding.core/src/attr.js","../../tko.binding.core/src/checked.js","../../tko.binding.core/src/html.js","../../tko.binding.core/src/let.js","../../tko.binding.core/src/style.js","../../tko.binding.core/src/submit.js","../../tko.binding.core/src/text.js","../../tko.binding.core/src/using.js","../../tko.binding.core/src/value.js","../../tko.binding.template/src/index.js"],"sourcesContent":["//\n// Array utilities\n//\n/* eslint no-cond-assign: 0 */\n\nexport function arrayForEach(array, action) {\n    for (var i = 0, j = array.length; i < j; i++)\n        action(array[i], i);\n}\n\nexport function arrayIndexOf(array, item) {\n    // IE9\n    if (typeof Array.prototype.indexOf == \"function\")\n        return Array.prototype.indexOf.call(array, item);\n    for (var i = 0, j = array.length; i < j; i++)\n        if (array[i] === item)\n            return i;\n    return -1;\n}\n\nexport function arrayFirst(array, predicate, predicateOwner) {\n    for (var i = 0, j = array.length; i < j; i++)\n        if (predicate.call(predicateOwner, array[i], i))\n            return array[i];\n    return null;\n}\n\nexport function arrayRemoveItem(array, itemToRemove) {\n    var index = arrayIndexOf(array, itemToRemove);\n    if (index > 0) {\n        array.splice(index, 1);\n    }\n    else if (index === 0) {\n        array.shift();\n    }\n}\n\nexport function arrayGetDistinctValues(array) {\n    array = array || [];\n    var result = [];\n    for (var i = 0, j = array.length; i < j; i++) {\n        if (arrayIndexOf(result, array[i]) < 0)\n            result.push(array[i]);\n    }\n    return result;\n}\n\nexport function arrayMap(array, mapping) {\n    array = array || [];\n    var result = [];\n    for (var i = 0, j = array.length; i < j; i++)\n        result.push(mapping(array[i], i));\n    return result;\n}\n\nexport function arrayFilter(array, predicate) {\n    array = array || [];\n    var result = [];\n    for (var i = 0, j = array.length; i < j; i++)\n        if (predicate(array[i], i))\n            result.push(array[i]);\n    return result;\n}\n\nexport function arrayPushAll(array, valuesToPush) {\n    if (valuesToPush instanceof Array)\n        array.push.apply(array, valuesToPush);\n    else\n        for (var i = 0, j = valuesToPush.length; i < j; i++)\n            array.push(valuesToPush[i]);\n    return array;\n}\n\nexport function addOrRemoveItem(array, value, included) {\n    var existingEntryIndex = arrayIndexOf(typeof array.peek === 'function' ? array.peek() : array, value);\n    if (existingEntryIndex < 0) {\n        if (included)\n            array.push(value);\n    } else {\n        if (!included)\n            array.splice(existingEntryIndex, 1);\n    }\n}\n\n\nexport function makeArray(arrayLikeObject) {\n    var result = [];\n    for (var i = 0, j = arrayLikeObject.length; i < j; i++) {\n        result.push(arrayLikeObject[i]);\n    }\n    return result;\n}\n\n\nexport function range(min, max) {\n    min = typeof min === 'function' ? min() : min;\n    max = typeof max === 'function' ? max() : max;\n    var result = [];\n    for (var i = min; i <= max; i++)\n        result.push(i);\n    return result;\n}\n\n// Go through the items that have been added and deleted and try to find matches between them.\nexport function findMovesInArrayComparison(left, right, limitFailedCompares) {\n    if (left.length && right.length) {\n        var failedCompares, l, r, leftItem, rightItem;\n        for (failedCompares = l = 0; (!limitFailedCompares || failedCompares < limitFailedCompares) && (leftItem = left[l]); ++l) {\n            for (r = 0; rightItem = right[r]; ++r) {\n                if (leftItem['value'] === rightItem['value']) {\n                    leftItem['moved'] = rightItem['index'];\n                    rightItem['moved'] = leftItem['index'];\n                    right.splice(r, 1);         // This item is marked as moved; so remove it from right list\n                    failedCompares = r = 0;     // Reset failed compares count because we're checking for consecutive failures\n                    break;\n                }\n            }\n            failedCompares += r;\n        }\n    }\n}\n\n\n\nvar statusNotInOld = 'added', statusNotInNew = 'deleted';\n\n    // Simple calculation based on Levenshtein distance.\nexport function compareArrays(oldArray, newArray, options) {\n    // For backward compatibility, if the third arg is actually a bool, interpret\n    // it as the old parameter 'dontLimitMoves'. Newer code should use { dontLimitMoves: true }.\n    options = (typeof options === 'boolean') ? { 'dontLimitMoves': options } : (options || {});\n    oldArray = oldArray || [];\n    newArray = newArray || [];\n\n    if (oldArray.length < newArray.length)\n        return compareSmallArrayToBigArray(oldArray, newArray, statusNotInOld, statusNotInNew, options);\n    else\n        return compareSmallArrayToBigArray(newArray, oldArray, statusNotInNew, statusNotInOld, options);\n}\n\n\nfunction compareSmallArrayToBigArray(smlArray, bigArray, statusNotInSml, statusNotInBig, options) {\n    var myMin = Math.min,\n        myMax = Math.max,\n        editDistanceMatrix = [],\n        smlIndex, smlIndexMax = smlArray.length,\n        bigIndex, bigIndexMax = bigArray.length,\n        compareRange = (bigIndexMax - smlIndexMax) || 1,\n        maxDistance = smlIndexMax + bigIndexMax + 1,\n        thisRow, lastRow,\n        bigIndexMaxForRow, bigIndexMinForRow;\n\n    for (smlIndex = 0; smlIndex <= smlIndexMax; smlIndex++) {\n        lastRow = thisRow;\n        editDistanceMatrix.push(thisRow = []);\n        bigIndexMaxForRow = myMin(bigIndexMax, smlIndex + compareRange);\n        bigIndexMinForRow = myMax(0, smlIndex - 1);\n        for (bigIndex = bigIndexMinForRow; bigIndex <= bigIndexMaxForRow; bigIndex++) {\n            if (!bigIndex)\n                thisRow[bigIndex] = smlIndex + 1;\n            else if (!smlIndex)  // Top row - transform empty array into new array via additions\n                thisRow[bigIndex] = bigIndex + 1;\n            else if (smlArray[smlIndex - 1] === bigArray[bigIndex - 1])\n                thisRow[bigIndex] = lastRow[bigIndex - 1];                  // copy value (no edit)\n            else {\n                var northDistance = lastRow[bigIndex] || maxDistance;       // not in big (deletion)\n                var westDistance = thisRow[bigIndex - 1] || maxDistance;    // not in small (addition)\n                thisRow[bigIndex] = myMin(northDistance, westDistance) + 1;\n            }\n        }\n    }\n\n    var editScript = [], meMinusOne, notInSml = [], notInBig = [];\n    for (smlIndex = smlIndexMax, bigIndex = bigIndexMax; smlIndex || bigIndex;) {\n        meMinusOne = editDistanceMatrix[smlIndex][bigIndex] - 1;\n        if (bigIndex && meMinusOne === editDistanceMatrix[smlIndex][bigIndex-1]) {\n            notInSml.push(editScript[editScript.length] = {     // added\n                'status': statusNotInSml,\n                'value': bigArray[--bigIndex],\n                'index': bigIndex });\n        } else if (smlIndex && meMinusOne === editDistanceMatrix[smlIndex - 1][bigIndex]) {\n            notInBig.push(editScript[editScript.length] = {     // deleted\n                'status': statusNotInBig,\n                'value': smlArray[--smlIndex],\n                'index': smlIndex });\n        } else {\n            --bigIndex;\n            --smlIndex;\n            if (!options['sparse']) {\n                editScript.push({\n                    'status': \"retained\",\n                    'value': bigArray[bigIndex] });\n            }\n        }\n    }\n\n    // Set a limit on the number of consecutive non-matching comparisons; having it a multiple of\n    // smlIndexMax keeps the time complexity of this algorithm linear.\n    findMovesInArrayComparison(notInBig, notInSml, !options['dontLimitMoves'] && smlIndexMax * 10);\n\n    return editScript.reverse();\n}\n","//\n// Error handling\n// ---\n//\n// The default onError handler is to re-throw.\nimport options from './options.js';\n\n\nexport function catchFunctionErrors(delegate) {\n    return options.onError ? function () {\n        try {\n            return delegate.apply(this, arguments);\n        } catch (e) {\n            options.onError(e);\n        }\n    } : delegate;\n}\n\nexport function deferError(error) {\n    safeSetTimeout(function () { options.onError(error); }, 0);\n}\n\n\nexport function safeSetTimeout(handler, timeout) {\n    return setTimeout(catchFunctionErrors(handler), timeout);\n}\n","//\n// Asynchronous functionality\n// ---\nimport { safeSetTimeout } from './error.js';\n\nexport function throttle(callback, timeout) {\n    var timeoutInstance;\n    return function () {\n        if (!timeoutInstance) {\n            timeoutInstance = safeSetTimeout(function () {\n                timeoutInstance = undefined;\n                callback();\n            }, timeout);\n        }\n    };\n}\n\nexport function debounce(callback, timeout) {\n    var timeoutInstance;\n    return function () {\n        clearTimeout(timeoutInstance);\n        timeoutInstance = safeSetTimeout(callback, timeout);\n    };\n}\n","//\n// Object functions\n//\n\nexport function extend(target, source) {\n    if (source) {\n        for(var prop in source) {\n            if(source.hasOwnProperty(prop)) {\n                target[prop] = source[prop];\n            }\n        }\n    }\n    return target;\n}\n\nexport function objectForEach(obj, action) {\n    for (var prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n            action(prop, obj[prop]);\n        }\n    }\n}\n\n\nexport function objectMap(source, mapping) {\n    if (!source)\n        return source;\n    var target = {};\n    for (var prop in source) {\n        if (source.hasOwnProperty(prop)) {\n            target[prop] = mapping(source[prop], prop, source);\n        }\n    }\n    return target;\n}\n\n\nexport function getObjectOwnProperty(obj, propName) {\n    return obj.hasOwnProperty(propName) ? obj[propName] : undefined;\n}\n\n\nexport function clonePlainObjectDeep(obj, seen) {\n    if (!seen) { seen = []; }\n\n    if (!obj || typeof obj !== 'object'\n        || obj.constructor !== Object\n        || seen.indexOf(obj) !== -1) {\n        return obj;\n    }\n\n    // Anything that makes it below is a plain object that has not yet\n    // been seen/cloned.\n    seen.push(obj);\n\n    var result = {};\n    for (var prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n            result[prop] = clonePlainObjectDeep(obj[prop], seen);\n        }\n    }\n    return result;\n}","//\n// Prototype Functions\n//\nimport { extend } from './object.js';\nimport options from './options.js';\n\nvar protoProperty = options.protoProperty;\n\nexport var canSetPrototype = ({ __proto__: [] } instanceof Array);\n\nexport function setPrototypeOf(obj, proto) {\n    obj.__proto__ = proto;\n    return obj;\n}\n\nexport var setPrototypeOfOrExtend = canSetPrototype ? setPrototypeOf : extend;\n\nexport function hasPrototype(instance, prototype) {\n    if ((instance === null) || (instance === undefined) || (instance[protoProperty] === undefined)) return false;\n    if (instance[protoProperty] === prototype) return true;\n    return hasPrototype(instance[protoProperty], prototype); // Walk the prototype chain\n}\n","//\n// String (and JSON)\n//\n\n\nexport function stringTrim (string) {\n    return string === null || string === undefined ? '' :\n        string.trim ?\n            string.trim() :\n            string.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g, '');\n}\n\n\nexport function stringStartsWith (string, startsWith) {\n    string = string || \"\";\n    if (startsWith.length > string.length)\n        return false;\n    return string.substring(0, startsWith.length) === startsWith;\n}\n\n\nexport function parseJson (jsonString) {\n    if (typeof jsonString == \"string\") {\n        jsonString = stringTrim(jsonString);\n        if (jsonString) {\n            if (JSON && JSON.parse) // Use native parsing where available\n                return JSON.parse(jsonString);\n            return (new Function(\"return \" + jsonString))(); // Fallback on less safe parsing for older browsers\n        }\n    }\n    return null;\n}\n\n\nexport function stringifyJson (data, replacer, space) {   // replacer and space are optional\n    if (!JSON || !JSON.stringify)\n        throw new Error(\"Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js\");\n    return JSON.stringify(typeof data === 'function' ? data() : data, replacer, space);\n}\n","//\n// ES6 Symbols\n//\n\nexport var useSymbols = typeof Symbol === 'function';\n\nexport function createSymbolOrString(identifier) {\n    return useSymbols ? Symbol(identifier) : identifier;\n}\n","//\n// DOM - CSS\n//\n\nimport { arrayForEach, addOrRemoveItem } from './array.js';\n\n// For details on the pattern for changing node classes\n// see: https://github.com/knockout/knockout/issues/1597\nvar cssClassNameRegex = /\\S+/g;\n\n\nfunction toggleDomNodeCssClass(node, classNames, shouldHaveClass) {\n    var addOrRemoveFn;\n    if (!classNames) { return; }\n    if (typeof node.classList === 'object') {\n        addOrRemoveFn = node.classList[shouldHaveClass ? 'add' : 'remove'];\n        arrayForEach(classNames.match(cssClassNameRegex), function(className) {\n            addOrRemoveFn.call(node.classList, className);\n        });\n    } else if (typeof node.className['baseVal'] === 'string') {\n        // SVG tag .classNames is an SVGAnimatedString instance\n        toggleObjectClassPropertyString(node.className, 'baseVal', classNames, shouldHaveClass);\n    } else {\n        // node.className ought to be a string.\n        toggleObjectClassPropertyString(node, 'className', classNames, shouldHaveClass);\n    }\n}\n\n\nfunction toggleObjectClassPropertyString(obj, prop, classNames, shouldHaveClass) {\n    // obj/prop is either a node/'className' or a SVGAnimatedString/'baseVal'.\n    var currentClassNames = obj[prop].match(cssClassNameRegex) || [];\n    arrayForEach(classNames.match(cssClassNameRegex), function(className) {\n        addOrRemoveItem(currentClassNames, className, shouldHaveClass);\n    });\n    obj[prop] = currentClassNames.join(\" \");\n}\n\n\nexport { toggleDomNodeCssClass };\n","//\n// Information about the DOM\n//\nimport { arrayFirst } from '../array.js';\n\nexport function domNodeIsContainedBy (node, containedByNode) {\n    if (node === containedByNode)\n        return true;\n    if (node.nodeType === 11)\n        return false; // Fixes issue #1162 - can't use node.contains for document fragments on IE8\n    if (containedByNode.contains)\n        return containedByNode.contains(node.nodeType !== 1 ? node.parentNode : node);\n    if (containedByNode.compareDocumentPosition)\n        return (containedByNode.compareDocumentPosition(node) & 16) == 16;\n    while (node && node != containedByNode) {\n        node = node.parentNode;\n    }\n    return !!node;\n}\n\nexport function domNodeIsAttachedToDocument (node) {\n    return domNodeIsContainedBy(node, node.ownerDocument.documentElement);\n}\n\nexport function anyDomNodeIsAttachedToDocument(nodes) {\n    return !!arrayFirst(nodes, domNodeIsAttachedToDocument);\n}\n\nexport function tagNameLower(element) {\n    // For HTML elements, tagName will always be upper case; for XHTML elements, it'll be lower case.\n    // Possible future optimization: If we know it's an element from an XHTML document (not HTML),\n    // we don't need to do the .toLowerCase() as it will always be lower case anyway.\n    return element && element.tagName && element.tagName.toLowerCase();\n}\n\nexport function isDomElement(obj) {\n    if (window.HTMLElement) {\n        return obj instanceof HTMLElement;\n    } else {\n        return obj && obj.tagName && obj.nodeType === 1;\n    }\n}\n\nexport function isDocumentFragment(obj) {\n    if (window.DocumentFragment) {\n        return obj instanceof DocumentFragment;\n    } else {\n        return obj && obj.nodeType === 11;\n    }\n}\n","//\n// DOM node data\n//\nimport options from '../options'\n\n//\nvar dataStoreKeyExpandoPropertyName = \"__ko__data\" + new Date();\nvar dataStore;\nvar uniqueId = 0;\nvar get;\nvar set;\nvar clear;\n\n/**\n * --- Legacy getter/setter (may cause memory leaks) ---\n */\nfunction getAll(node, createIfNotFound) {\n    var dataStoreKey = node[dataStoreKeyExpandoPropertyName];\n    var hasExistingDataStore = dataStoreKey && (dataStoreKey !== \"null\") && dataStore[dataStoreKey];\n    if (!hasExistingDataStore) {\n        if (!createIfNotFound)\n            return undefined;\n        dataStoreKey = node[dataStoreKeyExpandoPropertyName] = \"ko\" + uniqueId++;\n        dataStore[dataStoreKey] = {};\n    }\n    return dataStore[dataStoreKey];\n}\n\nfunction legacyGet(node, key) {\n    var allDataForNode = getAll(node, false);\n    return allDataForNode === undefined ? undefined : allDataForNode[key];\n}\n\nfunction legacySet(node, key, value) {\n    if (value === undefined) {\n        // Make sure we don't actually create a new domData key if we are actually deleting a value\n        if (getAll(node, false) === undefined)\n            return;\n    }\n    var allDataForNode = getAll(node, true);\n    allDataForNode[key] = value;\n}\n\nfunction legacyClear(node) {\n    var dataStoreKey = node[dataStoreKeyExpandoPropertyName];\n    if (dataStoreKey) {\n        delete dataStore[dataStoreKey];\n        node[dataStoreKeyExpandoPropertyName] = null;\n        return true; // Exposing \"did clean\" flag purely so specs can infer whether things have been cleaned up as intended\n    }\n    return false;\n}\n\n/**\n * WeakMap get/set/clear\n */\n\nfunction wmGet(node, key) {\n    return (dataStore.get(node) || {})[key];\n}\n\nfunction wmSet(node, key, value) {\n    var dataForNode;\n    if (dataStore.has(node)) {\n        dataForNode = dataStore.get(node);\n    } else {\n        dataForNode = {};\n        dataStore.set(node, dataForNode);\n    }\n    dataForNode[key] = value;\n}\n\nfunction wmClear (node) {\n  return dataStore.delete(node)\n}\n\n\nif ('WeakMap' in options.global) {\n    dataStore = new WeakMap();\n    get = wmGet;\n    set = wmSet;\n    clear = wmClear;\n} else {\n    dataStore = {};\n    get = legacyGet;\n    set = legacySet;\n    clear = legacyClear;\n}\n\n\n\n/**\n * Create a unique key-string identifier.\n * FIXME: This should be deprecated.\n */\nexport function nextKey() {\n    return (uniqueId++) + dataStoreKeyExpandoPropertyName;\n}\n\n\nexport { get, set, clear };\n","//\n// DOM node disposal\n//\n/* eslint no-cond-assign: 0 */\nimport * as domData from './data.js';\nimport {arrayRemoveItem, arrayPushAll} from '../array.js';\nimport {jQueryInstance} from '../jquery.js';\n\nvar domDataKey = domData.nextKey();\n// Node types:\n// 1: Element\n// 8: Comment\n// 9: Document\nvar cleanableNodeTypes = { 1: true, 8: true, 9: true };\nvar cleanableNodeTypesWithDescendants = { 1: true, 9: true };\n\nfunction getDisposeCallbacksCollection(node, createIfNotFound) {\n    var allDisposeCallbacks = domData.get(node, domDataKey);\n    if ((allDisposeCallbacks === undefined) && createIfNotFound) {\n        allDisposeCallbacks = [];\n        domData.set(node, domDataKey, allDisposeCallbacks);\n    }\n    return allDisposeCallbacks;\n}\nfunction destroyCallbacksCollection(node) {\n    domData.set(node, domDataKey, undefined);\n}\n\nfunction cleanSingleNode(node) {\n    // Run all the dispose callbacks\n    var callbacks = getDisposeCallbacksCollection(node, false);\n    if (callbacks) {\n        callbacks = callbacks.slice(0); // Clone, as the array may be modified during iteration (typically, callbacks will remove themselves)\n        for (var i = 0; i < callbacks.length; i++)\n            callbacks[i](node);\n    }\n\n    // Erase the DOM data\n    domData.clear(node);\n\n    // Perform cleanup needed by external libraries (currently only jQuery, but can be extended)\n    for (var i = 0, j = otherNodeCleanerFunctions.length; i < j; ++i) {\n        otherNodeCleanerFunctions[i](node);\n    }\n\n    // Clear any immediate-child comment nodes, as these wouldn't have been found by\n    // node.getElementsByTagName(\"*\") in cleanNode() (comment nodes aren't elements)\n    if (cleanableNodeTypesWithDescendants[node.nodeType])\n        cleanImmediateCommentTypeChildren(node);\n}\n\nfunction cleanImmediateCommentTypeChildren(nodeWithChildren) {\n    var child, nextChild = nodeWithChildren.firstChild;\n    while (child = nextChild) {\n        nextChild = child.nextSibling;\n        if (child.nodeType === 8)\n            cleanSingleNode(child);\n    }\n}\n\n// Exports\nexport function addDisposeCallback(node, callback) {\n    if (typeof callback != \"function\")\n        throw new Error(\"Callback must be a function\");\n    getDisposeCallbacksCollection(node, true).push(callback);\n}\n\nexport function removeDisposeCallback(node, callback) {\n    var callbacksCollection = getDisposeCallbacksCollection(node, false);\n    if (callbacksCollection) {\n        arrayRemoveItem(callbacksCollection, callback);\n        if (callbacksCollection.length == 0)\n            destroyCallbacksCollection(node);\n    }\n}\n\nexport function cleanNode(node) {\n    // First clean this node, where applicable\n    if (cleanableNodeTypes[node.nodeType]) {\n        cleanSingleNode(node);\n\n        // ... then its descendants, where applicable\n        if (cleanableNodeTypesWithDescendants[node.nodeType]) {\n            // Clone the descendants list in case it changes during iteration\n            var descendants = [];\n            arrayPushAll(descendants, node.getElementsByTagName(\"*\"));\n            for (var i = 0, j = descendants.length; i < j; i++)\n                cleanSingleNode(descendants[i]);\n        }\n    }\n    return node;\n}\n\nexport function removeNode(node) {\n    cleanNode(node);\n    if (node.parentNode)\n        node.parentNode.removeChild(node);\n}\n\n\n// Expose supplemental node cleaning functions.\nexport var otherNodeCleanerFunctions = [];\n\n\n// Special support for jQuery here because it's so commonly used.\n// Many jQuery plugins (including jquery.tmpl) store data using jQuery's equivalent of domData\n// so notify it to tear down any resources associated with the node & descendants here.\nexport function cleanjQueryData(node) {\n    var jQueryCleanNodeFn = jQueryInstance\n        ? jQueryInstance.cleanData : null;\n\n    if (jQueryCleanNodeFn) {\n        jQueryCleanNodeFn([node]);\n    }\n}\n\n\notherNodeCleanerFunctions.push(cleanjQueryData);\n","//\n// DOM Events\n//\n\nimport { objectForEach } from '../object.js';\nimport { jQueryInstance } from '../jquery.js';\nimport { ieVersion } from '../ie.js';\nimport { catchFunctionErrors } from '../error.js';\n\nimport { tagNameLower } from './info.js';\nimport { addDisposeCallback } from './disposal.js';\nimport options from '../options.js';\n\n\n// Represent the known event types in a compact way, then at runtime transform it into a hash with event name as key (for fast lookup)\nvar knownEvents = {},\n    knownEventTypesByEventName = {}\n\nvar keyEventTypeName = (options.global.navigator && /Firefox\\/2/i.test(options.global.navigator.userAgent)) ? 'KeyboardEvent' : 'UIEvents';\n\nknownEvents[keyEventTypeName] = ['keyup', 'keydown', 'keypress'];\n\nknownEvents['MouseEvents'] = [\n    'click', 'dblclick', 'mousedown', 'mouseup', 'mousemove', 'mouseover',\n    'mouseout', 'mouseenter', 'mouseleave'];\n\n\nobjectForEach(knownEvents, function(eventType, knownEventsForType) {\n    if (knownEventsForType.length) {\n        for (var i = 0, j = knownEventsForType.length; i < j; i++)\n            knownEventTypesByEventName[knownEventsForType[i]] = eventType;\n    }\n});\n\n\nfunction isClickOnCheckableElement(element, eventType) {\n    if ((tagNameLower(element) !== \"input\") || !element.type) return false;\n    if (eventType.toLowerCase() != \"click\") return false;\n    var inputType = element.type;\n    return (inputType == \"checkbox\") || (inputType == \"radio\");\n}\n\n\n// Workaround for an IE9 issue - https://github.com/SteveSanderson/knockout/issues/406\nvar eventsThatMustBeRegisteredUsingAttachEvent = { 'propertychange': true };\n\nexport function registerEventHandler(element, eventType, handler) {\n    var wrappedHandler = catchFunctionErrors(handler);\n\n    var mustUseAttachEvent = ieVersion && eventsThatMustBeRegisteredUsingAttachEvent[eventType];\n    if (!options.useOnlyNativeEvents && !mustUseAttachEvent && jQueryInstance) {\n        jQueryInstance(element).bind(eventType, wrappedHandler);\n    } else if (!mustUseAttachEvent && typeof element.addEventListener == \"function\")\n        element.addEventListener(eventType, wrappedHandler, false);\n    else if (typeof element.attachEvent !== \"undefined\") {\n        var attachEventHandler = function (event) { wrappedHandler.call(element, event); },\n            attachEventName = \"on\" + eventType;\n        element.attachEvent(attachEventName, attachEventHandler);\n\n        // IE does not dispose attachEvent handlers automatically (unlike with addEventListener)\n        // so to avoid leaks, we have to remove them manually. See bug #856\n        addDisposeCallback(element, function() {\n            element.detachEvent(attachEventName, attachEventHandler);\n        });\n    } else\n        throw new Error(\"Browser doesn't support addEventListener or attachEvent\");\n}\n\nexport function triggerEvent(element, eventType) {\n    if (!(element && element.nodeType))\n        throw new Error(\"element must be a DOM node when calling triggerEvent\");\n\n    // For click events on checkboxes and radio buttons, jQuery toggles the element checked state *after* the\n    // event handler runs instead of *before*. (This was fixed in 1.9 for checkboxes but not for radio buttons.)\n    // IE doesn't change the checked state when you trigger the click event using \"fireEvent\".\n    // In both cases, we'll use the click method instead.\n    var useClickWorkaround = isClickOnCheckableElement(element, eventType);\n\n    if (!options.useOnlyNativeEvents && jQueryInstance && !useClickWorkaround) {\n        jQueryInstance(element).trigger(eventType);\n    } else if (typeof document.createEvent == \"function\") {\n        if (typeof element.dispatchEvent == \"function\") {\n            var eventCategory = knownEventTypesByEventName[eventType] || \"HTMLEvents\";\n            var event = document.createEvent(eventCategory);\n            event.initEvent(eventType, true, true, options.global, 0, 0, 0, 0, 0, false, false, false, false, 0, element);\n            element.dispatchEvent(event);\n        }\n        else\n            throw new Error(\"The supplied element doesn't support dispatchEvent\");\n    } else if (useClickWorkaround && element.click) {\n        element.click();\n    } else if (typeof element.fireEvent != \"undefined\") {\n        element.fireEvent(\"on\" + eventType);\n    } else {\n        throw new Error(\"Browser doesn't support triggering events\");\n    }\n}\n","//\n//  DOM node manipulation\n//\nimport { ieVersion } from '../ie.js';\n\nexport function fixUpContinuousNodeArray(continuousNodeArray, parentNode) {\n    // Before acting on a set of nodes that were previously outputted by a template function, we have to reconcile\n    // them against what is in the DOM right now. It may be that some of the nodes have already been removed, or that\n    // new nodes might have been inserted in the middle, for example by a binding. Also, there may previously have been\n    // leading comment nodes (created by rewritten string-based templates) that have since been removed during binding.\n    // So, this function translates the old \"map\" output array into its best guess of the set of current DOM nodes.\n    //\n    // Rules:\n    //   [A] Any leading nodes that have been removed should be ignored\n    //       These most likely correspond to memoization nodes that were already removed during binding\n    //       See https://github.com/knockout/knockout/pull/440\n    //   [B] Any trailing nodes that have been remove should be ignored\n    //       This prevents the code here from adding unrelated nodes to the array while processing rule [C]\n    //       See https://github.com/knockout/knockout/pull/1903\n    //   [C] We want to output a continuous series of nodes. So, ignore any nodes that have already been removed,\n    //       and include any nodes that have been inserted among the previous collection\n\n    if (continuousNodeArray.length) {\n        // The parent node can be a virtual element; so get the real parent node\n        parentNode = (parentNode.nodeType === 8 && parentNode.parentNode) || parentNode;\n\n        // Rule [A]\n        while (continuousNodeArray.length && continuousNodeArray[0].parentNode !== parentNode)\n            continuousNodeArray.splice(0, 1);\n\n        // Rule [B]\n        while (continuousNodeArray.length > 1 && continuousNodeArray[continuousNodeArray.length - 1].parentNode !== parentNode)\n            continuousNodeArray.length--;\n\n        // Rule [C]\n        if (continuousNodeArray.length > 1) {\n            var current = continuousNodeArray[0], last = continuousNodeArray[continuousNodeArray.length - 1];\n            // Replace with the actual new continuous node set\n            continuousNodeArray.length = 0;\n            while (current !== last) {\n                continuousNodeArray.push(current);\n                current = current.nextSibling;\n            }\n            continuousNodeArray.push(last);\n        }\n    }\n    return continuousNodeArray;\n}\n\nexport function setOptionNodeSelectionState (optionNode, isSelected) {\n    // IE6 sometimes throws \"unknown error\" if you try to write to .selected directly, whereas Firefox struggles with setAttribute. Pick one based on browser.\n    if (ieVersion < 7)\n        optionNode.setAttribute(\"selected\", isSelected);\n    else\n        optionNode.selected = isSelected;\n}\n\n\nexport function forceRefresh(node) {\n    // Workaround for an IE9 rendering bug - https://github.com/SteveSanderson/knockout/issues/209\n    if (ieVersion >= 9) {\n        // For text nodes and comment nodes (most likely virtual elements), we will have to refresh the container\n        var elem = node.nodeType == 1 ? node : node.parentNode;\n        if (elem.style)\n            elem.style.zoom = elem.style.zoom;\n    }\n}\n\nexport function ensureSelectElementIsRenderedCorrectly(selectElement) {\n    // Workaround for IE9 rendering bug - it doesn't reliably display all the text in dynamically-added select boxes unless you force it to re-render by updating the width.\n    // (See https://github.com/SteveSanderson/knockout/issues/312, http://stackoverflow.com/questions/5908494/select-only-shows-first-char-of-selected-option)\n    // Also fixes IE7 and IE8 bug that causes selects to be zero width if enclosed by 'if' or 'with'. (See issue #839)\n    if (ieVersion) {\n        var originalWidth = selectElement.style.width;\n        selectElement.style.width = 0;\n        selectElement.style.width = originalWidth;\n    }\n}\n","/* eslint no-cond-assign: 0 */\n//\n// Virtual Elements\n//\n//\n// \"Virtual elements\" is an abstraction on top of the usual DOM API which understands the notion that comment nodes\n// may be used to represent hierarchy (in addition to the DOM's natural hierarchy).\n// If you call the DOM-manipulating functions on ko.virtualElements, you will be able to read and write the state\n// of that virtual hierarchy\n//\n// The point of all this is to support containerless templates (e.g., <!-- ko foreach:someCollection -->blah<!-- /ko -->)\n// without having to scatter special cases all over the binding and templating code.\n\n// IE 9 cannot reliably read the \"nodeValue\" property of a comment node (see https://github.com/SteveSanderson/knockout/issues/186)\n// but it does give them a nonstandard alternative property called \"text\" that it can read reliably. Other browsers don't have that property.\n// So, use node.text where available, and node.nodeValue elsewhere\nimport { emptyDomNode, setDomNodeChildren as setRegularDomNodeChildren } from './manipulation.js';\nimport { removeNode } from './disposal.js';\nimport { tagNameLower } from './info.js';\nimport options from '../options'\n\nvar commentNodesHaveTextProperty = options.document && options.document.createComment(\"test\").text === \"<!--test-->\";\n\nexport var startCommentRegex = commentNodesHaveTextProperty ? /^<!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*-->$/ : /^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/;\nexport var endCommentRegex =   commentNodesHaveTextProperty ? /^<!--\\s*\\/ko\\s*-->$/ : /^\\s*\\/ko\\s*$/;\nvar htmlTagsWithOptionallyClosingChildren = { 'ul': true, 'ol': true };\n\nexport function isStartComment(node) {\n    return (node.nodeType == 8) && startCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);\n}\n\nexport function isEndComment(node) {\n    return (node.nodeType == 8) && endCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);\n}\n\nexport function getVirtualChildren(startComment, allowUnbalanced) {\n    var currentNode = startComment;\n    var depth = 1;\n    var children = [];\n    while (currentNode = currentNode.nextSibling) {\n        if (isEndComment(currentNode)) {\n            depth--;\n            if (depth === 0)\n                return children;\n        }\n\n        children.push(currentNode);\n\n        if (isStartComment(currentNode))\n            depth++;\n    }\n    if (!allowUnbalanced)\n        throw new Error(\"Cannot find closing comment tag to match: \" + startComment.nodeValue);\n    return null;\n}\n\nfunction getMatchingEndComment(startComment, allowUnbalanced) {\n    var allVirtualChildren = getVirtualChildren(startComment, allowUnbalanced);\n    if (allVirtualChildren) {\n        if (allVirtualChildren.length > 0)\n            return allVirtualChildren[allVirtualChildren.length - 1].nextSibling;\n        return startComment.nextSibling;\n    } else\n        return null; // Must have no matching end comment, and allowUnbalanced is true\n}\n\nfunction getUnbalancedChildTags(node) {\n    // e.g., from <div>OK</div><!-- ko blah --><span>Another</span>, returns: <!-- ko blah --><span>Another</span>\n    //       from <div>OK</div><!-- /ko --><!-- /ko -->,             returns: <!-- /ko --><!-- /ko -->\n    var childNode = node.firstChild, captureRemaining = null;\n    if (childNode) {\n        do {\n            if (captureRemaining)                   // We already hit an unbalanced node and are now just scooping up all subsequent nodes\n                captureRemaining.push(childNode);\n            else if (isStartComment(childNode)) {\n                var matchingEndComment = getMatchingEndComment(childNode, /* allowUnbalanced: */ true);\n                if (matchingEndComment)             // It's a balanced tag, so skip immediately to the end of this virtual set\n                    childNode = matchingEndComment;\n                else\n                    captureRemaining = [childNode]; // It's unbalanced, so start capturing from this point\n            } else if (isEndComment(childNode)) {\n                captureRemaining = [childNode];     // It's unbalanced (if it wasn't, we'd have skipped over it already), so start capturing\n            }\n        } while (childNode = childNode.nextSibling);\n    }\n    return captureRemaining;\n}\n\nexport var allowedBindings = {};\nexport var hasBindingValue = isStartComment;\n\nexport function childNodes(node) {\n    return isStartComment(node) ? getVirtualChildren(node) : node.childNodes;\n}\n\nexport function emptyNode(node) {\n    if (!isStartComment(node))\n        emptyDomNode(node);\n    else {\n        var virtualChildren = childNodes(node);\n        for (var i = 0, j = virtualChildren.length; i < j; i++)\n            removeNode(virtualChildren[i]);\n    }\n}\n\nexport function setDomNodeChildren(node, childNodes) {\n    if (!isStartComment(node))\n        setRegularDomNodeChildren(node, childNodes);\n    else {\n        emptyNode(node);\n        var endCommentNode = node.nextSibling; // Must be the next sibling, as we just emptied the children\n        for (var i = 0, j = childNodes.length; i < j; i++)\n            endCommentNode.parentNode.insertBefore(childNodes[i], endCommentNode);\n    }\n}\n\nexport function prepend(containerNode, nodeToPrepend) {\n    if (!isStartComment(containerNode)) {\n        if (containerNode.firstChild)\n            containerNode.insertBefore(nodeToPrepend, containerNode.firstChild);\n        else\n            containerNode.appendChild(nodeToPrepend);\n    } else {\n        // Start comments must always have a parent and at least one following sibling (the end comment)\n        containerNode.parentNode.insertBefore(nodeToPrepend, containerNode.nextSibling);\n    }\n}\n\nexport function insertAfter(containerNode, nodeToInsert, insertAfterNode) {\n    if (!insertAfterNode) {\n        prepend(containerNode, nodeToInsert);\n    } else if (!isStartComment(containerNode)) {\n        // Insert after insertion point\n        if (insertAfterNode.nextSibling)\n            containerNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling);\n        else\n            containerNode.appendChild(nodeToInsert);\n    } else {\n        // Children of start comments must always have a parent and at least one following sibling (the end comment)\n        containerNode.parentNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling);\n    }\n}\n\nexport function firstChild(node) {\n    if (!isStartComment(node)) {\n        return node.firstChild;\n    }\n    if (!node.nextSibling || isEndComment(node.nextSibling)) {\n        return null;\n    }\n    return node.nextSibling;\n}\n\n\nexport function lastChild(node) {\n    var nextChild = firstChild(node),\n        lastChildNode;\n\n    do {\n        lastChildNode = nextChild;\n    } while (nextChild = nextSibling(nextChild));\n\n    return lastChildNode;\n}\n\nexport function nextSibling(node) {\n    if (isStartComment(node))\n        node = getMatchingEndComment(node);\n    if (node.nextSibling && isEndComment(node.nextSibling))\n        return null;\n    return node.nextSibling;\n}\n\nexport function previousSibling(node) {\n    var depth = 0;\n    do {\n        if (node.nodeType === 8) {\n            if (isStartComment(node)) {\n                if (--depth === 0) {\n                    return node;\n                }\n            } else if (isEndComment(node)) {\n                depth++;\n            }\n        } else {\n            if (depth === 0) { return node; }\n        }\n    } while (node = node.previousSibling);\n    return;\n}\n\nexport function virtualNodeBindingValue(node) {\n    var regexMatch = (commentNodesHaveTextProperty ? node.text : node.nodeValue).match(startCommentRegex);\n    return regexMatch ? regexMatch[1] : null;\n}\n\nexport function normaliseVirtualElementDomStructure(elementVerified) {\n    // Workaround for https://github.com/SteveSanderson/knockout/issues/155\n    // (IE <= 8 or IE 9 quirks mode parses your HTML weirdly, treating closing </li> tags as if they don't exist, thereby moving comment nodes\n    // that are direct descendants of <ul> into the preceding <li>)\n    if (!htmlTagsWithOptionallyClosingChildren[tagNameLower(elementVerified)])\n        return;\n\n    // Scan immediate children to see if they contain unbalanced comment tags. If they do, those comment tags\n    // must be intended to appear *after* that child, so move them there.\n    var childNode = elementVerified.firstChild;\n    if (childNode) {\n        do {\n            if (childNode.nodeType === 1) {\n                var unbalancedTags = getUnbalancedChildTags(childNode);\n                if (unbalancedTags) {\n                    // Fix up the DOM by moving the unbalanced tags to where they most likely were intended to be placed - *after* the child\n                    var nodeToInsertBefore = childNode.nextSibling;\n                    for (var i = 0; i < unbalancedTags.length; i++) {\n                        if (nodeToInsertBefore)\n                            elementVerified.insertBefore(unbalancedTags[i], nodeToInsertBefore);\n                        else\n                            elementVerified.appendChild(unbalancedTags[i]);\n                    }\n                }\n            }\n        } while (childNode = childNode.nextSibling);\n    }\n}\n","//\n// DOM manipulation\n//\n/* eslint no-empty: 0 */\nimport { makeArray } from '../array.js';\nimport { ieVersion } from '../ie.js';\nimport { cleanNode, removeNode } from './disposal.js';\nimport { forceRefresh } from './fixes.js';\nimport * as virtualElements from './virtualElements.js';\n\nexport function moveCleanedNodesToContainerElement(nodes) {\n    // Ensure it's a real array, as we're about to reparent the nodes and\n    // we don't want the underlying collection to change while we're doing that.\n    var nodesArray = makeArray(nodes);\n    var templateDocument = (nodesArray[0] && nodesArray[0].ownerDocument) || document;\n\n    var container = templateDocument.createElement('div');\n    for (var i = 0, j = nodesArray.length; i < j; i++) {\n        container.appendChild(cleanNode(nodesArray[i]));\n    }\n    return container;\n}\n\nexport function cloneNodes (nodesArray, shouldCleanNodes) {\n    for (var i = 0, j = nodesArray.length, newNodesArray = []; i < j; i++) {\n        var clonedNode = nodesArray[i].cloneNode(true);\n        newNodesArray.push(shouldCleanNodes ? cleanNode(clonedNode) : clonedNode);\n    }\n    return newNodesArray;\n}\n\nexport function setDomNodeChildren (domNode, childNodes) {\n    emptyDomNode(domNode);\n    if (childNodes) {\n        for (var i = 0, j = childNodes.length; i < j; i++)\n            domNode.appendChild(childNodes[i]);\n    }\n}\n\nexport function replaceDomNodes (nodeToReplaceOrNodeArray, newNodesArray) {\n    var nodesToReplaceArray = nodeToReplaceOrNodeArray.nodeType ? [nodeToReplaceOrNodeArray] : nodeToReplaceOrNodeArray;\n    if (nodesToReplaceArray.length > 0) {\n        var insertionPoint = nodesToReplaceArray[0];\n        var parent = insertionPoint.parentNode;\n        for (var i = 0, j = newNodesArray.length; i < j; i++)\n            parent.insertBefore(newNodesArray[i], insertionPoint);\n        for (i = 0, j = nodesToReplaceArray.length; i < j; i++) {\n            removeNode(nodesToReplaceArray[i]);\n        }\n    }\n}\n\nexport function setElementName(element, name) {\n    element.name = name;\n\n    // Workaround IE 6/7 issue\n    // - https://github.com/SteveSanderson/knockout/issues/197\n    // - http://www.matts411.com/post/setting_the_name_attribute_in_ie_dom/\n    if (ieVersion <= 7) {\n        try {\n            element.mergeAttributes(document.createElement(\"<input name='\" + element.name + \"'/>\"), false);\n        }\n        catch(e) {} // For IE9 with doc mode \"IE9 Standards\" and browser mode \"IE9 Compatibility View\"\n    }\n}\n\nexport function setTextContent(element, textContent) {\n    var value = typeof textContent === 'function' ? textContent() : textContent;\n    if ((value === null) || (value === undefined))\n        value = \"\";\n\n    // We need there to be exactly one child: a text node.\n    // If there are no children, more than one, or if it's not a text node,\n    // we'll clear everything and create a single text node.\n    var innerTextNode = virtualElements.firstChild(element);\n    if (!innerTextNode || innerTextNode.nodeType != 3 || virtualElements.nextSibling(innerTextNode)) {\n        virtualElements.setDomNodeChildren(element, [element.ownerDocument.createTextNode(value)]);\n    } else {\n        innerTextNode.data = value;\n    }\n\n    forceRefresh(element);\n}\n\nexport function emptyDomNode (domNode) {\n    while (domNode.firstChild) {\n        removeNode(domNode.firstChild);\n    }\n}\n","//\n// HTML-based manipulation\n//\nimport { stringTrim } from '../string.js';\nimport { makeArray } from '../array.js';\nimport { emptyDomNode } from './manipulation.js';\nimport { jQueryInstance } from '../jquery.js';\nimport * as virtualElements from './virtualElements';\nimport options from '../options'\n\n\nvar none = [0, \"\", \"\"],\n    table = [1, \"<table>\", \"</table>\"],\n    tbody = [2, \"<table><tbody>\", \"</tbody></table>\"],\n    colgroup = [ 2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\"],\n    tr = [3, \"<table><tbody><tr>\", \"</tr></tbody></table>\"],\n    select = [1, \"<select multiple='multiple'>\", \"</select>\"],\n    fieldset = [1, \"<fieldset>\", \"</fieldset>\"],\n    map = [1, \"<map>\", \"</map>\"],\n    object = [1, \"<object>\", \"</object>\"],\n    lookup = {\n        'area': map,\n        'col': colgroup,\n        'colgroup': table,\n        'caption': table,\n        'legend': fieldset,\n        'thead': table,\n        'tbody': table,\n        'tfoot': table,\n        'tr': tbody,\n        'td': tr,\n        'th': tr,\n        'option': select,\n        'optgroup': select,\n        'param': object\n    },\n\n    // The canonical way to test that the HTML5 <template> tag is supported\n    supportsTemplateTag = options.document && 'content' in options.document.createElement('template');\n\n\nfunction getWrap(tags) {\n    var m = tags.match(/^<([a-z]+)[ >]/);\n    return (m && lookup[m[1]]) || none;\n}\n\n\nfunction simpleHtmlParse(html, documentContext) {\n    documentContext || (documentContext = document);\n    var windowContext = documentContext['parentWindow'] || documentContext['defaultView'] || window;\n\n    // Based on jQuery's \"clean\" function, but only accounting for table-related elements.\n    // If you have referenced jQuery, this won't be used anyway - KO will use jQuery's \"clean\" function directly\n\n    // Note that there's still an issue in IE < 9 whereby it will discard comment nodes that are the first child of\n    // a descendant node. For example: \"<div><!-- mycomment -->abc</div>\" will get parsed as \"<div>abc</div>\"\n    // This won't affect anyone who has referenced jQuery, and there's always the workaround of inserting a dummy node\n    // (possibly a text node) in front of the comment. So, KO does not attempt to workaround this IE issue automatically at present.\n\n    // Trim whitespace, otherwise indexOf won't work as expected\n    var tags = stringTrim(html).toLowerCase(), div = documentContext.createElement(\"div\"),\n        wrap = getWrap(tags),\n        depth = wrap[0];\n\n    // Go to html and back, then peel off extra wrappers\n    // Note that we always prefix with some dummy text, because otherwise, IE<9 will strip out leading comment nodes in descendants. Total madness.\n    var markup = \"ignored<div>\" + wrap[1] + html + wrap[2] + \"</div>\";\n    if (typeof windowContext['innerShiv'] == \"function\") {\n        // Note that innerShiv is deprecated in favour of html5shiv. We should consider adding\n        // support for html5shiv (except if no explicit support is needed, e.g., if html5shiv\n        // somehow shims the native APIs so it just works anyway)\n        div.appendChild(windowContext['innerShiv'](markup));\n    } else {\n        div.innerHTML = markup;\n    }\n\n    // Move to the right depth\n    while (depth--)\n        div = div.lastChild;\n\n    return makeArray(div.lastChild.childNodes);\n}\n\n\nfunction templateHtmlParse(html, documentContext) {\n    if (!documentContext) { documentContext = document; }\n    var template = documentContext.createElement('template');\n    template.innerHTML = html;\n    return makeArray(template.content.childNodes);\n}\n\n\nfunction jQueryHtmlParse(html, documentContext) {\n    // jQuery's \"parseHTML\" function was introduced in jQuery 1.8.0 and is a documented public API.\n    if (jQueryInstance.parseHTML) {\n        return jQueryInstance.parseHTML(html, documentContext) || []; // Ensure we always return an array and never null\n    } else {\n        // For jQuery < 1.8.0, we fall back on the undocumented internal \"clean\" function.\n        var elems = jQueryInstance.clean([html], documentContext);\n\n        // As of jQuery 1.7.1, jQuery parses the HTML by appending it to some dummy parent nodes held in an in-memory document fragment.\n        // Unfortunately, it never clears the dummy parent nodes from the document fragment, so it leaks memory over time.\n        // Fix this by finding the top-most dummy parent element, and detaching it from its owner fragment.\n        if (elems && elems[0]) {\n            // Find the top-most parent element that's a direct child of a document fragment\n            var elem = elems[0];\n            while (elem.parentNode && elem.parentNode.nodeType !== 11 /* i.e., DocumentFragment */)\n                elem = elem.parentNode;\n            // ... then detach it\n            if (elem.parentNode)\n                elem.parentNode.removeChild(elem);\n        }\n\n        return elems;\n    }\n}\n\n\n/**\n * parseHtmlFragment converts a string into an array of DOM Nodes.\n * If supported, it uses <template>-tag parsing, falling back on\n * jQuery parsing (if jQuery is present), and finally on a\n * straightforward parser.\n *\n * @param  {string} html            To be parsed.\n * @param  {Object} documentContext That owns the executing code.\n * @return {[DOMNode]}              Parsed DOM Nodes\n */\nexport function parseHtmlFragment(html, documentContext) {\n    // Prefer <template>-tag based HTML parsing.\n    return supportsTemplateTag ? templateHtmlParse(html, documentContext) :\n\n        // Benefit from jQuery's on old browsers, where possible\n        // NOTE: jQuery's HTML parsing fails on element names like tr-*.\n        // See: https://github.com/jquery/jquery/pull/1988\n        (jQueryInstance ? jQueryHtmlParse(html, documentContext) :\n\n        // ... otherwise, this simple logic will do in most common cases.\n        simpleHtmlParse(html, documentContext));\n}\n\n\n/**\n  * setHtml empties the node's contents, unwraps the HTML, and\n  * sets the node's HTML using jQuery.html or parseHtmlFragment\n  *\n  * @param {DOMNode} node Node in which HTML needs to be set\n  * @param {DOMNode} html HTML to be inserted in node\n  * @returns undefined\n  */\nexport function setHtml(node, html) {\n    emptyDomNode(node);\n\n    // There's few cases where we would want to display a stringified\n    // function, so we unwrap it.\n    if (typeof html === 'function') {\n        html = html();\n    }\n\n    if ((html !== null) && (html !== undefined)) {\n        if (typeof html !== 'string')\n            html = html.toString();\n\n        // If the browser supports <template> tags, prefer that, as\n        // it obviates all the complex workarounds of jQuery.\n        //\n        // However, jQuery contains a lot of sophisticated code to parse arbitrary HTML fragments,\n        // for example <tr> elements which are not normally allowed to exist on their own.\n        // If you've referenced jQuery (and template tags are not supported) we'll use that rather than duplicating its code.\n        if (jQueryInstance && !supportsTemplateTag) {\n            jQueryInstance(node).html(html);\n        } else {\n            // ... otherwise, use KO's own parsing logic.\n            var parsedNodes = parseHtmlFragment(html, node.ownerDocument);\n\n            if (node.nodeType === 8) {\n                if (html === null) {\n                    virtualElements.emptyNode(node);\n                } else {\n                    virtualElements.setDomNodeChildren(node, parsedNodes);\n                }\n            } else {\n                for (var i = 0; i < parsedNodes.length; i++)\n                    node.appendChild(parsedNodes[i]);\n            }\n        }\n    }\n}\n","//\n// Memoization\n//\nimport { arrayPushAll } from './array.js';\n\nvar memos = {};\n\nfunction randomMax8HexChars() {\n    return (((1 + Math.random()) * 0x100000000) | 0).toString(16).substring(1);\n}\n\nfunction generateRandomId() {\n    return randomMax8HexChars() + randomMax8HexChars();\n}\n\nfunction findMemoNodes(rootNode, appendToArray) {\n    if (!rootNode)\n        return;\n    if (rootNode.nodeType == 8) {\n        var memoId = parseMemoText(rootNode.nodeValue);\n        if (memoId != null)\n            appendToArray.push({ domNode: rootNode, memoId: memoId });\n    } else if (rootNode.nodeType == 1) {\n        for (var i = 0, childNodes = rootNode.childNodes, j = childNodes.length; i < j; i++)\n            findMemoNodes(childNodes[i], appendToArray);\n    }\n}\n\n\nexport function memoize(callback) {\n    if (typeof callback != \"function\")\n        throw new Error(\"You can only pass a function to memoization.memoize()\");\n    var memoId = generateRandomId();\n    memos[memoId] = callback;\n    return \"<!--[ko_memo:\" + memoId + \"]-->\";\n}\n\nexport function unmemoize(memoId, callbackParams) {\n    var callback = memos[memoId];\n    if (callback === undefined)\n        throw new Error(\"Couldn't find any memo with ID \" + memoId + \". Perhaps it's already been unmemoized.\");\n    try {\n        callback.apply(null, callbackParams || []);\n        return true;\n    }\n    finally { delete memos[memoId]; }\n}\n\nexport function unmemoizeDomNodeAndDescendants(domNode, extraCallbackParamsArray) {\n    var memos = [];\n    findMemoNodes(domNode, memos);\n    for (var i = 0, j = memos.length; i < j; i++) {\n        var node = memos[i].domNode;\n        var combinedParams = [node];\n        if (extraCallbackParamsArray)\n            arrayPushAll(combinedParams, extraCallbackParamsArray);\n        unmemoize(memos[i].memoId, combinedParams);\n        node.nodeValue = \"\"; // Neuter this node so we don't try to unmemoize it again\n        if (node.parentNode)\n            node.parentNode.removeChild(node); // If possible, erase it totally (not always possible - someone else might just hold a reference to it then call unmemoizeDomNodeAndDescendants again)\n    }\n}\n\nexport function parseMemoText(memoText) {\n    var match = memoText.match(/^\\[ko_memo\\:(.*?)\\]$/);\n    return match ? match[1] : null;\n}\n","//\n//  Tasks Micro-scheduler\n//  ===\n//\n/* eslint no-cond-assign: 0 */\nimport options from './options';\nimport { deferError } from './error.js';\n\nvar taskQueue = [],\n    taskQueueLength = 0,\n    nextHandle = 1,\n    nextIndexToProcess = 0,\n    w = options.global;\n\nif (w && w.MutationObserver && !(w.navigator && w.navigator.standalone)) {\n    // Chrome 27+, Firefox 14+, IE 11+, Opera 15+, Safari 6.1+, node\n    // From https://github.com/petkaantonov/bluebird * Copyright (c) 2014 Petka Antonov * License: MIT\n    options.taskScheduler = (function (callback) {\n        var div = w.document.createElement(\"div\");\n        new MutationObserver(callback).observe(div, {attributes: true});\n        return function () { div.classList.toggle(\"foo\"); };\n    })(scheduledProcess);\n} else if (w && w.document && \"onreadystatechange\" in w.document.createElement(\"script\")) {\n    // IE 6-10\n    // From https://github.com/YuzuJS/setImmediate * Copyright (c) 2012 Barnesandnoble.com, llc, Donavon West, and Domenic Denicola * License: MIT\n    options.taskScheduler = function (callback) {\n        var script = document.createElement(\"script\");\n        script.onreadystatechange = function () {\n            script.onreadystatechange = null;\n            document.documentElement.removeChild(script);\n            script = null;\n            callback();\n        };\n        document.documentElement.appendChild(script);\n    };\n} else {\n    options.taskScheduler = function (callback) {\n        setTimeout(callback, 0);\n    };\n}\n\nfunction processTasks() {\n    if (taskQueueLength) {\n        // Each mark represents the end of a logical group of tasks and the number of these groups is\n        // limited to prevent unchecked recursion.\n        var mark = taskQueueLength, countMarks = 0;\n\n        // nextIndexToProcess keeps track of where we are in the queue; processTasks can be called recursively without issue\n        for (var task; nextIndexToProcess < taskQueueLength; ) {\n            if (task = taskQueue[nextIndexToProcess++]) {\n                if (nextIndexToProcess > mark) {\n                    if (++countMarks >= 5000) {\n                        nextIndexToProcess = taskQueueLength;   // skip all tasks remaining in the queue since any of them could be causing the recursion\n                        deferError(Error(\"'Too much recursion' after processing \" + countMarks + \" task groups.\"));\n                        break;\n                    }\n                    mark = taskQueueLength;\n                }\n                try {\n                    task();\n                } catch (ex) {\n                    deferError(ex);\n                }\n            }\n        }\n    }\n}\n\nfunction scheduledProcess() {\n    processTasks();\n\n    // Reset the queue\n    nextIndexToProcess = taskQueueLength = taskQueue.length = 0;\n}\n\nfunction scheduleTaskProcessing() {\n    options.taskScheduler(scheduledProcess);\n}\n\n\nexport function schedule(func) {\n    if (!taskQueueLength) {\n        scheduleTaskProcessing();\n    }\n\n    taskQueue[taskQueueLength++] = func;\n    return nextHandle++;\n}\n\nexport function cancel(handle) {\n    var index = handle - (nextHandle - taskQueueLength);\n    if (index >= nextIndexToProcess && index < taskQueueLength) {\n        taskQueue[index] = null;\n    }\n}\n\n// For testing only: reset the queue and return the previous queue length\nexport function resetForTesting() {\n    var length = taskQueueLength - nextIndexToProcess;\n    nextIndexToProcess = taskQueueLength = taskQueue.length = 0;\n    return length;\n}\n\nexport {processTasks as runEarly};\n","//\n//  Defer Updates\n//  ===\n//\nimport { tasks } from 'tko.utils';\n\n\nexport function deferUpdates(target) {\n    if (!target._deferUpdates) {\n        target._deferUpdates = true;\n        target.limit(function (callback) {\n            var handle;\n            return function () {\n                tasks.cancel(handle);\n                handle = tasks.schedule(callback);\n                target.notifySubscribers(undefined, 'dirty');\n            };\n        });\n    }\n}\n","//\n// Observable extenders\n// ---\n//\nimport {\n    options, objectForEach,\n    throttle as throttleFn, debounce as debounceFn\n} from 'tko.utils'\n\nimport { deferUpdates } from './defer.js'\n\nvar primitiveTypes = {\n  'undefined': 1, 'boolean': 1, 'number': 1, 'string': 1\n}\n\nexport function valuesArePrimitiveAndEqual (a, b) {\n  var oldValueIsPrimitive = (a === null) || (typeof (a) in primitiveTypes)\n  return oldValueIsPrimitive ? (a === b) : false\n}\n\nexport function applyExtenders (requestedExtenders) {\n  var target = this\n  if (requestedExtenders) {\n    objectForEach(requestedExtenders, function (key, value) {\n      var extenderHandler = extenders[key]\n      if (typeof extenderHandler === 'function') {\n        target = extenderHandler(target, value) || target\n      } else {\n        options.onError(new Error('Extender not found: ' + key))\n      }\n    })\n  }\n  return target\n}\n\n/*\n                --- DEFAULT EXTENDERS ---\n */\n\n// Change when notifications are published.\nexport function notify (target, notifyWhen) {\n  target.equalityComparer = notifyWhen == 'always' ?\n        null :  // null equalityComparer means to always notify\n        valuesArePrimitiveAndEqual\n}\n\nexport function deferred (target, option) {\n  if (option !== true) {\n    throw new Error('The \\'deferred\\' extender only accepts the value \\'true\\', because it is not supported to turn deferral off once enabled.')\n  }\n  deferUpdates(target)\n}\n\nexport function rateLimit (target, options) {\n  var timeout, method, limitFunction\n\n  if (typeof options === 'number') {\n    timeout = options\n  } else {\n    timeout = options.timeout\n    method = options.method\n  }\n\n    // rateLimit supersedes deferred updates\n  target._deferUpdates = false\n\n  limitFunction = method == 'notifyWhenChangesStop' ? debounceFn : throttleFn\n\n  target.limit(function (callback) {\n    return limitFunction(callback, timeout)\n  })\n}\n\nexport var extenders = {\n  notify: notify,\n  deferred: deferred,\n  rateLimit: rateLimit\n}\n","/* eslint no-cond-assign: 0 */\nimport {\n    setPrototypeOfOrExtend, arrayRemoveItem, objectForEach,\n    canSetPrototype, setPrototypeOf, options\n} from 'tko.utils'\n\nimport { applyExtenders } from './extenders.js'\nimport * as dependencyDetection from './dependencyDetection.js'\n\nexport function subscription (target, callback, disposeCallback) {\n  this._target = target\n  this.callback = callback\n  this.disposeCallback = disposeCallback\n  this.isDisposed = false\n}\n\nsubscription.prototype.dispose = function () {\n  this.isDisposed = true\n  this.disposeCallback()\n}\n\nexport function subscribable () {\n  setPrototypeOfOrExtend(this, ko_subscribable_fn)\n  ko_subscribable_fn.init(this)\n}\n\nexport var defaultEvent = 'change'\n\nvar ko_subscribable_fn = {\n  init (instance) {\n    instance._subscriptions = {}\n    instance._versionNumber = 1\n  },\n\n  subscribe (callback, callbackTarget, event) {\n    var self = this\n\n    event = event || defaultEvent\n    var boundCallback = callbackTarget ? callback.bind(callbackTarget) : callback\n\n    var subscriptionInstance = new subscription(self, boundCallback, function () {\n      arrayRemoveItem(self._subscriptions[event], subscriptionInstance)\n      if (self.afterSubscriptionRemove) {\n        self.afterSubscriptionRemove(event)\n      }\n    })\n\n    if (self.beforeSubscriptionAdd) {\n      self.beforeSubscriptionAdd(event)\n    }\n\n    if (!self._subscriptions[event]) {\n      self._subscriptions[event] = []\n    }\n    self._subscriptions[event].push(subscriptionInstance)\n\n    return subscriptionInstance\n  },\n\n  notifySubscribers (valueToNotify, event) {\n    event = event || defaultEvent\n    if (event === defaultEvent) {\n      this.updateVersion()\n    }\n    if (this.hasSubscriptionsForEvent(event)) {\n      try {\n        dependencyDetection.begin() // Begin suppressing dependency detection (by setting the top frame to undefined)\n        for (var a = this._subscriptions[event].slice(0), i = 0, subscriptionInstance; subscriptionInstance = a[i]; ++i) {\n                    // In case a subscription was disposed during the arrayForEach cycle, check\n                    // for isDisposed on each subscription before invoking its callback\n          if (!subscriptionInstance.isDisposed) {\n            subscriptionInstance.callback(valueToNotify)\n          }\n        }\n      } finally {\n        dependencyDetection.end() // End suppressing dependency detection\n      }\n    }\n  },\n\n  getVersion () {\n    return this._versionNumber\n  },\n\n  hasChanged (versionToCheck) {\n    return this.getVersion() !== versionToCheck\n  },\n\n  updateVersion () {\n    ++this._versionNumber\n  },\n\n  hasSubscriptionsForEvent (event) {\n    return this._subscriptions[event] && this._subscriptions[event].length\n  },\n\n  getSubscriptionsCount (event) {\n    if (event) {\n      return this._subscriptions[event] && this._subscriptions[event].length || 0\n    } else {\n      var total = 0\n      objectForEach(this._subscriptions, function (eventName, subscriptions) {\n        if (eventName !== 'dirty') {\n          total += subscriptions.length\n        }\n      })\n      return total\n    }\n  },\n\n  isDifferent (oldValue, newValue) {\n    return !this.equalityComparer ||\n               !this.equalityComparer(oldValue, newValue)\n  },\n\n  once (cb) {\n    const subs = this.subscribe((nv) => {\n      subs.dispose()\n      cb(nv)\n    })\n  },\n\n  when (test, returnValue) {\n    const current = this.peek()\n    const givenRv = arguments.length > 1\n    const testFn = typeof test === 'function' ? test : v => v === test\n    if (testFn(current)) {\n      return options.Promise.resolve(givenRv ? returnValue : current)\n    }\n    return new options.Promise((resolve, reject) => {\n      const subs = this.subscribe(newValue => {\n        if (testFn(newValue)) {\n          subs.dispose()\n          resolve(givenRv ? returnValue : newValue)\n        }\n      })\n    })\n  },\n\n  yet (test, ...args) {\n    const testFn = typeof test === 'function' ? test : v => v === test\n    const negated = v => !testFn(v)\n    return this.when(negated, ...args)\n  },\n\n  next () { return new Promise(resolve => this.once(resolve)) },\n\n  extend: applyExtenders\n}\n\n// For browsers that support proto assignment, we overwrite the prototype of each\n// observable instance. Since observables are functions, we need Function.prototype\n// to still be in the prototype chain.\nif (canSetPrototype) {\n  setPrototypeOf(ko_subscribable_fn, Function.prototype)\n}\n\nsubscribable.fn = ko_subscribable_fn\n\nexport function isSubscribable (instance) {\n  return instance != null && typeof instance.subscribe === 'function' && typeof instance.notifySubscribers === 'function'\n}\n","//\n// dependencyDetection\n// ---\n//\n// In KO 3.x, dependencyDetection was also known as computedContext.\n//\nimport { isSubscribable } from './subscribable.js'\n\nconst outerFrames = []\nlet currentFrame\nlet lastId = 0\n\n// Return a unique ID that can be assigned to an observable for dependency tracking.\n// Theoretically, you could eventually overflow the number storage size, resulting\n// in duplicate IDs. But in JavaScript, the largest exact integral value is 2^53\n// or 9,007,199,254,740,992. If you created 1,000,000 IDs per second, it would\n// take over 285 years to reach that number.\n// Reference http://blog.vjeux.com/2010/javascript/javascript-max_int-number-limits.html\nfunction getId () {\n  return ++lastId\n}\n\nexport function begin (options) {\n  outerFrames.push(currentFrame)\n  currentFrame = options\n}\n\nexport function end () {\n  currentFrame = outerFrames.pop()\n}\n\nexport function registerDependency (subscribable) {\n  if (currentFrame) {\n    if (!isSubscribable(subscribable)) { throw new Error('Only subscribable things can act as dependencies') }\n    currentFrame.callback.call(currentFrame.callbackTarget, subscribable, subscribable._id || (subscribable._id = getId()))\n  }\n}\n\nexport function ignore (callback, callbackTarget, callbackArgs) {\n  try {\n    begin()\n    return callback.apply(callbackTarget, callbackArgs || [])\n  } finally {\n    end()\n  }\n}\n\nexport function getDependenciesCount () {\n  if (currentFrame) { return currentFrame.computed.getDependenciesCount() }\n}\n\nexport function isInitial () {\n  if (currentFrame) { return currentFrame.isInitial }\n}\n\nexport { ignore as ignoreDependencies }\n","//\n//  Observable values\n//  ---\n//\nimport {\n    createSymbolOrString, canSetPrototype, extend, setPrototypeOfOrExtend,\n    setPrototypeOf, hasPrototype, options\n} from 'tko.utils'\n\nimport * as dependencyDetection from './dependencyDetection.js'\nimport { deferUpdates } from './defer.js'\nimport { subscribable, defaultEvent } from './subscribable.js'\nimport { valuesArePrimitiveAndEqual } from './extenders.js'\n\nvar observableLatestValue = createSymbolOrString('_latestValue')\n\nexport function observable (initialValue) {\n  function Observable () {\n    if (arguments.length > 0) {\n            // Write\n            // Ignore writes if the value hasn't changed\n      if (Observable.isDifferent(Observable[observableLatestValue], arguments[0])) {\n        Observable.valueWillMutate()\n        Observable[observableLatestValue] = arguments[0]\n        Observable.valueHasMutated()\n      }\n      return this // Permits chained assignments\n    } else {\n            // Read\n      dependencyDetection.registerDependency(Observable) // The caller only needs to be notified of changes if they did a \"read\" operation\n      return Observable[observableLatestValue]\n    }\n  }\n\n  Observable[observableLatestValue] = initialValue\n\n    // Inherit from 'subscribable'\n  if (!canSetPrototype) {\n        // 'subscribable' won't be on the prototype chain unless we put it there directly\n    extend(Observable, subscribable.fn)\n  }\n  subscribable.fn.init(Observable)\n\n    // Inherit from 'observable'\n  setPrototypeOfOrExtend(Observable, observable.fn)\n\n  if (options.deferUpdates) {\n    deferUpdates(Observable)\n  }\n\n  return Observable\n}\n\n// Define prototype for observables\nobservable.fn = {\n  equalityComparer: valuesArePrimitiveAndEqual,\n  peek () { return this[observableLatestValue] },\n  valueHasMutated () { this.notifySubscribers(this[observableLatestValue]) },\n  valueWillMutate () {\n    this.notifySubscribers(this[observableLatestValue], 'beforeChange')\n  },\n  then (res, rej) { try { res(this()) } catch (e) { rej(e) } },\n}\n\n// Moved out of \"limit\" to avoid the extra closure\nfunction limitNotifySubscribers (value, event) {\n  if (!event || event === defaultEvent) {\n    this._limitChange(value)\n  } else if (event === 'beforeChange') {\n    this._limitBeforeChange(value)\n  } else {\n    this._origNotifySubscribers(value, event)\n  }\n}\n\n// Add `limit` function to the subscribable prototype\nsubscribable.fn.limit = function limit (limitFunction) {\n  var self = this\n  var selfIsObservable = isObservable(self)\n  var beforeChange = 'beforeChange'\n  var ignoreBeforeChange, previousValue, pendingValue\n\n  if (!self._origNotifySubscribers) {\n    self._origNotifySubscribers = self.notifySubscribers\n    self.notifySubscribers = limitNotifySubscribers\n  }\n\n  var finish = limitFunction(function () {\n    self._notificationIsPending = false\n\n        // If an observable provided a reference to itself, access it to get the latest value.\n        // This allows computed observables to delay calculating their value until needed.\n    if (selfIsObservable && pendingValue === self) {\n      pendingValue = self()\n    }\n    ignoreBeforeChange = false\n    if (self.isDifferent(previousValue, pendingValue)) {\n      self._origNotifySubscribers(previousValue = pendingValue)\n    }\n  })\n\n  self._limitChange = function (value) {\n    self._notificationIsPending = ignoreBeforeChange = true\n    pendingValue = value\n    finish()\n  }\n  self._limitBeforeChange = function (value) {\n    if (!ignoreBeforeChange) {\n      previousValue = value\n      self._origNotifySubscribers(value, beforeChange)\n    }\n  }\n}\n\n// Note that for browsers that don't support proto assignment, the\n// inheritance chain is created manually in the observable constructor\nif (canSetPrototype) {\n  setPrototypeOf(observable.fn, subscribable.fn)\n}\n\nvar protoProperty = observable.protoProperty = options.protoProperty\nobservable.fn[protoProperty] = observable\n\nexport function isObservable (instance) {\n  return hasPrototype(instance, observable)\n}\n\nexport function unwrap (value) {\n  return isObservable(value) ? value() : value\n}\n\nexport function peek (value) {\n  return isObservable(value) ? value.peek() : value\n}\n\nexport function isWriteableObservable (instance) {\n    // Observable\n  if ((typeof instance === 'function') && instance[protoProperty] === observable) {\n    return true\n  }\n    // Writeable dependent observable\n  if ((typeof instance === 'function') /* && (instance[protoProperty] === ko.dependentObservable) */ && (instance.hasWriteFunction)) {\n    return true\n  }\n    // Anything else\n  return false\n}\n\nexport { isWriteableObservable as isWritableObservable }\n","//\n// Observable Array - Change Tracking Extender\n// ---\n//\n/* eslint no-fallthrough: 0*/\n\nimport {\n    extend, compareArrays, findMovesInArrayComparison\n} from 'tko.utils';\n\nimport { defaultEvent } from './subscribable.js';\nimport { extenders } from './extenders.js';\n\n\nexport var arrayChangeEventName = 'arrayChange';\n\n\nexport function trackArrayChanges(target, options) {\n    // Use the provided options--each call to trackArrayChanges overwrites the previously set options\n    target.compareArrayOptions = {};\n    if (options && typeof options == \"object\") {\n        extend(target.compareArrayOptions, options);\n    }\n    target.compareArrayOptions.sparse = true;\n\n    // Only modify the target observable once\n    if (target.cacheDiffForKnownOperation) {\n        return;\n    }\n    var trackingChanges = false,\n        cachedDiff = null,\n        arrayChangeSubscription,\n        pendingNotifications = 0,\n        underlyingBeforeSubscriptionAddFunction = target.beforeSubscriptionAdd,\n        underlyingAfterSubscriptionRemoveFunction = target.afterSubscriptionRemove;\n\n    // Watch \"subscribe\" calls, and for array change events, ensure change tracking is enabled\n    target.beforeSubscriptionAdd = function (event) {\n        if (underlyingBeforeSubscriptionAddFunction)\n            underlyingBeforeSubscriptionAddFunction.call(target, event);\n        if (event === arrayChangeEventName) {\n            trackChanges();\n        }\n    };\n\n    // Watch \"dispose\" calls, and for array change events, ensure change tracking is disabled when all are disposed\n    target.afterSubscriptionRemove = function (event) {\n        if (underlyingAfterSubscriptionRemoveFunction)\n            underlyingAfterSubscriptionRemoveFunction.call(target, event);\n        if (event === arrayChangeEventName && !target.hasSubscriptionsForEvent(arrayChangeEventName)) {\n            if (arrayChangeSubscription) {\n                arrayChangeSubscription.dispose();\n            }\n            arrayChangeSubscription = null;\n            trackingChanges = false;\n        }\n    };\n\n    function trackChanges() {\n        // Calling 'trackChanges' multiple times is the same as calling it once\n        if (trackingChanges) {\n            return;\n        }\n\n        trackingChanges = true;\n\n        // Intercept \"notifySubscribers\" to track how many times it was called.\n        var underlyingNotifySubscribersFunction = target['notifySubscribers'];\n        target['notifySubscribers'] = function(valueToNotify, event) {\n            if (!event || event === defaultEvent) {\n                ++pendingNotifications;\n            }\n            return underlyingNotifySubscribersFunction.apply(this, arguments);\n        };\n\n        // Each time the array changes value, capture a clone so that on the next\n        // change it's possible to produce a diff\n        var previousContents = [].concat(target.peek() || []);\n        cachedDiff = null;\n        arrayChangeSubscription = target.subscribe(function(currentContents) {\n            // Make a copy of the current contents and ensure it's an array\n            currentContents = [].concat(currentContents || []);\n\n            // Compute the diff and issue notifications, but only if someone is listening\n            if (target.hasSubscriptionsForEvent(arrayChangeEventName)) {\n                var changes = getChanges(previousContents, currentContents);\n            }\n\n            // Eliminate references to the old, removed items, so they can be GCed\n            previousContents = currentContents;\n            cachedDiff = null;\n            pendingNotifications = 0;\n\n            if (changes && changes.length) {\n                target['notifySubscribers'](changes, arrayChangeEventName);\n            }\n        });\n    }\n\n    function getChanges(previousContents, currentContents) {\n        // We try to re-use cached diffs.\n        // The scenarios where pendingNotifications > 1 are when using rate-limiting or the Deferred Updates\n        // plugin, which without this check would not be compatible with arrayChange notifications. Normally,\n        // notifications are issued immediately so we wouldn't be queueing up more than one.\n        if (!cachedDiff || pendingNotifications > 1) {\n            cachedDiff = trackArrayChanges.compareArrays(previousContents, currentContents, target.compareArrayOptions);\n        }\n\n        return cachedDiff;\n    }\n\n    target.cacheDiffForKnownOperation = function(rawArray, operationName, args) {\n        var index, argsIndex;\n        // Only run if we're currently tracking changes for this observable array\n        // and there aren't any pending deferred notifications.\n        if (!trackingChanges || pendingNotifications) {\n            return;\n        }\n        var diff = [],\n            arrayLength = rawArray.length,\n            argsLength = args.length,\n            offset = 0;\n\n        function pushDiff(status, value, index) {\n            return diff[diff.length] = { 'status': status, 'value': value, 'index': index };\n        }\n        switch (operationName) {\n        case 'push':\n            offset = arrayLength;\n        case 'unshift':\n            for (index = 0; index < argsLength; index++) {\n                pushDiff('added', args[index], offset + index);\n            }\n            break;\n\n        case 'pop':\n            offset = arrayLength - 1;\n        case 'shift':\n            if (arrayLength) {\n                pushDiff('deleted', rawArray[offset], offset);\n            }\n            break;\n\n        case 'splice':\n            // Negative start index means 'from end of array'. After that we clamp to [0...arrayLength].\n            // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice\n            var startIndex = Math.min(Math.max(0, args[0] < 0 ? arrayLength + args[0] : args[0]), arrayLength),\n                endDeleteIndex = argsLength === 1 ? arrayLength : Math.min(startIndex + (args[1] || 0), arrayLength),\n                endAddIndex = startIndex + argsLength - 2,\n                endIndex = Math.max(endDeleteIndex, endAddIndex),\n                additions = [], deletions = [];\n            for (index = startIndex, argsIndex = 2; index < endIndex; ++index, ++argsIndex) {\n                if (index < endDeleteIndex)\n                    deletions.push(pushDiff('deleted', rawArray[index], index));\n                if (index < endAddIndex)\n                    additions.push(pushDiff('added', args[argsIndex], index));\n            }\n            findMovesInArrayComparison(deletions, additions);\n            break;\n\n        default:\n            return;\n        }\n        cachedDiff = diff;\n    };\n}\n\n\n// Expose compareArrays for testing.\ntrackArrayChanges.compareArrays = compareArrays;\n\n\n// Add the trackArrayChanges extender so we can use\n// obs.extend({ trackArrayChanges: true })\nextenders.trackArrayChanges = trackArrayChanges;","//\n// Observable Arrays\n// ===\n//\nimport {\n    setPrototypeOfOrExtend, arrayIndexOf, canSetPrototype, setPrototypeOf,\n    arrayForEach\n} from 'tko.utils'\n\nimport { observable, isObservable } from './observable.js'\n\nimport { trackArrayChanges } from './observableArray.changeTracking.js'\n\nexport function observableArray (initialValues) {\n  initialValues = initialValues || []\n\n  if (typeof initialValues !== 'object' || !('length' in initialValues)) { throw new Error('The argument passed when initializing an observable array must be an array, or null, or undefined.') }\n\n  var result = observable(initialValues)\n  setPrototypeOfOrExtend(result, observableArray.fn)\n  trackArrayChanges(result)\n        // ^== result.extend({ trackArrayChanges: true })\n  return result\n}\n\nobservableArray.fn = {\n  remove: function (valueOrPredicate) {\n    var underlyingArray = this.peek()\n    var removedValues = []\n    var predicate = typeof valueOrPredicate === 'function' && !isObservable(valueOrPredicate) ? valueOrPredicate : function (value) { return value === valueOrPredicate }\n    for (var i = 0; i < underlyingArray.length; i++) {\n      var value = underlyingArray[i]\n      if (predicate(value)) {\n        if (removedValues.length === 0) {\n          this.valueWillMutate()\n        }\n        removedValues.push(value)\n        underlyingArray.splice(i, 1)\n        i--\n      }\n    }\n    if (removedValues.length) {\n      this.valueHasMutated()\n    }\n    return removedValues\n  },\n\n  removeAll: function (arrayOfValues) {\n        // If you passed zero args, we remove everything\n    if (arrayOfValues === undefined) {\n      var underlyingArray = this.peek()\n      var allValues = underlyingArray.slice(0)\n      this.valueWillMutate()\n      underlyingArray.splice(0, underlyingArray.length)\n      this.valueHasMutated()\n      return allValues\n    }\n        // If you passed an arg, we interpret it as an array of entries to remove\n    if (!arrayOfValues) {\n      return []\n    }\n    return this['remove'](function (value) {\n      return arrayIndexOf(arrayOfValues, value) >= 0\n    })\n  },\n\n  destroy: function (valueOrPredicate) {\n    var underlyingArray = this.peek()\n    var predicate = typeof valueOrPredicate === 'function' && !isObservable(valueOrPredicate) ? valueOrPredicate : function (value) { return value === valueOrPredicate }\n    this.valueWillMutate()\n    for (var i = underlyingArray.length - 1; i >= 0; i--) {\n      var value = underlyingArray[i]\n      if (predicate(value)) {\n        underlyingArray[i]['_destroy'] = true\n      }\n    }\n    this.valueHasMutated()\n  },\n\n  destroyAll: function (arrayOfValues) {\n        // If you passed zero args, we destroy everything\n    if (arrayOfValues === undefined) { return this.destroy(function () { return true }) }\n\n        // If you passed an arg, we interpret it as an array of entries to destroy\n    if (!arrayOfValues) {\n      return []\n    }\n    return this.destroy(function (value) {\n      return arrayIndexOf(arrayOfValues, value) >= 0\n    })\n  },\n\n  indexOf: function (item) {\n    var underlyingArray = this()\n    return arrayIndexOf(underlyingArray, item)\n  },\n\n  replace: function (oldItem, newItem) {\n    var index = this.indexOf(oldItem)\n    if (index >= 0) {\n      this.valueWillMutate()\n      this.peek()[index] = newItem\n      this.valueHasMutated()\n    }\n  }\n}\n\n// Note that for browsers that don't support proto assignment, the\n// inheritance chain is created manually in the ko.observableArray constructor\nif (canSetPrototype) {\n  setPrototypeOf(observableArray.fn, observable.fn)\n}\n\n// Populate ko.observableArray.fn with read/write functions from native arrays\n// Important: Do not add any additional functions here that may reasonably be used to *read* data from the array\n// because we'll eval them without causing subscriptions, so ko.computed output could end up getting stale\narrayForEach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function (methodName) {\n  observableArray.fn[methodName] = function () {\n        // Use \"peek\" to avoid creating a subscription in any computed that we're executing in the context of\n        // (for consistency with mutating regular observables)\n    var underlyingArray = this.peek()\n    this.valueWillMutate()\n    this.cacheDiffForKnownOperation(underlyingArray, methodName, arguments)\n    var methodCallResult = underlyingArray[methodName].apply(underlyingArray, arguments)\n    this.valueHasMutated()\n        // The native sort and reverse methods return a reference to the array, but it makes more sense to return the observable array instead.\n    return methodCallResult === underlyingArray ? this : methodCallResult\n  }\n})\n\n// Populate ko.observableArray.fn with read-only functions from native arrays\narrayForEach(['slice'], function (methodName) {\n  observableArray.fn[methodName] = function () {\n    var underlyingArray = this()\n    return underlyingArray[methodName].apply(underlyingArray, arguments)\n  }\n})\n","//\n// Helpers\n// ---\n// toJS & toJSON\n//\nimport {\n    stringifyJson, arrayIndexOf\n} from 'tko.utils';\n\nimport { isObservable } from './observable.js';\n\n\nvar maxNestedObservableDepth = 10; // Escape the (unlikely) pathalogical case where an observable's current value is itself (or similar reference cycle)\n\nexport function toJS(rootObject) {\n    if (arguments.length == 0)\n        throw new Error(\"When calling ko.toJS, pass the object you want to convert.\");\n\n    // We just unwrap everything at every level in the object graph\n    return mapJsObjectGraph(rootObject, function(valueToMap) {\n        // Loop because an observable's value might in turn be another observable wrapper\n        for (var i = 0; isObservable(valueToMap) && (i < maxNestedObservableDepth); i++)\n            valueToMap = valueToMap();\n        return valueToMap;\n    });\n}\n\nexport function toJSON(rootObject, replacer, space) {     // replacer and space are optional\n    var plainJavaScriptObject = toJS(rootObject);\n    return stringifyJson(plainJavaScriptObject, replacer, space);\n}\n\nfunction mapJsObjectGraph(rootObject, mapInputCallback, visitedObjects) {\n    visitedObjects = visitedObjects || new objectLookup();\n\n    rootObject = mapInputCallback(rootObject);\n    var canHaveProperties = (typeof rootObject == \"object\") && (rootObject !== null) && (rootObject !== undefined) && (!(rootObject instanceof RegExp)) && (!(rootObject instanceof Date)) && (!(rootObject instanceof String)) && (!(rootObject instanceof Number)) && (!(rootObject instanceof Boolean));\n    if (!canHaveProperties)\n        return rootObject;\n\n    var outputProperties = rootObject instanceof Array ? [] : {};\n    visitedObjects.save(rootObject, outputProperties);\n\n    visitPropertiesOrArrayEntries(rootObject, function(indexer) {\n        var propertyValue = mapInputCallback(rootObject[indexer]);\n\n        switch (typeof propertyValue) {\n        case \"boolean\":\n        case \"number\":\n        case \"string\":\n        case \"function\":\n            outputProperties[indexer] = propertyValue;\n            break;\n        case \"object\":\n        case \"undefined\":\n            var previouslyMappedValue = visitedObjects.get(propertyValue);\n            outputProperties[indexer] = (previouslyMappedValue !== undefined)\n                ? previouslyMappedValue\n                : mapJsObjectGraph(propertyValue, mapInputCallback, visitedObjects);\n            break;\n        }\n    });\n\n    return outputProperties;\n}\n\nfunction visitPropertiesOrArrayEntries(rootObject, visitorCallback) {\n    if (rootObject instanceof Array) {\n        for (var i = 0; i < rootObject.length; i++)\n            visitorCallback(i);\n\n        // For arrays, also respect toJSON property for custom mappings (fixes #278)\n        if (typeof rootObject['toJSON'] == 'function')\n            visitorCallback('toJSON');\n    } else {\n        for (var propertyName in rootObject) {\n            visitorCallback(propertyName);\n        }\n    }\n}\n\nfunction objectLookup() {\n    this.keys = [];\n    this.values = [];\n}\n\nobjectLookup.prototype = {\n    constructor: objectLookup,\n    save: function(key, value) {\n        var existingIndex = arrayIndexOf(this.keys, key);\n        if (existingIndex >= 0)\n            this.values[existingIndex] = value;\n        else {\n            this.keys.push(key);\n            this.values.push(value);\n        }\n    },\n    get: function(key) {\n        var existingIndex = arrayIndexOf(this.keys, key);\n        return (existingIndex >= 0) ? this.values[existingIndex] : undefined;\n    }\n};\n","//\n// Computed Observable Values\n//\n// (before tko, `computed` was also known as `dependentObservable`)\n//\nimport {\n    addDisposeCallback,\n    arrayForEach,\n    canSetPrototype,\n    createSymbolOrString,\n    domNodeIsAttachedToDocument,\n    extend,\n    objectForEach,\n    options as koOptions,\n    removeDisposeCallback,\n    safeSetTimeout,\n    setPrototypeOf,\n    hasPrototype,\n    setPrototypeOfOrExtend\n} from 'tko.utils'\n\nimport {\n    dependencyDetection,\n    extenders,\n    valuesArePrimitiveAndEqual,\n    observable,\n    subscribable\n} from 'tko.observable'\n\nvar computedState = createSymbolOrString('_state')\n\nexport function computed (evaluatorFunctionOrOptions, evaluatorFunctionTarget, options) {\n  if (typeof evaluatorFunctionOrOptions === 'object') {\n        // Single-parameter syntax - everything is on this \"options\" param\n    options = evaluatorFunctionOrOptions\n  } else {\n        // Multi-parameter syntax - construct the options according to the params passed\n    options = options || {}\n    if (evaluatorFunctionOrOptions) {\n      options.read = evaluatorFunctionOrOptions\n    }\n  }\n  if (typeof options.read !== 'function') {\n    throw Error('Pass a function that returns the value of the computed')\n  }\n\n  var writeFunction = options.write\n  var state = {\n    latestValue: undefined,\n    isStale: true,\n    isBeingEvaluated: false,\n    suppressDisposalUntilDisposeWhenReturnsFalse: false,\n    isDisposed: false,\n    pure: false,\n    isSleeping: false,\n    readFunction: options.read,\n    evaluatorFunctionTarget: evaluatorFunctionTarget || options.owner,\n    disposeWhenNodeIsRemoved: options.disposeWhenNodeIsRemoved || options.disposeWhenNodeIsRemoved || null,\n    disposeWhen: options.disposeWhen || options.disposeWhen,\n    domNodeDisposalCallback: null,\n    dependencyTracking: {},\n    dependenciesCount: 0,\n    evaluationTimeoutInstance: null\n  }\n\n  function computedObservable () {\n    if (arguments.length > 0) {\n      if (typeof writeFunction === 'function') {\n                // Writing a value\n        writeFunction.apply(state.evaluatorFunctionTarget, arguments)\n      } else {\n        throw new Error(\"Cannot write a value to a computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.\")\n      }\n      return this // Permits chained assignments\n    } else {\n            // Reading the value\n      dependencyDetection.registerDependency(computedObservable)\n      if (state.isStale || (state.isSleeping && computedObservable.haveDependenciesChanged())) {\n        computedObservable.evaluateImmediate()\n      }\n      return state.latestValue\n    }\n  }\n\n  computedObservable[computedState] = state\n  computedObservable.hasWriteFunction = typeof writeFunction === 'function'\n\n    // Inherit from 'subscribable'\n  if (!canSetPrototype) {\n        // 'subscribable' won't be on the prototype chain unless we put it there directly\n    extend(computedObservable, subscribable.fn)\n  }\n  subscribable.fn.init(computedObservable)\n\n    // Inherit from 'computed'\n  setPrototypeOfOrExtend(computedObservable, computed.fn)\n\n  if (options.pure) {\n    state.pure = true\n    state.isSleeping = true     // Starts off sleeping; will awake on the first subscription\n    extend(computedObservable, pureComputedOverrides)\n  } else if (options.deferEvaluation) {\n    extend(computedObservable, deferEvaluationOverrides)\n  }\n\n  if (koOptions.deferUpdates) {\n    extenders.deferred(computedObservable, true)\n  }\n\n  if (koOptions.debug) {\n        // #1731 - Aid debugging by exposing the computed's options\n    computedObservable._options = options\n  }\n\n  if (state.disposeWhenNodeIsRemoved) {\n        // Since this computed is associated with a DOM node, and we don't want to dispose the computed\n        // until the DOM node is *removed* from the document (as opposed to never having been in the document),\n        // we'll prevent disposal until \"disposeWhen\" first returns false.\n    state.suppressDisposalUntilDisposeWhenReturnsFalse = true\n\n        // disposeWhenNodeIsRemoved: true can be used to opt into the \"only dispose after first false result\"\n        // behaviour even if there's no specific node to watch. In that case, clear the option so we don't try\n        // to watch for a non-node's disposal. This technique is intended for KO's internal use only and shouldn't\n        // be documented or used by application code, as it's likely to change in a future version of KO.\n    if (!state.disposeWhenNodeIsRemoved.nodeType) {\n      state.disposeWhenNodeIsRemoved = null\n    }\n  }\n\n    // Evaluate, unless sleeping or deferEvaluation is true\n  if (!state.isSleeping && !options.deferEvaluation) {\n    computedObservable.evaluateImmediate()\n  }\n\n    // Attach a DOM node disposal callback so that the computed will be proactively disposed as soon as the node is\n    // removed using ko.removeNode. But skip if isActive is false (there will never be any dependencies to dispose).\n  if (state.disposeWhenNodeIsRemoved && computedObservable.isActive()) {\n    addDisposeCallback(state.disposeWhenNodeIsRemoved, state.domNodeDisposalCallback = function () {\n      computedObservable.dispose()\n    })\n  }\n\n  return computedObservable\n}\n\n// Utility function that disposes a given dependencyTracking entry\nfunction computedDisposeDependencyCallback (id, entryToDispose) {\n  if (entryToDispose !== null && entryToDispose.dispose) {\n    entryToDispose.dispose()\n  }\n}\n\n// This function gets called each time a dependency is detected while evaluating a computed.\n// It's factored out as a shared function to avoid creating unnecessary function instances during evaluation.\nfunction computedBeginDependencyDetectionCallback (subscribable, id) {\n  var computedObservable = this.computedObservable,\n    state = computedObservable[computedState]\n  if (!state.isDisposed) {\n    if (this.disposalCount && this.disposalCandidates[id]) {\n            // Don't want to dispose this subscription, as it's still being used\n      computedObservable.addDependencyTracking(id, subscribable, this.disposalCandidates[id])\n      this.disposalCandidates[id] = null // No need to actually delete the property - disposalCandidates is a transient object anyway\n      --this.disposalCount\n    } else if (!state.dependencyTracking[id]) {\n            // Brand new subscription - add it\n      computedObservable.addDependencyTracking(id, subscribable, state.isSleeping ? { _target: subscribable } : computedObservable.subscribeToDependency(subscribable))\n    }\n  }\n}\n\ncomputed.fn = {\n  equalityComparer: valuesArePrimitiveAndEqual,\n  getDependenciesCount: function () {\n    return this[computedState].dependenciesCount\n  },\n  addDependencyTracking: function (id, target, trackingObj) {\n    if (this[computedState].pure && target === this) {\n      throw Error(\"A 'pure' computed must not be called recursively\")\n    }\n\n    this[computedState].dependencyTracking[id] = trackingObj\n    trackingObj._order = this[computedState].dependenciesCount++\n    trackingObj._version = target.getVersion()\n  },\n  haveDependenciesChanged: function () {\n    var id, dependency, dependencyTracking = this[computedState].dependencyTracking\n    for (id in dependencyTracking) {\n      if (dependencyTracking.hasOwnProperty(id)) {\n        dependency = dependencyTracking[id]\n        if (dependency._target.hasChanged(dependency._version)) {\n          return true\n        }\n      }\n    }\n  },\n  markDirty: function () {\n        // Process \"dirty\" events if we can handle delayed notifications\n    if (this._evalDelayed && !this[computedState].isBeingEvaluated) {\n      this._evalDelayed()\n    }\n  },\n  isActive: function () {\n    return this[computedState].isStale || this[computedState].dependenciesCount > 0\n  },\n  respondToChange: function () {\n        // Ignore \"change\" events if we've already scheduled a delayed notification\n    if (!this._notificationIsPending) {\n      this.evaluatePossiblyAsync()\n    }\n  },\n  subscribeToDependency: function (target) {\n    if (target._deferUpdates && !this[computedState].disposeWhenNodeIsRemoved) {\n      var dirtySub = target.subscribe(this.markDirty, this, 'dirty'),\n        changeSub = target.subscribe(this.respondToChange, this)\n      return {\n        _target: target,\n        dispose: function () {\n          dirtySub.dispose()\n          changeSub.dispose()\n        }\n      }\n    } else {\n      return target.subscribe(this.evaluatePossiblyAsync, this)\n    }\n  },\n  evaluatePossiblyAsync: function () {\n    var computedObservable = this,\n      throttleEvaluationTimeout = computedObservable.throttleEvaluation\n    if (throttleEvaluationTimeout && throttleEvaluationTimeout >= 0) {\n      clearTimeout(this[computedState].evaluationTimeoutInstance)\n      this[computedState].evaluationTimeoutInstance = safeSetTimeout(function () {\n        computedObservable.evaluateImmediate(true /* notifyChange */)\n      }, throttleEvaluationTimeout)\n    } else if (computedObservable._evalDelayed) {\n      computedObservable._evalDelayed()\n    } else {\n      computedObservable.evaluateImmediate(true /* notifyChange */)\n    }\n  },\n  evaluateImmediate: function (notifyChange) {\n    var computedObservable = this,\n      state = computedObservable[computedState],\n      disposeWhen = state.disposeWhen\n\n    if (state.isBeingEvaluated) {\n            // If the evaluation of a ko.computed causes side effects, it's possible that it will trigger its own re-evaluation.\n            // This is not desirable (it's hard for a developer to realise a chain of dependencies might cause this, and they almost\n            // certainly didn't intend infinite re-evaluations). So, for predictability, we simply prevent ko.computeds from causing\n            // their own re-evaluation. Further discussion at https://github.com/SteveSanderson/knockout/pull/387\n      return\n    }\n\n        // Do not evaluate (and possibly capture new dependencies) if disposed\n    if (state.isDisposed) {\n      return\n    }\n\n    if (state.disposeWhenNodeIsRemoved && !domNodeIsAttachedToDocument(state.disposeWhenNodeIsRemoved) || disposeWhen && disposeWhen()) {\n            // See comment above about suppressDisposalUntilDisposeWhenReturnsFalse\n      if (!state.suppressDisposalUntilDisposeWhenReturnsFalse) {\n        computedObservable.dispose()\n        return\n      }\n    } else {\n            // It just did return false, so we can stop suppressing now\n      state.suppressDisposalUntilDisposeWhenReturnsFalse = false\n    }\n\n    state.isBeingEvaluated = true\n    try {\n      this.evaluateImmediate_CallReadWithDependencyDetection(notifyChange)\n    } finally {\n      state.isBeingEvaluated = false\n    }\n\n    if (!state.dependenciesCount) {\n      computedObservable.dispose()\n    }\n  },\n  evaluateImmediate_CallReadWithDependencyDetection: function (notifyChange) {\n        // This function is really just part of the evaluateImmediate logic. You would never call it from anywhere else.\n        // Factoring it out into a separate function means it can be independent of the try/catch block in evaluateImmediate,\n        // which contributes to saving about 40% off the CPU overhead of computed evaluation (on V8 at least).\n\n    var computedObservable = this,\n      state = computedObservable[computedState]\n\n        // Initially, we assume that none of the subscriptions are still being used (i.e., all are candidates for disposal).\n        // Then, during evaluation, we cross off any that are in fact still being used.\n    var isInitial = state.pure ? undefined : !state.dependenciesCount,   // If we're evaluating when there are no previous dependencies, it must be the first time\n      dependencyDetectionContext = {\n        computedObservable: computedObservable,\n        disposalCandidates: state.dependencyTracking,\n        disposalCount: state.dependenciesCount\n      }\n\n    dependencyDetection.begin({\n      callbackTarget: dependencyDetectionContext,\n      callback: computedBeginDependencyDetectionCallback,\n      computed: computedObservable,\n      isInitial: isInitial\n    })\n\n    state.dependencyTracking = {}\n    state.dependenciesCount = 0\n\n    var newValue = this.evaluateImmediate_CallReadThenEndDependencyDetection(state, dependencyDetectionContext)\n\n    if (computedObservable.isDifferent(state.latestValue, newValue)) {\n      if (!state.isSleeping) {\n        computedObservable.notifySubscribers(state.latestValue, 'beforeChange')\n      }\n\n      state.latestValue = newValue\n\n      if (state.isSleeping) {\n        computedObservable.updateVersion()\n      } else if (notifyChange) {\n        computedObservable.notifySubscribers(state.latestValue)\n      }\n    }\n\n    if (isInitial) {\n      computedObservable.notifySubscribers(state.latestValue, 'awake')\n    }\n  },\n  evaluateImmediate_CallReadThenEndDependencyDetection: function (state, dependencyDetectionContext) {\n        // This function is really part of the evaluateImmediate_CallReadWithDependencyDetection logic.\n        // You'd never call it from anywhere else. Factoring it out means that evaluateImmediate_CallReadWithDependencyDetection\n        // can be independent of try/finally blocks, which contributes to saving about 40% off the CPU\n        // overhead of computed evaluation (on V8 at least).\n\n    try {\n      var readFunction = state.readFunction\n      return state.evaluatorFunctionTarget ? readFunction.call(state.evaluatorFunctionTarget) : readFunction()\n    } finally {\n      dependencyDetection.end()\n\n            // For each subscription no longer being used, remove it from the active subscriptions list and dispose it\n      if (dependencyDetectionContext.disposalCount && !state.isSleeping) {\n        objectForEach(dependencyDetectionContext.disposalCandidates, computedDisposeDependencyCallback)\n      }\n\n      state.isStale = false\n    }\n  },\n  peek: function () {\n        // Peek won't re-evaluate, except while the computed is sleeping or to get the initial value when \"deferEvaluation\" is set.\n    var state = this[computedState]\n    if ((state.isStale && !state.dependenciesCount) || (state.isSleeping && this.haveDependenciesChanged())) {\n      this.evaluateImmediate()\n    }\n    return state.latestValue\n  },\n  limit: function (limitFunction) {\n        // Override the limit function with one that delays evaluation as well\n    subscribable.fn.limit.call(this, limitFunction)\n    this._evalDelayed = function () {\n      this._limitBeforeChange(this[computedState].latestValue)\n\n      this[computedState].isStale = true // Mark as dirty\n\n            // Pass the observable to the \"limit\" code, which will access it when\n            // it's time to do the notification.\n      this._limitChange(this)\n    }\n  },\n  dispose: function () {\n    var state = this[computedState]\n    if (!state.isSleeping && state.dependencyTracking) {\n      objectForEach(state.dependencyTracking, function (id, dependency) {\n        if (dependency.dispose) {\n          dependency.dispose()\n        }\n      })\n    }\n    if (state.disposeWhenNodeIsRemoved && state.domNodeDisposalCallback) {\n      removeDisposeCallback(state.disposeWhenNodeIsRemoved, state.domNodeDisposalCallback)\n    }\n    state.dependencyTracking = null\n    state.dependenciesCount = 0\n    state.isDisposed = true\n    state.isStale = false\n    state.isSleeping = false\n    state.disposeWhenNodeIsRemoved = null\n    state.readFunction = null\n    if (koOptions.debug) {\n      this._options = null\n    }\n  }\n}\n\nvar pureComputedOverrides = {\n  beforeSubscriptionAdd: function (event) {\n        // If asleep, wake up the computed by subscribing to any dependencies.\n    var computedObservable = this,\n      state = computedObservable[computedState]\n    if (!state.isDisposed && state.isSleeping && event == 'change') {\n      state.isSleeping = false\n      if (state.isStale || computedObservable.haveDependenciesChanged()) {\n        state.dependencyTracking = null\n        state.dependenciesCount = 0\n        state.isStale = true\n        computedObservable.evaluateImmediate()\n      } else {\n                // First put the dependencies in order\n        var dependeciesOrder = []\n        objectForEach(state.dependencyTracking, function (id, dependency) {\n          dependeciesOrder[dependency._order] = id\n        })\n                // Next, subscribe to each one\n        arrayForEach(dependeciesOrder, function (id, order) {\n          var dependency = state.dependencyTracking[id],\n            subscription = computedObservable.subscribeToDependency(dependency._target)\n          subscription._order = order\n          subscription._version = dependency._version\n          state.dependencyTracking[id] = subscription\n        })\n      }\n      if (!state.isDisposed) {     // test since evaluating could trigger disposal\n        computedObservable.notifySubscribers(state.latestValue, 'awake')\n      }\n    }\n  },\n  afterSubscriptionRemove: function (event) {\n    var state = this[computedState]\n    if (!state.isDisposed && event == 'change' && !this.hasSubscriptionsForEvent('change')) {\n      objectForEach(state.dependencyTracking, function (id, dependency) {\n        if (dependency.dispose) {\n          state.dependencyTracking[id] = {\n            _target: dependency._target,\n            _order: dependency._order,\n            _version: dependency._version\n          }\n          dependency.dispose()\n        }\n      })\n      state.isSleeping = true\n      this.notifySubscribers(undefined, 'asleep')\n    }\n  },\n  getVersion: function () {\n        // Because a pure computed is not automatically updated while it is sleeping, we can't\n        // simply return the version number. Instead, we check if any of the dependencies have\n        // changed and conditionally re-evaluate the computed observable.\n    var state = this[computedState]\n    if (state.isSleeping && (state.isStale || this.haveDependenciesChanged())) {\n      this.evaluateImmediate()\n    }\n    return subscribable.fn.getVersion.call(this)\n  }\n}\n\nvar deferEvaluationOverrides = {\n  beforeSubscriptionAdd: function (event) {\n        // This will force a computed with deferEvaluation to evaluate when the first subscription is registered.\n    if (event == 'change' || event == 'beforeChange') {\n      this.peek()\n    }\n  }\n}\n\n// Note that for browsers that don't support proto assignment, the\n// inheritance chain is created manually in the ko.computed constructor\nif (canSetPrototype) {\n  setPrototypeOf(computed.fn, subscribable.fn)\n}\n\n// Set the proto chain values for ko.hasPrototype\nvar protoProp = observable.protoProperty // == \"__ko_proto__\"\ncomputed[protoProp] = observable\ncomputed.fn[protoProp] = computed\n\nexport function isComputed (instance) {\n  return hasPrototype(instance, computed)\n}\n\nexport function isPureComputed (instance) {\n  return hasPrototype(instance, computed)\n        && instance[computedState] && instance[computedState].pure\n}\n\nexport function pureComputed (evaluatorFunctionOrOptions, evaluatorFunctionTarget) {\n  if (typeof evaluatorFunctionOrOptions === 'function') {\n    return computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget, {'pure': true})\n  } else {\n    evaluatorFunctionOrOptions = extend({}, evaluatorFunctionOrOptions)   // make a copy of the parameter object\n    evaluatorFunctionOrOptions.pure = true\n    return computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget)\n  }\n}\n","import {\n  unwrap\n} from 'tko.observable'\n\nexport function LAMBDA () {}\n\n/**\n * @ operator - recursively call the identifier if it's a function\n * @param  {operand} a ignored\n * @param  {operand} b The variable to be called (if a function) and unwrapped\n * @return {value}   The result.\n */\nfunction unwrapOrCall (a, b) {\n  while (typeof b === 'function') { b = b() }\n  return b\n}\n\nconst operators = {\n  // unary\n  '@': unwrapOrCall,\n  '#': (a, b) => () => unwrap(b), // Convert to read-only.\n  '=>': LAMBDA,\n  '!': function not (a, b) { return !b },\n  '!!': function notnot (a, b) { return !!b },\n  '++': function preinc (a, b) { return ++b },\n  '--': function preinc (a, b) { return --b },\n  // mul/div\n  '*': function mul (a, b) { return a * b },\n  '/': function div (a, b) { return a / b },\n  '%': function mod (a, b) { return a % b },\n  // sub/add\n  '+': function add (a, b) { return a + b },\n  '-': function sub (a, b) { return (a || 0) - (b || 0) },\n  '&-': function neg (a, b) { return -1 * b },\n  // relational\n  '<': function lt (a, b) { return a < b },\n  '<=': function le (a, b) { return a <= b },\n  '>': function gt (a, b) { return a > b },\n  '>=': function ge (a, b) { return a >= b },\n  //    TODO: 'in': function (a, b) { return a in b; },\n  //    TODO: 'instanceof': function (a, b) { return a instanceof b; },\n  // equality\n  '==': function equal (a, b) { return a === b },\n  '!=': function ne (a, b) { return a !== b },\n  '===': function sequal (a, b) { return a === b },\n  '!==': function sne (a, b) { return a !== b },\n  // bitwise\n  '&': function bitAnd (a, b) { return a & b },\n  '^': function xor (a, b) { return a ^ b },\n  '|': function bitOr (a, b) { return a | b },\n  // logic\n  '&&': function logicAnd (a, b) { return a && b },\n  '||': function logicOr (a, b) { return a || b },\n  // Access\n  '.': function member (a, b) { return a[b] },\n  '[': function member (a, b) { return a[b] },\n  // conditional/ternary\n  // '?': ternary See Node.js\n  // Function-Call\n  'call': function callOp (a, b) { return a.apply(null, b) }\n}\n\n/* Order of precedence from:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table\n*/\n\n  // Our operator - unwrap/call\noperators['@'].precedence = 21\noperators['#'].precedence = 21\n\n  // lambda\noperators['=>'].precedence = 20\n\n  // Member\noperators['.'].precedence = 19\noperators['['].precedence = 19\n\n  // Logical not\noperators['!'].precedence = 16\noperators['!!'].precedence = 16 // explicit double-negative\n\n  // Prefix inc/dec\noperators['++'].precedence = 16\noperators['--'].precedence = 16\noperators['&-'].precedence = 16\n\n  // mul/div/remainder\noperators['%'].precedence = 14\noperators['*'].precedence = 14\noperators['/'].precedence = 14\n\n  // add/sub\noperators['+'].precedence = 13\noperators['-'].precedence = 13\n\n  // bitwise\noperators['|'].precedence = 12\noperators['^'].precedence = 11\noperators['&'].precedence = 10\n\n  // comparison\noperators['<'].precedence = 11\noperators['<='].precedence = 11\noperators['>'].precedence = 11\noperators['>='].precedence = 11\n\n  // operators['in'].precedence = 8;\n  // operators['instanceof'].precedence = 8;\n  // equality\noperators['=='].precedence = 10\noperators['!='].precedence = 10\noperators['==='].precedence = 10\noperators['!=='].precedence = 10\n\n  // logic\noperators['&&'].precedence = 6\noperators['||'].precedence = 5\n\noperators['&&'].earlyOut = (a) => !a\noperators['||'].earlyOut = (a) => a\n\n  // Call a function\noperators['call'].precedence = 1\n\nexport { operators as default }\n","import {\n  stringTrim\n} from 'tko.utils';\n\n/* eslint no-cond-assign: 0 */\n\n// The following regular expressions will be used to split an object-literal string into tokens\n\n// These two match strings, either with double quotes or single quotes\nvar stringDouble = '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"',\n  stringSingle = \"'(?:[^'\\\\\\\\]|\\\\\\\\.)*'\",\n  // Matches a regular expression (text enclosed by slashes), but will also match sets of divisions\n  // as a regular expression (this is handled by the parsing loop below).\n  stringRegexp = '/(?:[^/\\\\\\\\]|\\\\\\\\.)*/\\w*',\n  // These characters have special meaning to the parser and must not appear in the middle of a\n  // token, except as part of a string.\n  specials = ',\"\\'{}()/:[\\\\]',\n  // Match text (at least two characters) that does not contain any of the above special characters,\n  // although some of the special characters are allowed to start it (all but the colon and comma).\n  // The text can contain spaces, but leading or trailing spaces are skipped.\n  everyThingElse = '[^\\\\s:,/][^' + specials + ']*[^\\\\s' + specials + ']',\n  // Match any non-space character not matched already. This will match colons and commas, since they're\n  // not matched by \"everyThingElse\", but will also match any other single character that wasn't already\n  // matched (for example: in \"a: 1, b: 2\", each of the non-space characters will be matched by oneNotSpace).\n  oneNotSpace = '[^\\\\s]',\n\n  // Create the actual regular expression by or-ing the above strings. The order is important.\n  bindingToken = RegExp(stringDouble + '|' + stringSingle + '|' + stringRegexp + '|' + everyThingElse + '|' + oneNotSpace, 'g'),\n\n  // Match end of previous token to determine whether a slash is a division or regex.\n  divisionLookBehind = /[\\])\"'A-Za-z0-9_$]+$/,\n  keywordRegexLookBehind = {\n    'in': 1,\n    'return': 1,\n    'typeof': 1\n  };\n\n/**\n * Break a binding string (data-bind='x: val, y: ..') into a stable array\n * of {key: value}.\n */\nexport default function parseObjectLiteral(objectLiteralString) {\n  // Trim leading and trailing spaces from the string\n  var str = stringTrim(objectLiteralString);\n\n  // Trim braces '{' surrounding the whole object literal\n  if (str.charCodeAt(0) === 123) str = str.slice(1, -1);\n\n  // Split into tokens\n  var result = [],\n    toks = str.match(bindingToken),\n    key, values = [],\n    depth = 0;\n\n  if (!toks) { return [] }\n\n  // Append a comma so that we don't need a separate code block to deal with the last item\n  toks.push(',');\n\n  for (var i = 0, tok; tok = toks[i]; ++i) {\n    var c = tok.charCodeAt(0);\n    // A comma signals the end of a key/value pair if depth is zero\n    if (c === 44) { // \",\"\n      if (depth <= 0) {\n        result.push((key && values.length) ? {\n          key: key,\n          value: values.join('')\n        } : {\n          'unknown': key || values.join('')\n        });\n        key = depth = 0;\n        values = [];\n        continue;\n      }\n      // Simply skip the colon that separates the name and value\n    } else if (c === 58) { // \":\"\n      if (!depth && !key && values.length === 1) {\n        key = values.pop();\n        continue;\n      }\n      // A set of slashes is initially matched as a regular expression, but could be division\n    } else if (c === 47 && i && tok.length > 1) { // \"/\"\n      // Look at the end of the previous token to determine if the slash is actually division\n      var match = toks[i - 1].match(divisionLookBehind);\n      if (match && !keywordRegexLookBehind[match[0]]) {\n        // The slash is actually a division punctuator; re-parse the remainder of the string (not including the slash)\n        str = str.substr(str.indexOf(tok) + 1);\n        toks = str.match(bindingToken);\n        toks.push(',');\n        i = -1;\n        // Continue with just the slash\n        tok = '/';\n      }\n      // Increment depth for parentheses, braces, and brackets so that interior commas are ignored\n    } else if (c === 40 || c === 123 || c === 91) { // '(', '{', '['\n      ++depth;\n    } else if (c === 41 || c === 125 || c === 93) { // ')', '}', ']'\n      --depth;\n      // The key will be the first token; if it's a string, trim the quotes\n    } else if (!key && !values.length && (c === 34 || c === 39)) { // '\"', \"'\"\n      tok = tok.slice(1, -1);\n    }\n    values.push(tok);\n  }\n\n  return result;\n}\n","\nimport {\n  subscribable, dependencyDetection\n} from 'tko.observable'\n\nimport {\n  getObjectOwnProperty, tasks\n} from 'tko.utils'\n\nvar loadingSubscribablesCache = {}, // Tracks component loads that are currently in flight\n    loadedDefinitionsCache = {};    // Tracks component loads that have already completed\n\nfunction loadComponentAndNotify(componentName, callback) {\n    var _subscribable = getObjectOwnProperty(loadingSubscribablesCache, componentName),\n        completedAsync;\n    if (!_subscribable) {\n        // It's not started loading yet. Start loading, and when it's done, move it to loadedDefinitionsCache.\n        _subscribable = loadingSubscribablesCache[componentName] = new subscribable();\n        _subscribable.subscribe(callback);\n\n        beginLoadingComponent(componentName, function(definition, config) {\n            var isSynchronousComponent = !!(config && config.synchronous);\n            loadedDefinitionsCache[componentName] = { definition: definition, isSynchronousComponent: isSynchronousComponent };\n            delete loadingSubscribablesCache[componentName];\n\n            // For API consistency, all loads complete asynchronously. However we want to avoid\n            // adding an extra task schedule if it's unnecessary (i.e., the completion is already\n            // async).\n            //\n            // You can bypass the 'always asynchronous' feature by putting the synchronous:true\n            // flag on your component configuration when you register it.\n            if (completedAsync || isSynchronousComponent) {\n                // Note that notifySubscribers ignores any dependencies read within the callback.\n                // See comment in loaderRegistryBehaviors.js for reasoning\n                _subscribable.notifySubscribers(definition);\n            } else {\n                tasks.schedule(function() {\n                    _subscribable.notifySubscribers(definition);\n                });\n            }\n        });\n        completedAsync = true;\n    } else {\n        _subscribable.subscribe(callback);\n    }\n}\n\nfunction beginLoadingComponent(componentName, callback) {\n    getFirstResultFromLoaders('getConfig', [componentName], function(config) {\n        if (config) {\n            // We have a config, so now load its definition\n            getFirstResultFromLoaders('loadComponent', [componentName, config], function(definition) {\n                callback(definition, config);\n            });\n        } else {\n            // The component has no config - it's unknown to all the loaders.\n            // Note that this is not an error (e.g., a module loading error) - that would abort the\n            // process and this callback would not run. For this callback to run, all loaders must\n            // have confirmed they don't know about this component.\n            callback(null, null);\n        }\n    });\n}\n\nfunction getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders) {\n    // On the first call in the stack, start with the full set of loaders\n    if (!candidateLoaders) {\n        candidateLoaders = registry.loaders.slice(0); // Use a copy, because we'll be mutating this array\n    }\n\n    // Try the next candidate\n    var currentCandidateLoader = candidateLoaders.shift();\n    if (currentCandidateLoader) {\n        var methodInstance = currentCandidateLoader[methodName];\n        if (methodInstance) {\n            var wasAborted = false,\n                synchronousReturnValue = methodInstance.apply(currentCandidateLoader, argsExceptCallback.concat(function(result) {\n                    if (wasAborted) {\n                        callback(null);\n                    } else if (result !== null) {\n                        // This candidate returned a value. Use it.\n                        callback(result);\n                    } else {\n                        // Try the next candidate\n                        getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders);\n                    }\n                }));\n\n            // Currently, loaders may not return anything synchronously. This leaves open the possibility\n            // that we'll extend the API to support synchronous return values in the future. It won't be\n            // a breaking change, because currently no loader is allowed to return anything except undefined.\n            if (synchronousReturnValue !== undefined) {\n                wasAborted = true;\n\n                // Method to suppress exceptions will remain undocumented. This is only to keep\n                // KO's specs running tidily, since we can observe the loading got aborted without\n                // having exceptions cluttering up the console too.\n                if (!currentCandidateLoader.suppressLoaderExceptions) {\n                    throw new Error('Component loaders must supply values by invoking the callback, not by returning values synchronously.');\n                }\n            }\n        } else {\n            // This candidate doesn't have the relevant handler. Synchronously move on to the next one.\n            getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders);\n        }\n    } else {\n        // No candidates returned a value\n        callback(null);\n    }\n}\n\nexport var registry = {\n  get (componentName, callback) {\n    var cachedDefinition = getObjectOwnProperty(loadedDefinitionsCache, componentName)\n    if (cachedDefinition) {\n      // It's already loaded and cached. Reuse the same definition object.\n      // Note that for API consistency, even cache hits complete asynchronously by default.\n      // You can bypass this by putting synchronous:true on your component config.\n      if (cachedDefinition.isSynchronousComponent) {\n        dependencyDetection.ignore(function() { // See comment in loaderRegistryBehaviors.js for reasoning\n            callback(cachedDefinition.definition);\n        });\n      } else {\n        tasks.schedule(function() { callback(cachedDefinition.definition); });\n      }\n    } else {\n      // Join the loading process that is already underway, or start a new one.\n      loadComponentAndNotify(componentName, callback);\n    }\n  },\n\n  clearCachedDefinition (componentName) {\n    delete loadedDefinitionsCache[componentName]\n  },\n\n  _getFirstResultFromLoaders: getFirstResultFromLoaders,\n\n  loaders: []\n};\n","\nimport {\n    isDomElement, isDocumentFragment, tagNameLower, parseHtmlFragment,\n    makeArray, cloneNodes\n} from 'tko.utils'\n\nimport {registry} from './registry'\n\n// The default loader is responsible for two things:\n// 1. Maintaining the default in-memory registry of component configuration objects\n//    (i.e., the thing you're writing to when you call ko.components.register(someName, ...))\n// 2. Answering requests for components by fetching configuration objects\n//    from that default in-memory registry and resolving them into standard\n//    component definition objects (of the form { createViewModel: ..., template: ... })\n// Custom loaders may override either of these facilities, i.e.,\n// 1. To supply configuration objects from some other source (e.g., conventions)\n// 2. Or, to resolve configuration objects by loading viewmodels/templates via arbitrary logic.\n\nexport var defaultConfigRegistry = {}\n\nexport function register(componentName, config) {\n    if (!config) {\n        throw new Error('Invalid configuration for ' + componentName);\n    }\n\n    if (isRegistered(componentName)) {\n        throw new Error('Component ' + componentName + ' is already registered');\n    }\n\n    defaultConfigRegistry[componentName] = config;\n}\n\nexport function isRegistered(componentName) {\n    return defaultConfigRegistry.hasOwnProperty(componentName);\n}\n\nexport function unregister(componentName) {\n    delete defaultConfigRegistry[componentName];\n    registry.clearCachedDefinition(componentName);\n}\n\nexport var defaultLoader = {\n    getConfig: function(componentName, callback) {\n        var result = defaultConfigRegistry.hasOwnProperty(componentName)\n            ? defaultConfigRegistry[componentName]\n            : null;\n        callback(result);\n    },\n\n    loadComponent: function(componentName, config, callback) {\n        var errorCallback = makeErrorCallback(componentName);\n        possiblyGetConfigFromAmd(errorCallback, config, function(loadedConfig) {\n            resolveConfig(componentName, errorCallback, loadedConfig, callback);\n        });\n    },\n\n    loadTemplate: function(componentName, templateConfig, callback) {\n        resolveTemplate(makeErrorCallback(componentName), templateConfig, callback);\n    },\n\n    loadViewModel: function(componentName, viewModelConfig, callback) {\n        resolveViewModel(makeErrorCallback(componentName), viewModelConfig, callback);\n    }\n};\n\nvar createViewModelKey = 'createViewModel';\n\n// Takes a config object of the form { template: ..., viewModel: ... }, and asynchronously convert it\n// into the standard component definition format:\n//    { template: <ArrayOfDomNodes>, createViewModel: function(params, componentInfo) { ... } }.\n// Since both template and viewModel may need to be resolved asynchronously, both tasks are performed\n// in parallel, and the results joined when both are ready. We don't depend on any promises infrastructure,\n// so this is implemented manually below.\nfunction resolveConfig(componentName, errorCallback, config, callback) {\n    var result = {},\n        makeCallBackWhenZero = 2,\n        tryIssueCallback = function() {\n            if (--makeCallBackWhenZero === 0) {\n                callback(result);\n            }\n        },\n        templateConfig = config['template'],\n        viewModelConfig = config['viewModel'];\n\n    if (templateConfig) {\n        possiblyGetConfigFromAmd(errorCallback, templateConfig, function(loadedConfig) {\n            registry._getFirstResultFromLoaders('loadTemplate', [componentName, loadedConfig], function(resolvedTemplate) {\n                result['template'] = resolvedTemplate;\n                tryIssueCallback();\n            });\n        });\n    } else {\n        tryIssueCallback();\n    }\n\n    if (viewModelConfig) {\n        possiblyGetConfigFromAmd(errorCallback, viewModelConfig, function(loadedConfig) {\n            registry._getFirstResultFromLoaders('loadViewModel', [componentName, loadedConfig], function(resolvedViewModel) {\n                result[createViewModelKey] = resolvedViewModel;\n                tryIssueCallback();\n            });\n        });\n    } else {\n        tryIssueCallback();\n    }\n}\n\nfunction resolveTemplate(errorCallback, templateConfig, callback) {\n    if (typeof templateConfig === 'string') {\n        // Markup - parse it\n        callback(parseHtmlFragment(templateConfig));\n    } else if (templateConfig instanceof Array) {\n        // Assume already an array of DOM nodes - pass through unchanged\n        callback(templateConfig);\n    } else if (isDocumentFragment(templateConfig)) {\n        // Document fragment - use its child nodes\n        callback(makeArray(templateConfig.childNodes));\n    } else if (templateConfig['element']) {\n        var element = templateConfig['element'];\n        if (isDomElement(element)) {\n            // Element instance - copy its child nodes\n            callback(cloneNodesFromTemplateSourceElement(element));\n        } else if (typeof element === 'string') {\n            // Element ID - find it, then copy its child nodes\n            var elemInstance = document.getElementById(element);\n            if (elemInstance) {\n                callback(cloneNodesFromTemplateSourceElement(elemInstance));\n            } else {\n                errorCallback('Cannot find element with ID ' + element);\n            }\n        } else {\n            errorCallback('Unknown element type: ' + element);\n        }\n    } else {\n        errorCallback('Unknown template value: ' + templateConfig);\n    }\n}\n\nfunction resolveViewModel(errorCallback, viewModelConfig, callback) {\n    if (typeof viewModelConfig === 'function') {\n        // Constructor - convert to standard factory function format\n        // By design, this does *not* supply componentInfo to the constructor, as the intent is that\n        // componentInfo contains non-viewmodel data (e.g., the component's element) that should only\n        // be used in factory functions, not viewmodel constructors.\n        callback(function (params /*, componentInfo */) {\n            return new viewModelConfig(params);\n        });\n    } else if (typeof viewModelConfig[createViewModelKey] === 'function') {\n        // Already a factory function - use it as-is\n        callback(viewModelConfig[createViewModelKey]);\n    } else if ('instance' in viewModelConfig) {\n        // Fixed object instance - promote to createViewModel format for API consistency\n        var fixedInstance = viewModelConfig['instance'];\n        callback(function (/* params, componentInfo */) {\n            return fixedInstance;\n        });\n    } else if ('viewModel' in viewModelConfig) {\n        // Resolved AMD module whose value is of the form { viewModel: ... }\n        resolveViewModel(errorCallback, viewModelConfig['viewModel'], callback);\n    } else {\n        errorCallback('Unknown viewModel value: ' + viewModelConfig);\n    }\n}\n\nfunction cloneNodesFromTemplateSourceElement(elemInstance) {\n    switch (tagNameLower(elemInstance)) {\n    case 'script':\n        return parseHtmlFragment(elemInstance.text);\n    case 'textarea':\n        return parseHtmlFragment(elemInstance.value);\n    case 'template':\n        // For browsers with proper <template> element support (i.e., where the .content property\n        // gives a document fragment), use that document fragment.\n        if (isDocumentFragment(elemInstance.content)) {\n            return cloneNodes(elemInstance.content.childNodes);\n        }\n    }\n\n    // Regular elements such as <div>, and <template> elements on old browsers that don't really\n    // understand <template> and just treat it as a regular container\n    return cloneNodes(elemInstance.childNodes);\n}\n\n\nfunction possiblyGetConfigFromAmd(errorCallback, config, callback) {\n    if (typeof config.require === 'string') {\n        // The config is the value of an AMD module\n        if (window.amdRequire || window.require) {\n            (window.amdRequire || window.require)([config.require], callback);\n        } else {\n            errorCallback('Uses require, but no AMD loader is present');\n        }\n    } else {\n        callback(config);\n    }\n}\n\nfunction makeErrorCallback(componentName) {\n    return function (message) {\n        throw new Error('Component \\'' + componentName + '\\': ' + message);\n    };\n}\n\n\n// By default, the default loader is the only registered component loader\nregistry.loaders.push(defaultLoader)\n","\nimport {\n  Parser\n} from 'tko.utils.parser'\n\nconst INNER_EXPRESSION = /^([\\s\\S]*)}}([\\s\\S]*?)\\{\\{([\\s\\S]*)$/\nconst OUTER_EXPRESSION = /^([\\s\\S]*?)\\{\\{([\\s\\S]*)}}([\\s\\S]*)$/\nconst BINDING_EXPRESSION = /^([^,\"'{}()/:[\\]\\s]+)\\s+([^\\s:].*)/\n\nclass Interpolated {\n  constructor (text) {\n    this.text = text\n  }\n\n  trim (string) {\n    return string === null ? '' : string.trim()\n  }\n}\n\nclass Expression extends Interpolated {\n  asAttr (context, globals, node) {\n    return new Parser().parseExpression(this.text, context, globals, node)()\n  }\n\n  * textNodeReplacement (textNode) {\n    const text = this.trim(this.text)\n    const ownerDocument = textNode ? textNode.ownerDocument : document\n    const firstChar = text[0]\n    const lastChar = text[text.length - 1]\n    var closeComment = true\n    var binding\n\n    if (firstChar === '#') {\n      if (lastChar === '/') {\n        binding = text.slice(1, -1)\n      } else {\n        binding = text.slice(1)\n        closeComment = false\n      }\n      const matches = binding.match(BINDING_EXPRESSION)\n      if (matches) {\n        binding = matches[1] + ':' + matches[2]\n      }\n    } else if (firstChar === '/') {\n      // replace only with a closing comment\n    } else if (firstChar === '{' && lastChar === '}') {\n      binding = 'html:' + this.trim(text.slice(1, -1))\n    } else {\n      binding = 'text:' + this.trim(text)\n    }\n\n    if (binding) {\n      yield ownerDocument.createComment('ko ' + binding)\n    }\n    if (closeComment) {\n      yield ownerDocument.createComment('/ko')\n    }\n  }\n}\n\nclass Text extends Interpolated {\n  asAttr () { return this.text }\n\n  * textNodeReplacement () {\n    yield document.createTextNode(this.text.replace(/\"/g, '\\\\\"'))\n  }\n}\n\n/**\n *          Interpolation Parsing\n */\nexport function * innerParse (text) {\n  const innerMatch = text.match(INNER_EXPRESSION)\n  if (innerMatch) {\n    const [pre, inner, post] = innerMatch.slice(1)\n    yield * innerParse(pre)\n    yield new Text(inner)\n    yield new Expression(post)\n  } else {\n    yield new Expression(text)\n  }\n}\n\nexport function * parseOuterMatch (outerMatch) {\n  if (!outerMatch) { return }\n  let [pre, inner, post] = outerMatch.slice(1)\n  yield new Text(pre)\n  yield * innerParse(inner)\n  yield new Text(post)\n}\n\nexport function * parseInterpolation (text) {\n  for (const textOrExpr of parseOuterMatch(text.match(OUTER_EXPRESSION))) {\n    if (textOrExpr.text) { yield textOrExpr }\n  }\n}\n","import {\n    extend, options, anyDomNodeIsAttachedToDocument, addDisposeCallback,\n    arrayRemoveItem, domData\n} from 'tko.utils';\n\nimport {\n    computed\n} from 'tko.computed';\n\nimport {\n    unwrap, isObservable\n} from 'tko.observable';\n\n\nvar storedBindingContextDomDataKey = domData.nextKey();\n\n\n\n// The bindingContext constructor is only called directly to create the root context. For child\n// contexts, use bindingContext.createChildContext or bindingContext.extend.\nexport function bindingContext(dataItemOrAccessor, parentContext, dataItemAlias, extendCallback, settings) {\n\n    var self = this,\n        isFunc = typeof(dataItemOrAccessor) == \"function\" && !isObservable(dataItemOrAccessor),\n        nodes,\n        subscribable;\n\n    // The binding context object includes static properties for the current, parent, and root view models.\n    // If a view model is actually stored in an observable, the corresponding binding context object, and\n    // any child contexts, must be updated when the view model is changed.\n    function updateContext() {\n        // Most of the time, the context will directly get a view model object, but if a function is given,\n        // we call the function to retrieve the view model. If the function accesses any observables or returns\n        // an observable, the dependency is tracked, and those observables can later cause the binding\n        // context to be updated.\n        var dataItemOrObservable = isFunc ? dataItemOrAccessor() : dataItemOrAccessor,\n            dataItem = unwrap(dataItemOrObservable);\n\n        if (parentContext) {\n            // When a \"parent\" context is given, register a dependency on the parent context. Thus whenever the\n            // parent context is updated, this context will also be updated.\n            if (parentContext._subscribable)\n                parentContext._subscribable();\n\n            // Copy $root and any custom properties from the parent context\n            extend(self, parentContext);\n\n            // Because the above copy overwrites our own properties, we need to reset them.\n            self._subscribable = subscribable;\n        } else {\n            self.$parents = [];\n            self.$root = dataItem;\n\n            // Export 'ko' in the binding context so it will be available in bindings and templates\n            // even if 'ko' isn't exported as a global, such as when using an AMD loader.\n            // See https://github.com/SteveSanderson/knockout/issues/490\n            self.ko = options.knockoutInstance;\n        }\n        self.$rawData = dataItemOrObservable;\n        self.$data = dataItem;\n        if (dataItemAlias)\n            self[dataItemAlias] = dataItem;\n\n        // The extendCallback function is provided when creating a child context or extending a context.\n        // It handles the specific actions needed to finish setting up the binding context. Actions in this\n        // function could also add dependencies to this binding context.\n        if (extendCallback)\n            extendCallback(self, parentContext, dataItem);\n\n        return self.$data;\n    }\n\n    function disposeWhen() {\n        return nodes && !anyDomNodeIsAttachedToDocument(nodes);\n    }\n\n    if (settings && settings.exportDependencies) {\n        // The \"exportDependencies\" option means that the calling code will track any dependencies and re-create\n        // the binding context when they change.\n        updateContext();\n        return;\n    }\n\n    subscribable = computed(updateContext, null, { disposeWhen: disposeWhen, disposeWhenNodeIsRemoved: true });\n\n    // At this point, the binding context has been initialized, and the \"subscribable\" computed observable is\n    // subscribed to any observables that were accessed in the process. If there is nothing to track, the\n    // computed will be inactive, and we can safely throw it away. If it's active, the computed is stored in\n    // the context object.\n    if (subscribable.isActive()) {\n        self._subscribable = subscribable;\n\n        // Always notify because even if the model ($data) hasn't changed, other context properties might have changed\n        subscribable.equalityComparer = null;\n\n        // We need to be able to dispose of this computed observable when it's no longer needed. This would be\n        // easy if we had a single node to watch, but binding contexts can be used by many different nodes, and\n        // we cannot assume that those nodes have any relation to each other. So instead we track any node that\n        // the context is attached to, and dispose the computed when all of those nodes have been cleaned.\n\n        // Add properties to *subscribable* instead of *self* because any properties added to *self* may be overwritten on updates\n        nodes = [];\n        subscribable._addNode = function(node) {\n            nodes.push(node);\n            addDisposeCallback(node, function(node) {\n                arrayRemoveItem(nodes, node);\n                if (!nodes.length) {\n                    subscribable.dispose();\n                    self._subscribable = subscribable = undefined;\n                }\n            });\n        };\n    }\n}\n\nbindingContext.prototype.lookup = function (token, globals, node) {\n  // short circuits\n  switch (token) {\n    case '$element': return node\n    case '$context': return this\n    case 'this': case '$data': return this.$data\n  }\n  const $data = this.$data\n  // instanceof Object covers 1. {}, 2. [], 3. function() {}, 4. new *;  it excludes undefined, null, primitives.\n  if ($data instanceof Object && token in $data) { return $data[token] }\n  if (token in this) { return this[token] }\n  if (token in globals) { return globals[token] }\n\n  throw new Error(`The variable \"${token}\" was not found on $data, $context, or globals.`)\n}\n\n// Extend the binding context hierarchy with a new view model object. If the parent context is watching\n// any observables, the new child context will automatically get a dependency on the parent context.\n// But this does not mean that the $data value of the child context will also get updated. If the child\n// view model also depends on the parent view model, you must provide a function that returns the correct\n// view model on each update.\nbindingContext.prototype.createChildContext = function (dataItemOrAccessor, dataItemAlias, extendCallback, settings) {\n    return new bindingContext(dataItemOrAccessor, this, dataItemAlias, function(self, parentContext) {\n        // Extend the context hierarchy by setting the appropriate pointers\n        self.$parentContext = parentContext;\n        self.$parent = parentContext.$data;\n        self.$parents = (parentContext.$parents || []).slice(0);\n        self.$parents.unshift(self.$parent);\n        if (extendCallback)\n            extendCallback(self);\n    }, settings);\n};\n\n// Extend the binding context with new custom properties. This doesn't change the context hierarchy.\n// Similarly to \"child\" contexts, provide a function here to make sure that the correct values are set\n// when an observable view model is updated.\nbindingContext.prototype.extend = function(properties) {\n    // If the parent context references an observable view model, \"_subscribable\" will always be the\n    // latest view model object. If not, \"_subscribable\" isn't set, and we can use the static \"$data\" value.\n    return new bindingContext(this._subscribable || this.$data, this, null, function(self, parentContext) {\n        // This \"child\" context doesn't directly track a parent observable view model,\n        // so we need to manually set the $rawData value to match the parent.\n        self.$rawData = parentContext.$rawData;\n        extend(self, typeof(properties) === \"function\" ? properties() : properties);\n    });\n};\n\nbindingContext.prototype.createStaticChildContext = function (dataItemOrAccessor, dataItemAlias) {\n    return this.createChildContext(dataItemOrAccessor, dataItemAlias, null, { \"exportDependencies\": true });\n};\n\n\nexport function storedBindingContextForNode(node, bindingContext) {\n    if (arguments.length == 2) {\n        domData.set(node, storedBindingContextDomDataKey, bindingContext);\n        if (bindingContext._subscribable)\n            bindingContext._subscribable._addNode(node);\n    } else {\n        return domData.get(node, storedBindingContextDomDataKey);\n    }\n}\n\n\n// Retrieving binding context from arbitrary nodes\nexport function contextFor(node) {\n    // We can only do something meaningful for elements and comment nodes (in particular, not text nodes, as IE can't store domdata for them)\n    switch (node.nodeType) {\n    case 1:\n    case 8:\n        var context = storedBindingContextForNode(node);\n        if (context) return context;\n        if (node.parentNode) return contextFor(node.parentNode);\n        break;\n    }\n    return undefined;\n}\n\n\nexport function dataFor(node) {\n    var context = contextFor(node);\n    return context ? context.$data : undefined;\n}\n","\n/* eslint no-cond-assign: 0 */\n\nimport {\n    extend, objectMap, virtualElements, tagNameLower, domData, objectForEach,\n    arrayIndexOf, arrayForEach, options\n} from 'tko.utils'\n\nimport {\n    dependencyDetection\n} from 'tko.observable'\n\nimport {\n    computed\n} from 'tko.computed'\n\nimport {\n    bindingContext, storedBindingContextForNode\n} from './bindingContext'\n\nimport {\n  LegacyBindingHandler\n} from './LegacyBindingHandler'\n\n// The following element types will not be recursed into during binding.\nvar bindingDoesNotRecurseIntoElementTypes = {\n    // Don't want bindings that operate on text nodes to mutate <script> and <textarea> contents,\n    // because it's unexpected and a potential XSS issue.\n    // Also bindings should not operate on <template> elements since this breaks in Internet Explorer\n    // and because such elements' contents are always intended to be bound in a different context\n    // from where they appear in the document.\n  'script': true,\n  'textarea': true,\n  'template': true\n}\n\nfunction asProperHandlerClass (handler, bindingKey) {\n  if (!handler) { return }\n  return handler.isBindingHandlerClass ? handler\n    : LegacyBindingHandler.getOrCreateFor(bindingKey, handler)\n}\n\nfunction getBindingHandlerFromComponent (bindingKey, $component) {\n  if (!$component || typeof $component.getBindingHandler !== 'function') { return }\n  return asProperHandlerClass($component.getBindingHandler(bindingKey))\n}\n\nexport function getBindingHandler (bindingKey) {\n  return asProperHandlerClass(options.bindingProviderInstance.bindingHandlers.get(bindingKey), bindingKey)\n}\n\n// Returns the valueAccesor function for a binding value\nfunction makeValueAccessor (value) {\n  return function () {\n    return value\n  }\n}\n\n// Returns the value of a valueAccessor function\nfunction evaluateValueAccessor (valueAccessor) {\n  return valueAccessor()\n}\n\n// Given a function that returns bindings, create and return a new object that contains\n// binding value-accessors functions. Each accessor function calls the original function\n// so that it always gets the latest value and all dependencies are captured. This is used\n// by ko.applyBindingsToNode and getBindingsAndMakeAccessors.\nfunction makeAccessorsFromFunction (callback) {\n  return objectMap(dependencyDetection.ignore(callback), function (value, key) {\n    return function () {\n      return callback()[key]\n    }\n  })\n}\n\n// Given a bindings function or object, create and return a new object that contains\n// binding value-accessors functions. This is used by ko.applyBindingsToNode.\nfunction makeBindingAccessors (bindings, context, node) {\n  if (typeof bindings === 'function') {\n    return makeAccessorsFromFunction(bindings.bind(null, context, node))\n  } else {\n    return objectMap(bindings, makeValueAccessor)\n  }\n}\n\n// This function is used if the binding provider doesn't include a getBindingAccessors function.\n// It must be called with 'this' set to the provider instance.\nfunction getBindingsAndMakeAccessors (node, context) {\n  return makeAccessorsFromFunction(this.getBindings.bind(this, node, context))\n}\n\nfunction applyBindingsToDescendantsInternal (bindingContext, elementOrVirtualElement, bindingContextsMayDifferFromDomParentElement, asyncBindingsApplied) {\n  var currentChild\n  var nextInQueue = virtualElements.firstChild(elementOrVirtualElement)\n  const provider = options.bindingProviderInstance\n  const preprocessNode = provider.preprocessNode\n\n    // Preprocessing allows a binding provider to mutate a node before bindings are applied to it. For example it's\n    // possible to insert new siblings after it, and/or replace the node with a different one. This can be used to\n    // implement custom binding syntaxes, such as {{ value }} for string interpolation, or custom element types that\n    // trigger insertion of <template> contents at that point in the document.\n  if (preprocessNode) {\n    while (currentChild = nextInQueue) {\n      nextInQueue = virtualElements.nextSibling(currentChild)\n      preprocessNode.call(provider, currentChild)\n    }\n        // Reset nextInQueue for the next loop\n    nextInQueue = virtualElements.firstChild(elementOrVirtualElement)\n  }\n\n  while (currentChild = nextInQueue) {\n        // Keep a record of the next child *before* applying bindings, in case the binding removes the current child from its position\n    nextInQueue = virtualElements.nextSibling(currentChild)\n    applyBindingsToNodeAndDescendantsInternal(bindingContext, currentChild, bindingContextsMayDifferFromDomParentElement, asyncBindingsApplied)\n  }\n}\n\nfunction hasBindings (node) {\n  const provider = options.bindingProviderInstance\n  return provider.FOR_NODE_TYPES.includes(node.nodeType) && provider.nodeHasBindings(node)\n}\n\nfunction applyBindingsToNodeAndDescendantsInternal (bindingContext, nodeVerified, bindingContextMayDifferFromDomParentElement, asyncBindingsApplied) {\n  // Perf optimisation: Apply bindings only if...\n  // (1) We need to store the binding context on this node (because it may differ from the DOM parent node's binding context)\n  //     Note that we can't store binding contexts on non-elements (e.g., text nodes), as IE doesn't allow expando properties for those\n  // (2) It might have bindings (e.g., it has a data-bind attribute, or it's a marker for a containerless template)\n  var isElement = nodeVerified.nodeType === 1\n  if (isElement) { // Workaround IE <= 8 HTML parsing weirdness\n    virtualElements.normaliseVirtualElementDomStructure(nodeVerified)\n  }\n\n  var shouldApplyBindings = (isElement && bindingContextMayDifferFromDomParentElement) || // Case (1)\n                             hasBindings(nodeVerified) // Case (2)\n\n  const {shouldBindDescendants} = shouldApplyBindings\n    ? applyBindingsToNodeInternal(nodeVerified, null, bindingContext, bindingContextMayDifferFromDomParentElement, asyncBindingsApplied)\n    : { shouldBindDescendants: true }\n\n  if (shouldBindDescendants && !bindingDoesNotRecurseIntoElementTypes[tagNameLower(nodeVerified)]) {\n    // We're recursing automatically into (real or virtual) child nodes without changing binding contexts. So,\n    //  * For children of a *real* element, the binding context is certainly the same as on their DOM .parentNode,\n    //    hence bindingContextsMayDifferFromDomParentElement is false\n    //  * For children of a *virtual* element, we can't be sure. Evaluating .parentNode on those children may\n    //    skip over any number of intermediate virtual elements, any of which might define a custom binding context,\n    //    hence bindingContextsMayDifferFromDomParentElement is true\n    applyBindingsToDescendantsInternal(bindingContext, nodeVerified, /* bindingContextsMayDifferFromDomParentElement: */ !isElement, asyncBindingsApplied)\n  }\n}\n\nvar boundElementDomDataKey = domData.nextKey()\n\nfunction * topologicalSortBindings (bindings, $component) {\n  const results = []\n  // Depth-first sort\n  const bindingsConsidered = {}    // A temporary record of which bindings are already in 'result'\n  const cyclicDependencyStack = [] // Keeps track of a depth-search so that, if there's a cycle, we know which bindings caused it\n\n  objectForEach(bindings, function pushBinding (bindingKey) {\n    if (!bindingsConsidered[bindingKey]) {\n      const binding = getBindingHandlerFromComponent(bindingKey, $component) || getBindingHandler(bindingKey)\n      if (!binding) { return }\n        // First add dependencies (if any) of the current binding\n      if (binding.after) {\n        cyclicDependencyStack.push(bindingKey)\n        arrayForEach(binding.after, function (bindingDependencyKey) {\n          if (!bindings[bindingDependencyKey]) { return }\n          if (arrayIndexOf(cyclicDependencyStack, bindingDependencyKey) !== -1) {\n            throw Error('Cannot combine the following bindings, because they have a cyclic dependency: ' + cyclicDependencyStack.join(', '))\n          } else {\n            pushBinding(bindingDependencyKey)\n          }\n        })\n        cyclicDependencyStack.length--\n      }\n        // Next add the current binding\n      results.push([ bindingKey, binding ])\n    }\n    bindingsConsidered[bindingKey] = true\n  })\n\n  for (const result of results) { yield result }\n}\n\nfunction applyBindingsToNodeInternal (node, sourceBindings, bindingContext, bindingContextMayDifferFromDomParentElement, asyncBindingsApplied) {\n    // Prevent multiple applyBindings calls for the same node, except when a binding value is specified\n  var alreadyBound = domData.get(node, boundElementDomDataKey)\n  if (!sourceBindings) {\n    if (alreadyBound) {\n      onBindingError({\n        during: 'apply',\n        errorCaptured: new Error('You cannot apply bindings multiple times to the same element.'),\n        element: node,\n        bindingContext\n      })\n      return false\n    }\n    domData.set(node, boundElementDomDataKey, true)\n  }\n\n    // Optimization: Don't store the binding context on this node if it's definitely the same as on node.parentNode, because\n    // we can easily recover it just by scanning up the node's ancestors in the DOM\n    // (note: here, parent node means \"real DOM parent\" not \"virtual parent\", as there's no O(1) way to find the virtual parent)\n  if (!alreadyBound && bindingContextMayDifferFromDomParentElement) { storedBindingContextForNode(node, bindingContext) }\n\n    // Use bindings if given, otherwise fall back on asking the bindings provider to give us some bindings\n  var bindings\n  if (sourceBindings && typeof sourceBindings !== 'function') {\n    bindings = sourceBindings\n  } else {\n    const provider = options.bindingProviderInstance\n    const getBindings = provider.getBindingAccessors || getBindingsAndMakeAccessors\n\n    if (provider.FOR_NODE_TYPES.includes(node.nodeType)) {\n          // Get the binding from the provider within a computed observable so that we can update the bindings whenever\n          // the binding context is updated or if the binding provider accesses observables.\n      var bindingsUpdater = computed(\n              function () {\n                bindings = sourceBindings ? sourceBindings(bindingContext, node) : getBindings.call(provider, node, bindingContext)\n                  // Register a dependency on the binding context to support observable view models.\n                if (bindings && bindingContext._subscribable) { bindingContext._subscribable() }\n                return bindings\n              },\n              null, { disposeWhenNodeIsRemoved: node }\n          )\n\n      if (!bindings || !bindingsUpdater.isActive()) { bindingsUpdater = null }\n    }\n  }\n\n  var bindingHandlerThatControlsDescendantBindings\n  if (bindings) {\n    const $component = bindingContext.$component || {}\n\n    const allBindingHandlers = {}\n    domData.set(node, 'bindingHandlers', allBindingHandlers)\n\n        // Return the value accessor for a given binding. When bindings are static (won't be updated because of a binding\n        // context update), just return the value accessor from the binding. Otherwise, return a function that always gets\n        // the latest binding value and registers a dependency on the binding updater.\n    const getValueAccessor = bindingsUpdater\n            ? (bindingKey) => function (optionalValue) {\n              var valueAccessor = bindingsUpdater()[bindingKey]\n              if (arguments.length === 0) {\n                return evaluateValueAccessor(valueAccessor)\n              } else {\n                return valueAccessor(optionalValue)\n              }\n            } : (bindingKey) => bindings[bindingKey]\n\n        // Use of allBindings as a function is maintained for backwards compatibility, but its use is deprecated\n    function allBindings () {\n      return objectMap(bindingsUpdater ? bindingsUpdater() : bindings, evaluateValueAccessor)\n    }\n        // The following is the 3.x allBindings API\n    allBindings.has = (key) => key in bindings\n    allBindings.get = (key) => bindings[key] && evaluateValueAccessor(getValueAccessor(key))\n\n    // Note Array.from as workaround to Typescript 2.6 being broken:\n    //    https://stackoverflow.com/questions/47183944\n    const bindingsArray = Array.from(topologicalSortBindings(bindings, $component))\n    for (const [key, BindingHandlerClass] of bindingsArray) {\n        // Go through the sorted bindings, calling init and update for each\n      function reportBindingError (during, errorCaptured) {\n        onBindingError({\n          during,\n          errorCaptured,\n          bindings,\n          allBindings,\n          bindingKey: key,\n          bindingContext,\n          element: node,\n          valueAccessor: getValueAccessor(key)\n        })\n      }\n\n      if (node.nodeType === 8 && !BindingHandlerClass.allowVirtualElements) {\n        throw new Error(`The binding [${key}] cannot be used with virtual elements`)\n      }\n\n      try {\n        const bindingHandler = dependencyDetection.ignore(() =>\n          new BindingHandlerClass({\n            allBindings,\n            $element: node,\n            $context: bindingContext,\n            onError: reportBindingError,\n            valueAccessor (...v) { return getValueAccessor(key)(...v) }\n          })\n        )\n\n              // Expose the bindings via domData.\n        allBindingHandlers[key] = bindingHandler\n\n        if (bindingHandler.controlsDescendants) {\n          if (bindingHandlerThatControlsDescendantBindings !== undefined) { throw new Error('Multiple bindings (' + bindingHandlerThatControlsDescendantBindings + ' and ' + key + ') are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.') }\n          bindingHandlerThatControlsDescendantBindings = key\n        }\n\n        if (bindingHandler.bindingCompleted instanceof options.Promise) {\n          asyncBindingsApplied.add(bindingHandler.bindingCompleted)\n        }\n      } catch (err) {\n        reportBindingError('creation', err)\n      }\n    }\n  }\n\n  return {\n    shouldBindDescendants: bindingHandlerThatControlsDescendantBindings === undefined\n  }\n}\n\nfunction getBindingContext (viewModelOrBindingContext) {\n  return viewModelOrBindingContext && (viewModelOrBindingContext instanceof bindingContext)\n    ? viewModelOrBindingContext\n    : new bindingContext(viewModelOrBindingContext)\n}\n\nexport function applyBindingAccessorsToNode (node, bindings, viewModelOrBindingContext, asyncBindingsApplied) {\n  if (node.nodeType === 1) { // If it's an element, workaround IE <= 8 HTML parsing weirdness\n    virtualElements.normaliseVirtualElementDomStructure(node)\n  }\n  return applyBindingsToNodeInternal(node, bindings, getBindingContext(viewModelOrBindingContext), true, asyncBindingsApplied)\n}\n\nexport function applyBindingsToNode (node, bindings, viewModelOrBindingContext) {\n  const asyncBindingsApplied = new Set()\n  var context = getBindingContext(viewModelOrBindingContext)\n  applyBindingAccessorsToNode(node, makeBindingAccessors(bindings, context, node), context, asyncBindingsApplied)\n  return options.Promise.all(asyncBindingsApplied)\n}\n\nexport function applyBindingsToDescendants (viewModelOrBindingContext, rootNode) {\n  const asyncBindingsApplied = new Set()\n  if (rootNode.nodeType === 1 || rootNode.nodeType === 8) {\n    applyBindingsToDescendantsInternal(getBindingContext(viewModelOrBindingContext), rootNode, true, asyncBindingsApplied)\n  }\n  return options.Promise.all(asyncBindingsApplied)\n}\n\nexport function applyBindings (viewModelOrBindingContext, rootNode) {\n  const asyncBindingsApplied = new Set()\n  // If jQuery is loaded after Knockout, we won't initially have access to it. So save it here.\n  if (!options.jQuery === undefined && options.jQuery) {\n    options.jQuery = options.jQuery\n  }\n\n  if (rootNode && (rootNode.nodeType !== 1) && (rootNode.nodeType !== 8)) { throw new Error('ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node') }\n  rootNode = rootNode || options.document.body // Make \"rootNode\" parameter optional\n\n  applyBindingsToNodeAndDescendantsInternal(getBindingContext(viewModelOrBindingContext), rootNode, true, asyncBindingsApplied)\n  return options.Promise.all(asyncBindingsApplied)\n}\n\nfunction onBindingError (spec) {\n  var error, bindingText\n  if (spec.bindingKey) {\n        // During: 'init' or initial 'update'\n    error = spec.errorCaptured\n    spec.message = 'Unable to process binding \"' + spec.bindingKey +\n            '\" in binding \"' + spec.bindingKey +\n            '\"\\nMessage: ' + (error.message ? error.message : error)\n  } else {\n        // During: 'apply'\n    error = spec.errorCaptured\n  }\n  try {\n    extend(error, spec)\n  } catch (e) {\n        // Read-only error e.g. a DOMEXception.\n    spec.stack = error.stack\n    error = new Error(error.message ? error.message : error)\n    extend(error, spec)\n  }\n  options.onError(error)\n}\n","/* eslint no-cond-assign: 0 */\nimport {\n    fixUpContinuousNodeArray, replaceDomNodes, arrayPushAll,\n    anyDomNodeIsAttachedToDocument, domData, arrayMap, arrayForEach,\n    virtualElements, extend, cleanNode, removeNode, compareArrays\n} from 'tko.utils';\n\nimport {\n    dependencyDetection, observable\n} from 'tko.observable';\n\nimport { computed } from 'tko.computed';\n\n\n// Objective:\n// * Given an input array, a container DOM node, and a function from array elements to arrays of DOM nodes,\n//   map the array elements to arrays of DOM nodes, concatenate together all these arrays, and use them to populate the container DOM node\n// * Next time we're given the same combination of things (with the array possibly having mutated), update the container DOM node\n//   so that its children is again the concatenation of the mappings of the array elements, but don't re-map any array elements that we\n//   previously mapped - retain those nodes, and just insert/delete other ones\n\n// \"callbackAfterAddingNodes\" will be invoked after any \"mapping\"-generated nodes are inserted into the container node\n// You can use this, for example, to activate bindings on those nodes.\n\nfunction mapNodeAndRefreshWhenChanged(containerNode, mapping, valueToMap, callbackAfterAddingNodes, index) {\n    // Map this array value inside a dependentObservable so we re-map when any dependency changes\n    var mappedNodes = [];\n    var dependentObservable = computed(function() {\n        var newMappedNodes = mapping(valueToMap, index, fixUpContinuousNodeArray(mappedNodes, containerNode)) || [];\n\n        // On subsequent evaluations, just replace the previously-inserted DOM nodes\n        if (mappedNodes.length > 0) {\n            replaceDomNodes(mappedNodes, newMappedNodes);\n            if (callbackAfterAddingNodes)\n                dependencyDetection.ignore(callbackAfterAddingNodes, null, [valueToMap, newMappedNodes, index]);\n        }\n\n        // Replace the contents of the mappedNodes array, thereby updating the record\n        // of which nodes would be deleted if valueToMap was itself later removed\n        mappedNodes.length = 0;\n        arrayPushAll(mappedNodes, newMappedNodes);\n    }, null, { disposeWhenNodeIsRemoved: containerNode, disposeWhen: function() { return !anyDomNodeIsAttachedToDocument(mappedNodes); } });\n    return { mappedNodes : mappedNodes, dependentObservable : (dependentObservable.isActive() ? dependentObservable : undefined) };\n}\n\nvar lastMappingResultDomDataKey = domData.nextKey(),\n    deletedItemDummyValue = domData.nextKey();\n\nexport function setDomNodeChildrenFromArrayMapping(domNode, array, mapping, options, callbackAfterAddingNodes) {\n    // Compare the provided array against the previous one\n    array = array || [];\n    options = options || {};\n    var isFirstExecution = domData.get(domNode, lastMappingResultDomDataKey) === undefined;\n    var lastMappingResult = domData.get(domNode, lastMappingResultDomDataKey) || [];\n    var lastArray = arrayMap(lastMappingResult, function (x) { return x.arrayEntry; });\n    var editScript = compareArrays(lastArray, array, options['dontLimitMoves']);\n\n    // Build the new mapping result\n    var newMappingResult = [];\n    var lastMappingResultIndex = 0;\n    var newMappingResultIndex = 0;\n\n    var nodesToDelete = [];\n    var itemsToProcess = [];\n    var itemsForBeforeRemoveCallbacks = [];\n    var itemsForMoveCallbacks = [];\n    var itemsForAfterAddCallbacks = [];\n    var mapData;\n\n    function itemMovedOrRetained(editScriptIndex, oldPosition) {\n        mapData = lastMappingResult[oldPosition];\n        if (newMappingResultIndex !== oldPosition)\n            itemsForMoveCallbacks[editScriptIndex] = mapData;\n        // Since updating the index might change the nodes, do so before calling fixUpContinuousNodeArray\n        mapData.indexObservable(newMappingResultIndex++);\n        fixUpContinuousNodeArray(mapData.mappedNodes, domNode);\n        newMappingResult.push(mapData);\n        itemsToProcess.push(mapData);\n    }\n\n    function callCallback(callback, items) {\n        if (callback) {\n            for (var i = 0, n = items.length; i < n; i++) {\n                if (items[i]) {\n                    arrayForEach(items[i].mappedNodes, function(node) {\n                        callback(node, i, items[i].arrayEntry);\n                    });\n                }\n            }\n        }\n    }\n\n    for (var i = 0, editScriptItem, movedIndex; editScriptItem = editScript[i]; i++) {\n        movedIndex = editScriptItem['moved'];\n        switch (editScriptItem['status']) {\n        case \"deleted\":\n            if (movedIndex === undefined) {\n                mapData = lastMappingResult[lastMappingResultIndex];\n\n                // Stop tracking changes to the mapping for these nodes\n                if (mapData.dependentObservable) {\n                    mapData.dependentObservable.dispose();\n                    mapData.dependentObservable = undefined;\n                }\n\n                // Queue these nodes for later removal\n                if (fixUpContinuousNodeArray(mapData.mappedNodes, domNode).length) {\n                    if (options['beforeRemove']) {\n                        newMappingResult.push(mapData);\n                        itemsToProcess.push(mapData);\n                        if (mapData.arrayEntry === deletedItemDummyValue) {\n                            mapData = null;\n                        } else {\n                            itemsForBeforeRemoveCallbacks[i] = mapData;\n                        }\n                    }\n                    if (mapData) {\n                        nodesToDelete.push.apply(nodesToDelete, mapData.mappedNodes);\n                    }\n                }\n            }\n            lastMappingResultIndex++;\n            break;\n\n        case \"retained\":\n            itemMovedOrRetained(i, lastMappingResultIndex++);\n            break;\n\n        case \"added\":\n            if (movedIndex !== undefined) {\n                itemMovedOrRetained(i, movedIndex);\n            } else {\n                mapData = { arrayEntry: editScriptItem['value'], indexObservable: observable(newMappingResultIndex++) };\n                newMappingResult.push(mapData);\n                itemsToProcess.push(mapData);\n                if (!isFirstExecution)\n                    itemsForAfterAddCallbacks[i] = mapData;\n            }\n            break;\n        }\n    }\n\n    // Store a copy of the array items we just considered so we can difference it next time\n    domData.set(domNode, lastMappingResultDomDataKey, newMappingResult);\n\n    // Call beforeMove first before any changes have been made to the DOM\n    callCallback(options['beforeMove'], itemsForMoveCallbacks);\n\n    // Next remove nodes for deleted items (or just clean if there's a beforeRemove callback)\n    arrayForEach(nodesToDelete, options['beforeRemove'] ? cleanNode : removeNode);\n\n    // Next add/reorder the remaining items (will include deleted items if there's a beforeRemove callback)\n    i = 0;\n    for (var nextNode = virtualElements.firstChild(domNode), lastNode, node; mapData = itemsToProcess[i]; i++) {\n        // Get nodes for newly added items\n        if (!mapData.mappedNodes)\n            extend(mapData, mapNodeAndRefreshWhenChanged(domNode, mapping, mapData.arrayEntry, callbackAfterAddingNodes, mapData.indexObservable));\n\n        // Put nodes in the right place if they aren't there already\n        for (var j = 0; node = mapData.mappedNodes[j]; nextNode = node.nextSibling, lastNode = node, j++) {\n            if (node !== nextNode)\n                virtualElements.insertAfter(domNode, node, lastNode);\n        }\n\n        // Run the callbacks for newly added nodes (for example, to apply bindings, etc.)\n        if (!mapData.initialized && callbackAfterAddingNodes) {\n            callbackAfterAddingNodes(mapData.arrayEntry, mapData.mappedNodes, mapData.indexObservable);\n            mapData.initialized = true;\n        }\n    }\n\n    // If there's a beforeRemove callback, call it after reordering.\n    // Note that we assume that the beforeRemove callback will usually be used to remove the nodes using\n    // some sort of animation, which is why we first reorder the nodes that will be removed. If the\n    // callback instead removes the nodes right away, it would be more efficient to skip reordering them.\n    // Perhaps we'll make that change in the future if this scenario becomes more common.\n    callCallback(options['beforeRemove'], itemsForBeforeRemoveCallbacks);\n\n    // Replace the stored values of deleted items with a dummy value. This provides two benefits: it marks this item\n    // as already \"removed\" so we won't call beforeRemove for it again, and it ensures that the item won't match up\n    // with an actual item in the array and appear as \"retained\" or \"moved\".\n    for (i = 0; i < itemsForBeforeRemoveCallbacks.length; ++i) {\n        if (itemsForBeforeRemoveCallbacks[i]) {\n            itemsForBeforeRemoveCallbacks[i].arrayEntry = deletedItemDummyValue;\n        }\n    }\n\n    // Finally call afterMove and afterAdd callbacks\n    callCallback(options['afterMove'], itemsForMoveCallbacks);\n    callCallback(options['afterAdd'], itemsForAfterAddCallbacks);\n}\n","// A template source represents a read/write way of accessing a template. This is to eliminate the need for template loading/saving\n// logic to be duplicated in every template engine (and means they can all work with anonymous templates, etc.)\n//\n// Two are provided by default:\n//  1. ko.templateSources.domElement       - reads/writes the text content of an arbitrary DOM element\n//  2. ko.templateSources.anonymousElement - uses ko.utils.domData to read/write text *associated* with the DOM element, but\n//                                           without reading/writing the actual element text content, since it will be overwritten\n//                                           with the rendered template output.\n// You can implement your own template source if you want to fetch/store templates somewhere other than in DOM elements.\n// Template sources need to have the following functions:\n//   text() \t\t\t- returns the template text from your storage location\n//   text(value)\t\t- writes the supplied template text to your storage location\n//   data(key)\t\t\t- reads values stored using data(key, value) - see below\n//   data(key, value)\t- associates \"value\" with this template and the key \"key\". Is used to store information like \"isRewritten\".\n//\n// Optionally, template sources can also have the following functions:\n//   nodes()            - returns a DOM element containing the nodes of this template, where available\n//   nodes(value)       - writes the given DOM element to your storage location\n// If a DOM element is available for a given template source, template engines are encouraged to use it in preference over text()\n// for improved speed. However, all templateSources must supply text() even if they don't supply nodes().\n//\n// Once you've implemented a templateSource, make your template engine use it by subclassing whatever template engine you were\n// using and overriding \"makeTemplateSource\" to return an instance of your custom template source.\n\nimport {\n    tagNameLower as tagNameLowerFn, setHtml, domData\n} from 'tko.utils';\n\n\n// ---- ko.templateSources.domElement -----\n\n// template types\nvar templateScript = 1,\n    templateTextArea = 2,\n    templateTemplate = 3,\n    templateElement = 4;\n\nexport function domElement(element) {\n    this.domElement = element;\n\n    if (!element) { return; }\n    var tagNameLower = tagNameLowerFn(element);\n    this.templateType =\n        tagNameLower === \"script\" ? templateScript :\n        tagNameLower === \"textarea\" ? templateTextArea :\n            // For browsers with proper <template> element support, where the .content property gives a document fragment\n        tagNameLower == \"template\" && element.content && element.content.nodeType === 11 ? templateTemplate :\n        templateElement;\n}\n\ndomElement.prototype.text = function(/* valueToWrite */) {\n    var elemContentsProperty = this.templateType === templateScript ? \"text\"\n                             : this.templateType === templateTextArea ? \"value\"\n                             : \"innerHTML\";\n\n    if (arguments.length == 0) {\n        return this.domElement[elemContentsProperty];\n    } else {\n        var valueToWrite = arguments[0];\n        if (elemContentsProperty === \"innerHTML\")\n            setHtml(this.domElement, valueToWrite);\n        else\n            this.domElement[elemContentsProperty] = valueToWrite;\n    }\n};\n\nvar dataDomDataPrefix = domData.nextKey() + \"_\";\ndomElement.prototype.data = function(key /*, valueToWrite */) {\n    if (arguments.length === 1) {\n        return domData.get(this.domElement, dataDomDataPrefix + key);\n    } else {\n        domData.set(this.domElement, dataDomDataPrefix + key, arguments[1]);\n    }\n};\n\nvar templatesDomDataKey = domData.nextKey();\nfunction getTemplateDomData(element) {\n    return domData.get(element, templatesDomDataKey) || {};\n}\nfunction setTemplateDomData(element, data) {\n    domData.set(element, templatesDomDataKey, data);\n}\n\ndomElement.prototype.nodes = function(/* valueToWrite */) {\n    var element = this.domElement;\n    if (arguments.length == 0) {\n        var templateData = getTemplateDomData(element),\n            containerData = templateData.containerData;\n        return containerData || (\n            this.templateType === templateTemplate ? element.content :\n            this.templateType === templateElement ? element :\n            undefined);\n    } else {\n        var valueToWrite = arguments[0];\n        setTemplateDomData(element, {containerData: valueToWrite});\n    }\n};\n\n// ---- ko.templateSources.anonymousTemplate -----\n// Anonymous templates are normally saved/retrieved as DOM nodes through \"nodes\".\n// For compatibility, you can also read \"text\"; it will be serialized from the nodes on demand.\n// Writing to \"text\" is still supported, but then the template data will not be available as DOM nodes.\n\nexport function anonymousTemplate(element) {\n    this.domElement = element;\n}\n\nanonymousTemplate.prototype = new domElement();\nanonymousTemplate.prototype.constructor = anonymousTemplate;\nanonymousTemplate.prototype.text = function(/* valueToWrite */) {\n    if (arguments.length == 0) {\n        var templateData = getTemplateDomData(this.domElement);\n        if (templateData.textData === undefined && templateData.containerData)\n            templateData.textData = templateData.containerData.innerHTML;\n        return templateData.textData;\n    } else {\n        var valueToWrite = arguments[0];\n        setTemplateDomData(this.domElement, {textData: valueToWrite});\n    }\n};\n","// If you want to make a custom template engine,\n//\n// [1] Inherit from this class (like ko.nativeTemplateEngine does)\n// [2] Override 'renderTemplateSource', supplying a function with this signature:\n//\n//        function (templateSource, bindingContext, options) {\n//            // - templateSource.text() is the text of the template you should render\n//            // - bindingContext.$data is the data you should pass into the template\n//            //   - you might also want to make bindingContext.$parent, bindingContext.$parents,\n//            //     and bindingContext.$root available in the template too\n//            // - options gives you access to any other properties set on \"data-bind: { template: options }\"\n//            // - templateDocument is the document object of the template\n//            //\n//            // Return value: an array of DOM nodes\n//        }\n//\n// [3] Override 'createJavaScriptEvaluatorBlock', supplying a function with this signature:\n//\n//        function (script) {\n//            // Return value: Whatever syntax means \"Evaluate the JavaScript statement 'script' and output the result\"\n//            //               For example, the jquery.tmpl template engine converts 'someScript' to '${ someScript }'\n//        }\n//\n//     This is only necessary if you want to allow data-bind attributes to reference arbitrary template variables.\n//     If you don't want to allow that, you can set the property 'allowTemplateRewriting' to false (like ko.nativeTemplateEngine does)\n//     and then you don't need to override 'createJavaScriptEvaluatorBlock'.\n\nimport {\n  extend, options\n} from 'tko.utils';\n\nimport {\n  domElement, anonymousTemplate\n} from './templateSources';\n\nexport function templateEngine() { };\n\nextend(templateEngine.prototype, {\n  renderTemplateSource: function (templateSource, bindingContext, options, templateDocument) {\n      options.onError(\"Override renderTemplateSource\");\n  },\n\n  createJavaScriptEvaluatorBlock: function (script) {\n      options.onError(\"Override createJavaScriptEvaluatorBlock\");\n  },\n\n  makeTemplateSource: function(template, templateDocument) {\n      // Named template\n      if (typeof template == \"string\") {\n          templateDocument = templateDocument || document;\n          var elem = templateDocument.getElementById(template);\n          if (!elem)\n              options.onError(\"Cannot find template with ID \" + template);\n          return new domElement(elem);\n      } else if ((template.nodeType == 1) || (template.nodeType == 8)) {\n          // Anonymous template\n          return new anonymousTemplate(template);\n      } else\n          options.onError(\"Unknown template type: \" + template);\n  },\n\n  renderTemplate: function (template, bindingContext, options, templateDocument) {\n      var templateSource = this['makeTemplateSource'](template, templateDocument);\n      return this.renderTemplateSource(templateSource, bindingContext, options, templateDocument);\n  }\n})\n","import {\n    virtualElements, fixUpContinuousNodeArray, replaceDomNodes, memoization,\n    domNodeIsAttachedToDocument, moveCleanedNodesToContainerElement,\n    arrayFilter, domData, options\n} from 'tko.utils'\n\nimport {\n    applyBindings, setDomNodeChildrenFromArrayMapping, AsyncBindingHandler,\n    bindingContext as BindingContextConstructor\n} from 'tko.bind'\n\nimport {\n    computed\n} from 'tko.computed'\n\nimport {\n    isObservable, dependencyDetection, unwrap, observable\n} from 'tko.observable'\n\nimport {\n    templateEngine\n} from './templateEngine'\n\nimport {\n  anonymousTemplate as AnonymousTemplate\n} from './templateSources'\n\nvar _templateEngine\n\nexport function setTemplateEngine (tEngine) {\n  if ((tEngine !== undefined) && !(tEngine instanceof templateEngine)) {\n        // TODO: ko.templateEngine to appropriate name\n    throw new Error('templateEngine must inherit from ko.templateEngine')\n  }\n  _templateEngine = tEngine\n}\n\nfunction invokeForEachNodeInContinuousRange (firstNode, lastNode, action) {\n  let node\n  let nextInQueue = firstNode\n  let firstOutOfRangeNode = virtualElements.nextSibling(lastNode)\n  while (nextInQueue && ((node = nextInQueue) !== firstOutOfRangeNode)) {\n    nextInQueue = virtualElements.nextSibling(node)\n    action(node, nextInQueue)\n  }\n}\n\nfunction activateBindingsOnContinuousNodeArray (continuousNodeArray, bindingContext, afterBindingCallback) {\n  // To be used on any nodes that have been rendered by a template and have been inserted into some parent element\n  // Walks through continuousNodeArray (which *must* be continuous, i.e., an uninterrupted sequence of sibling nodes, because\n  // the algorithm for walking them relies on this), and for each top-level item in the virtual-element sense,\n  // (1) Does a regular \"applyBindings\" to associate bindingContext with this node and to activate any non-memoized bindings\n  // (2) Unmemoizes any memos in the DOM subtree (e.g., to activate bindings that had been memoized during template rewriting)\n\n  if (continuousNodeArray.length) {\n    var firstNode = continuousNodeArray[0]\n    var lastNode = continuousNodeArray[continuousNodeArray.length - 1]\n    var parentNode = firstNode.parentNode\n    var provider = options.bindingProviderInstance\n    var preprocessNode = provider.preprocessNode\n\n    if (preprocessNode) {\n      invokeForEachNodeInContinuousRange(firstNode, lastNode, function (node, nextNodeInRange) {\n        var nodePreviousSibling = node.previousSibling\n        var newNodes = preprocessNode.call(provider, node)\n        if (newNodes) {\n          if (node === firstNode) { firstNode = newNodes[0] || nextNodeInRange }\n          if (node === lastNode) { lastNode = newNodes[newNodes.length - 1] || nodePreviousSibling }\n        }\n      })\n\n      // Because preprocessNode can change the nodes, including the first and last nodes, update continuousNodeArray to match.\n      // We need the full set, including inner nodes, because the unmemoize step might remove the first node (and so the real\n      // first node needs to be in the array).\n      continuousNodeArray.length = 0\n      if (!firstNode) { // preprocessNode might have removed all the nodes, in which case there's nothing left to do\n        return\n      }\n      if (firstNode === lastNode) {\n        continuousNodeArray.push(firstNode)\n      } else {\n        continuousNodeArray.push(firstNode, lastNode)\n        fixUpContinuousNodeArray(continuousNodeArray, parentNode)\n      }\n    }\n\n    // Need to applyBindings *before* unmemoziation, because unmemoization might introduce extra nodes (that we don't want to re-bind)\n    // whereas a regular applyBindings won't introduce new memoized nodes\n    invokeForEachNodeInContinuousRange(firstNode, lastNode, function (node) {\n      if (node.nodeType === 1 || node.nodeType === 8) { applyBindings(bindingContext, node).then(afterBindingCallback) }\n    })\n    invokeForEachNodeInContinuousRange(firstNode, lastNode, function (node) {\n      if (node.nodeType === 1 || node.nodeType === 8) { memoization.unmemoizeDomNodeAndDescendants(node, [bindingContext]) }\n    })\n\n    // Make sure any changes done by applyBindings or unmemoize are reflected in the array\n    fixUpContinuousNodeArray(continuousNodeArray, parentNode)\n  }\n}\n\nfunction getFirstNodeFromPossibleArray (nodeOrNodeArray) {\n  return nodeOrNodeArray.nodeType ? nodeOrNodeArray\n                                    : nodeOrNodeArray.length > 0 ? nodeOrNodeArray[0]\n                                    : null\n}\n\nfunction executeTemplate (targetNodeOrNodeArray, renderMode, template, bindingContext, options, afterBindingCallback) {\n  options = options || {}\n  var firstTargetNode = targetNodeOrNodeArray && getFirstNodeFromPossibleArray(targetNodeOrNodeArray)\n  var templateDocument = (firstTargetNode || template || {}).ownerDocument\n  var templateEngineToUse = (options.templateEngine || _templateEngine)\n  var renderedNodesArray = templateEngineToUse.renderTemplate(template, bindingContext, options, templateDocument)\n\n    // Loosely check result is an array of DOM nodes\n  if ((typeof renderedNodesArray.length !== 'number') || (renderedNodesArray.length > 0 && typeof renderedNodesArray[0].nodeType !== 'number')) { throw new Error('Template engine must return an array of DOM nodes') }\n\n  var haveAddedNodesToParent = false\n  switch (renderMode) {\n    case 'replaceChildren':\n      virtualElements.setDomNodeChildren(targetNodeOrNodeArray, renderedNodesArray)\n      haveAddedNodesToParent = true\n      break\n    case 'replaceNode':\n      replaceDomNodes(targetNodeOrNodeArray, renderedNodesArray)\n      haveAddedNodesToParent = true\n      break\n    case 'ignoreTargetNode': break\n    default:\n      throw new Error('Unknown renderMode: ' + renderMode)\n  }\n\n  if (haveAddedNodesToParent) {\n    activateBindingsOnContinuousNodeArray(renderedNodesArray, bindingContext, afterBindingCallback)\n    if (options.afterRender) { dependencyDetection.ignore(options.afterRender, null, [renderedNodesArray, bindingContext['$data']]) }\n  }\n\n  return renderedNodesArray\n}\n\nfunction resolveTemplateName (template, data, context) {\n    // The template can be specified as:\n  if (isObservable(template)) {\n    // 1. An observable, with string value\n    return template()\n  } else if (typeof template === 'function') {\n    // 2. A function of (data, context) returning a string\n    return template(data, context)\n  } else {\n    // 3. A string\n    return template\n  }\n}\n\nexport function renderTemplate (template, dataOrBindingContext, options, targetNodeOrNodeArray, renderMode, afterBindingCallback) {\n  options = options || {}\n  if ((options.templateEngine || _templateEngine) === undefined) { throw new Error('Set a template engine before calling renderTemplate') }\n  renderMode = renderMode || 'replaceChildren'\n\n  if (targetNodeOrNodeArray) {\n    var firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray)\n\n    var whenToDispose = function () { return (!firstTargetNode) || !domNodeIsAttachedToDocument(firstTargetNode) } // Passive disposal (on next evaluation)\n    var activelyDisposeWhenNodeIsRemoved = (firstTargetNode && renderMode === 'replaceNode') ? firstTargetNode.parentNode : firstTargetNode\n\n    return computed( // So the DOM is automatically updated when any dependency changes\n      function () {\n        // Ensure we've got a proper binding context to work with\n        var bindingContext = (dataOrBindingContext && (dataOrBindingContext instanceof BindingContextConstructor))\n              ? dataOrBindingContext\n              : new BindingContextConstructor(dataOrBindingContext, null, null, null, { 'exportDependencies': true })\n\n        var templateName = resolveTemplateName(template, bindingContext.$data, bindingContext)\n        const renderedNodesArray = executeTemplate(targetNodeOrNodeArray, renderMode, templateName, bindingContext, options, afterBindingCallback)\n\n        if (renderMode === 'replaceNode') {\n          targetNodeOrNodeArray = renderedNodesArray\n          firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray)\n        }\n      },\n      null,\n      { disposeWhen: whenToDispose, disposeWhenNodeIsRemoved: activelyDisposeWhenNodeIsRemoved }\n    )\n  } else {\n        // We don't yet have a DOM node to evaluate, so use a memo and render the template later when there is a DOM node\n    return memoization.memoize(function (domNode) {\n      renderTemplate(template, dataOrBindingContext, options, domNode, 'replaceNode')\n    })\n  }\n}\n\nexport default function renderTemplateForEach (template, arrayOrObservableArray, options, targetNode, parentBindingContext, afterBindingCallback) {\n    // Since setDomNodeChildrenFromArrayMapping always calls executeTemplateForArrayItem and then\n    // activateBindingsCallback for added items, we can store the binding context in the former to use in the latter.\n  var arrayItemContext\n\n    // This will be called by setDomNodeChildrenFromArrayMapping to get the nodes to add to targetNode\n  function executeTemplateForArrayItem (arrayValue, index) {\n        // Support selecting template as a function of the data being rendered\n    arrayItemContext = parentBindingContext['createChildContext'](arrayValue, options['as'], function (context) {\n      context['$index'] = index\n    })\n\n    var templateName = resolveTemplateName(template, arrayValue, arrayItemContext)\n    return executeTemplate(null, 'ignoreTargetNode', templateName, arrayItemContext, options, afterBindingCallback)\n  }\n\n    // This will be called whenever setDomNodeChildrenFromArrayMapping has added nodes to targetNode\n  var activateBindingsCallback = function (arrayValue, addedNodesArray /*, index */) {\n    activateBindingsOnContinuousNodeArray(addedNodesArray, arrayItemContext, afterBindingCallback)\n    if (options['afterRender']) { options['afterRender'](addedNodesArray, arrayValue) }\n\n        // release the \"cache\" variable, so that it can be collected by\n        // the GC when its value isn't used from within the bindings anymore.\n    arrayItemContext = null\n  }\n\n  return computed(function () {\n    var unwrappedArray = unwrap(arrayOrObservableArray) || []\n    if (typeof unwrappedArray.length !== 'number') { unwrappedArray = [unwrappedArray] }\n\n    // Filter out any entries marked as destroyed\n    var filteredArray = arrayFilter(unwrappedArray, function (item) {\n      return options['includeDestroyed'] || item === undefined || item === null || !unwrap(item['_destroy'])\n    })\n\n    // Call setDomNodeChildrenFromArrayMapping, ignoring any observables unwrapped within (most likely from a callback function).\n    // If the array items are observables, though, they will be unwrapped in executeTemplateForArrayItem and managed within setDomNodeChildrenFromArrayMapping.\n    dependencyDetection.ignore(setDomNodeChildrenFromArrayMapping, null, [targetNode, filteredArray, executeTemplateForArrayItem, options, activateBindingsCallback])\n  }, null, { disposeWhenNodeIsRemoved: targetNode })\n}\n\nlet templateComputedDomDataKey = domData.nextKey()\n\nexport class TemplateBindingHandler extends AsyncBindingHandler {\n  constructor (params) {\n    super(params)\n    const element = this.$element\n    const bindingValue = unwrap(this.value)\n    let container\n\n    // Expose 'conditional' for `else` chaining.\n    domData.set(element, 'conditional', {\n      elseChainSatisfied: observable(true)\n    })\n\n    // Support anonymous templates\n    if (typeof bindingValue === 'string' || bindingValue.name) {\n            // It's a named template - clear the element\n      virtualElements.emptyNode(element)\n    } else if ('nodes' in bindingValue) {\n            // We've been given an array of DOM nodes. Save them as the template source.\n            // There is no known use case for the node array being an observable array (if the output\n            // varies, put that behavior *into* your template - that's what templates are for), and\n            // the implementation would be a mess, so assert that it's not observable.\n      var nodes = bindingValue.nodes || []\n      if (isObservable(nodes)) {\n        throw new Error('The \"nodes\" option must be a plain, non-observable array.')\n      }\n      container = moveCleanedNodesToContainerElement(nodes) // This also removes the nodes from their current parent\n      new AnonymousTemplate(element)['nodes'](container)\n    } else {\n            // It's an anonymous template - store the element contents, then clear the element\n      const templateNodes = virtualElements.childNodes(element)\n      container = moveCleanedNodesToContainerElement(templateNodes) // This also removes the nodes from their current parent\n      new AnonymousTemplate(element).nodes(container)\n    }\n    this.computed(this.onValueChange.bind(this))\n  }\n\n  onValueChange () {\n    const element = this.$element\n    const bindingContext = this.$context\n    var value = this.value\n    var options = unwrap(value)\n    var shouldDisplay = true\n    var templateComputed = null\n    var elseChainSatisfied = domData.get(element, 'conditional').elseChainSatisfied\n    var templateName\n\n    if (typeof options === 'string') {\n      templateName = value\n      options = {}\n    } else {\n      templateName = options.name\n\n      // Support \"if\"/\"ifnot\" conditions\n      if ('if' in options) {\n        shouldDisplay = unwrap(options.if)\n      }\n\n      if (shouldDisplay && 'ifnot' in options) {\n        shouldDisplay = !unwrap(options.ifnot)\n      }\n    }\n\n    if ('foreach' in options) {\n      // Render once for each data point (treating data set as empty if shouldDisplay==false)\n      var dataArray = (shouldDisplay && options.foreach) || []\n      templateComputed = renderTemplateForEach(templateName || element, dataArray, options, element, bindingContext, this.completeBinding)\n\n      elseChainSatisfied((unwrap(dataArray) || []).length !== 0)\n    } else if (shouldDisplay) {\n      // Render once for this single data point (or use the viewModel if no data was provided)\n      var innerBindingContext = ('data' in options)\n        ? bindingContext.createStaticChildContext(options.data, options.as)  // Given an explitit 'data' value, we create a child binding context for it\n        : bindingContext                                                        // Given no explicit 'data' value, we retain the same binding context\n      templateComputed = renderTemplate(templateName || element, innerBindingContext, options, element, undefined, this.completeBinding)\n      elseChainSatisfied(true)\n    } else {\n      virtualElements.emptyNode(element)\n      elseChainSatisfied(false)\n    }\n\n    // It only makes sense to have a single template computed per element (otherwise which one should have its output displayed?)\n    this.disposeOldComputedAndStoreNewOne(element, templateComputed)\n  }\n\n  disposeOldComputedAndStoreNewOne (element, newComputed) {\n    let oldComputed = domData.get(element, templateComputedDomDataKey)\n    if (oldComputed && (typeof oldComputed.dispose === 'function')) { oldComputed.dispose() }\n    domData.set(element, templateComputedDomDataKey, (newComputed && newComputed.isActive()) ? newComputed : undefined)\n  }\n\n  get controlsDescendants () { return true }\n  static get allowVirtualElements () { return true }\n}\n","\nimport {\n  extend, options, ieVersion, makeArray, parseHtmlFragment\n} from 'tko.utils';\n\nimport {\n  templateEngine\n} from './templateEngine'\n\nimport {\n  setTemplateEngine\n} from './templating'\n\nexport function nativeTemplateEngine () {\n}\n\nnativeTemplateEngine.prototype = new templateEngine();\nnativeTemplateEngine.prototype.constructor = nativeTemplateEngine;\nnativeTemplateEngine.prototype.renderTemplateSource = function(templateSource, bindingContext, options, templateDocument) {\n    var useNodesIfAvailable = !(ieVersion < 9), // IE<9 cloneNode doesn't work properly\n        templateNodesFunc = useNodesIfAvailable ? templateSource.nodes : null,\n        templateNodes = templateNodesFunc ? templateSource.nodes() : null;\n\n    if (templateNodes) {\n        return makeArray(templateNodes.cloneNode(true).childNodes);\n    } else {\n        var templateText = templateSource.text();\n        return parseHtmlFragment(templateText, templateDocument);\n    }\n};\n\n\nnativeTemplateEngine.instance = new nativeTemplateEngine();\nsetTemplateEngine(nativeTemplateEngine.instance);\n","\nimport {\n    cloneNodes, virtualElements, cleanNode, domData\n} from 'tko.utils'\n\nimport {\n    unwrap, dependencyDetection, observable\n} from 'tko.observable'\n\nimport {\n    applyBindingsToDescendants, AsyncBindingHandler\n} from 'tko.bind'\n\n/**\n * Test a node for whether it represents an \"else\" condition.\n * @param  {HTMLElement}  node to be tested\n * @return {Boolean}      true when\n *\n * Matches <!-- else -->\n */\nfunction isElseNode (node) {\n  return node.nodeType === 8 &&\n        node.nodeValue.trim().toLowerCase() === 'else'\n}\n\nfunction detectElse (element) {\n  var children = virtualElements.childNodes(element)\n  for (var i = 0, j = children.length; i < j; ++i) {\n    if (isElseNode(children[i])) { return true }\n  }\n  return false\n}\n\n/**\n * Clone the nodes, returning `ifNodes`, `elseNodes`\n * @param  {HTMLElement} element The nodes to be cloned\n * @param  {boolean}    hasElse short-circuit to speed up the inner-loop.\n * @return {object}         Containing the cloned nodes.\n */\nfunction cloneIfElseNodes (element, hasElse) {\n  const children = virtualElements.childNodes(element)\n  const ifNodes = []\n  const elseNodes = []\n  let target = ifNodes\n\n  for (var i = 0, j = children.length; i < j; ++i) {\n    if (hasElse && isElseNode(children[i])) {\n      target = elseNodes\n      hasElse = false\n    } else {\n      target.push(cleanNode(children[i].cloneNode(true)))\n    }\n  }\n\n  return { ifNodes, elseNodes }\n}\n\n/**\n * Create a DOMbinding that controls DOM nodes presence\n *\n * Covers e.g.\n *\n * 1. DOM Nodes contents\n *\n * <div data-bind='if: x'>\n * <!-- else --> ... an optional \"if\"\n * </div>\n *\n * 2. Virtual elements\n *\n * <!-- ko if: x -->\n * <!-- else -->\n * <!-- /ko -->\n *\n * 3. Else binding\n * <div data-bind='if: x'></div>\n * <div data-bind='else'></div>\n */\nclass ConditionalBindingHandler extends AsyncBindingHandler {\n  constructor (params) {\n    super(params)\n    this.hasElse = detectElse(this.$element)\n    const elseChainSatisfied = this.completesElseChain = observable()\n\n    domData.set(this.$element, 'conditional', { elseChainSatisfied })\n\n    this.computed(this.render.bind(this))\n  }\n\n  get elseChainIsAlreadySatisfied () { return false }\n  get needsRefresh () {\n    return this.isFirstRender || this.shouldDisplayIf !== this.didDisplayOnLastUpdate\n  }\n  get shouldDisplayIf () { return !!unwrap(this.value) }\n\n  getIfElseNodes () {\n    if (this.ifElseNodes) { return this.ifElseNodes }\n    if (dependencyDetection.getDependenciesCount() || this.hasElse) {\n      return cloneIfElseNodes(this.$element, this.hasElse)\n    }\n  }\n\n  render () {\n    // Create any dependencies on values created in value-functions.\n    if (typeof this.value === 'function') { this.value() }\n    const isFirstRender = !this.ifElseNodes\n    let shouldDisplayIf = this.shouldDisplayIf\n    let needsRefresh = this.needsRefresh\n\n    if (this.elseChainIsAlreadySatisfied) {\n      shouldDisplayIf = false\n      needsRefresh = isFirstRender || this.didDisplayOnLastUpdate\n      this.completesElseChain(true)\n    } else {\n      this.completesElseChain(this.shouldDisplayIf)\n    }\n\n    if (!needsRefresh) { return }\n\n    this.ifElseNodes = this.getIfElseNodes()\n\n    if (shouldDisplayIf) {\n      if (!isFirstRender || this.hasElse) {\n        virtualElements.setDomNodeChildren(this.$element, cloneNodes(this.ifElseNodes.ifNodes))\n      }\n    } else if (this.ifElseNodes) {\n      virtualElements.setDomNodeChildren(this.$element, cloneNodes(this.ifElseNodes.elseNodes))\n    } else {\n      virtualElements.emptyNode(this.$element)\n    }\n\n    applyBindingsToDescendants(this.bindingContext, this.$element)\n      .then(this.completeBinding)\n\n    this.didDisplayOnLastUpdate = shouldDisplayIf\n  }\n\n  get bindingContext () { return this.$context }\n  get controlsDescendants () { return true }\n  static get allowVirtualElements () { return true }\n}\n\nexport class IfBindingHandler extends ConditionalBindingHandler {}\n\nexport class UnlessBindingHandler extends ConditionalBindingHandler {\n  get shouldDisplayIf () { return !super.shouldDisplayIf }\n}\n\nexport class ElseBindingHandler extends ConditionalBindingHandler {\n  get shouldDisplayIf () { return super.shouldDisplayIf || this.value === undefined }\n\n  /**\n   * Return any conditional that precedes the given node.\n   * @return {object}      { elseChainSatisfied: observable }\n   */\n  get elseChainIsAlreadySatisfied () {\n    if (!this._elseChain) { this._elseChain = this.readElseChain() }\n    return unwrap(this._elseChain.elseChainSatisfied)\n  }\n\n  readElseChain () {\n    let node = this.$element\n    do {\n      node = node.previousSibling\n    } while (node && node.nodeType !== 1 && node.nodeType !== 8)\n\n    if (!node) { return false }\n\n    if (node.nodeType === 8) {\n      node = virtualElements.previousSibling(node)\n    }\n\n    return domData.get(node, 'conditional') || {}\n  }\n}\n\nexport class WithBindingHandler extends ConditionalBindingHandler {\n  get needsRefresh () { return true }\n  get bindingContext () {\n    return this.$context.createStaticChildContext(this.value)\n  }\n}\n\n","// index.js\n// --------\n// Fast For Each\n//\n// Employing sound techniques to make a faster Knockout foreach binding.\n// --------\n\nimport {\n  arrayForEach, cleanNode, options, virtualElements,\n  createSymbolOrString, domData, domNodeIsContainedBy\n} from 'tko.utils'\n\nimport {\n  isObservable, unwrap, observable\n} from 'tko.observable'\n\nimport {\n  contextFor, applyBindingsToDescendants, AsyncBindingHandler\n} from 'tko.bind'\n\n//      Utilities\nconst MAX_LIST_SIZE = 9007199254740991\n\n// from https://github.com/jonschlinkert/is-plain-object\nfunction isPlainObject (o) {\n  return !!o && typeof o === 'object' && o.constructor === Object\n}\n\nconst supportsDocumentFragment = options.document && typeof options.document.createDocumentFragment === 'function'\n\n// Get a copy of the (possibly virtual) child nodes of the given element,\n// put them into a container, then empty the given node.\nfunction makeTemplateNode (sourceNode) {\n  var container = document.createElement('div')\n  var parentNode\n  if (sourceNode.content) {\n    // For e.g. <template> tags\n    parentNode = sourceNode.content\n  } else if (sourceNode.tagName === 'SCRIPT') {\n    parentNode = document.createElement('div')\n    parentNode.innerHTML = sourceNode.text\n  } else {\n    // Anything else e.g. <div>\n    parentNode = sourceNode\n  }\n  arrayForEach(virtualElements.childNodes(parentNode), function (child) {\n    // FIXME - This cloneNode could be expensive; we may prefer to iterate over the\n    // parentNode children in reverse (so as not to foul the indexes as childNodes are\n    // removed from parentNode when inserted into the container)\n    if (child) {\n      container.insertBefore(child.cloneNode(true), null)\n    }\n  })\n  return container\n}\n\n// Mimic a KO change item 'add'\nfunction valueToChangeAddItem (value, index) {\n  return {\n    status: 'added',\n    value: value,\n    index: index\n  }\n}\n\n// store a symbol for caching the pending delete info index in the data item objects\nconst PENDING_DELETE_INDEX_SYM = createSymbolOrString('_ko_ffe_pending_delete_index')\n\n// Extend the given context with a $index (passed in via the createChildContext)\nfunction extend$context (include$index, $context) {\n  if (include$index) { $context.$index = observable() }\n  $context.$list = this.data\n}\n\nexport class ForEachBinding extends AsyncBindingHandler {\n  // NOTE: valid valueAccessors include:\n  //    []\n  //    observable([])\n  //    observableArray([])\n  //    computed\n  //    {data: array, name: string, as: string}\n\n  constructor (params) {\n    super(params)\n    const settings = {}\n    if (isPlainObject(this.value)) {\n      Object.assign(settings, this.value)\n    }\n\n    this.noIndex = settings.noIndex || this.allBindings.get('noIndex')\n    this.as = settings.as || this.allBindings.get('as')\n\n    this.data = settings.data || (unwrap(this.$context.$rawData) === this.value ? this.$context.$rawData : this.value)\n\n    this.container = virtualElements.isStartComment(this.$element)\n                     ? this.$element.parentNode : this.$element\n    this.generateContext = this.createContextGenerator(this.as, !this.noIndex)\n    if (this.noIndex) { this.updateIndexes = false }\n\n    this.templateNode = makeTemplateNode(\n      settings.templateNode || (settings.name\n        ? document.getElementById(settings.name).cloneNode(true)\n        : this.$element)\n    )\n\n    ;['afterAdd', 'beforeRemove', 'afterQueueFlush', 'beforeQueueFlush']\n      .forEach(p => { this[p] = settings[p] || this.allBindings.get(p) })\n\n    this.changeQueue = []\n    this.firstLastNodesList = []\n    this.indexesToDelete = []\n    this.rendering_queued = false\n    this.pendingDeletes = []\n\n    // Expose the conditional so that if the `foreach` data is empty, successive\n    // 'else' bindings will appear.\n    this.isNotEmpty = observable(Boolean(unwrap(this.data).length))\n    domData.set(this.$element, 'conditional', {\n      elseChainSatisfied: this.isNotEmpty\n    })\n\n    // Remove existing content.\n    virtualElements.emptyNode(this.$element)\n\n    // Prime content\n    const primeData = unwrap(this.data)\n    if (primeData.map) {\n      this.onArrayChange(primeData.map(valueToChangeAddItem), true)\n    } else {\n      this.completeBinding()\n    }\n\n    // Watch for changes\n    if (isObservable(this.data)) {\n      if (!this.data.indexOf) {\n        // Make sure the observable is trackable.\n        this.data = this.data.extend({ trackArrayChanges: true })\n      }\n      this.changeSubs = this.data.subscribe(this.onArrayChange, this, 'arrayChange')\n    }\n  }\n\n  dispose () {\n    if (this.changeSubs) {\n      this.changeSubs.dispose()\n    }\n    this.flushPendingDeletes()\n  }\n\n  // If the array changes we register the change.\n  onArrayChange (changeSet, isInitial) {\n    var changeMap = {\n      added: [],\n      deleted: []\n    }\n\n    // knockout array change notification index handling:\n    // - sends the original array indexes for deletes\n    // - sends the new array indexes for adds\n    // - sorts them all by index in ascending order\n    // because of this, when checking for possible batch additions, any delete can be between to adds with neighboring indexes, so only additions should be checked\n    for (var i = 0, len = changeSet.length; i < len; i++) {\n      if (changeMap.added.length && changeSet[i].status === 'added') {\n        var lastAdd = changeMap.added[changeMap.added.length - 1]\n        var lastIndex = lastAdd.isBatch ? lastAdd.index + lastAdd.values.length - 1 : lastAdd.index\n        if (lastIndex + 1 === changeSet[i].index) {\n          if (!lastAdd.isBatch) {\n            // transform the last addition into a batch addition object\n            lastAdd = {\n              isBatch: true,\n              status: 'added',\n              index: lastAdd.index,\n              values: [lastAdd.value]\n            }\n            changeMap.added.splice(changeMap.added.length - 1, 1, lastAdd)\n          }\n          lastAdd.values.push(changeSet[i].value)\n          continue\n        }\n      }\n\n      changeMap[changeSet[i].status].push(changeSet[i])\n    }\n\n    if (changeMap.deleted.length > 0) {\n      this.changeQueue.push.apply(this.changeQueue, changeMap.deleted)\n      this.changeQueue.push({ status: 'clearDeletedIndexes' })\n    }\n\n    this.changeQueue.push.apply(this.changeQueue, changeMap.added)\n    // Once a change is registered, the ticking count-down starts for the processQueue.\n    if (this.changeQueue.length > 0 && !this.rendering_queued) {\n      this.rendering_queued = true\n      if (isInitial) {\n        this.processQueue()\n      } else {\n        ForEachBinding.animateFrame.call(window, () => this.processQueue())\n      }\n    }\n  }\n\n  startQueueFlush () {\n    // Callback so folks can do things before the queue flush.\n    if (typeof this.beforeQueueFlush === 'function') {\n      this.beforeQueueFlush(this.changeQueue)\n    }\n  }\n\n  endQueueFlush () {\n    // Callback so folks can do things.\n    if (typeof this.afterQueueFlush === 'function') {\n      this.afterQueueFlush(this.changeQueue)\n    }\n  }\n\n  // Reflect all the changes in the queue in the DOM, then wipe the queue.\n  processQueue () {\n    var isEmpty = !unwrap(this.data).length\n    var lowestIndexChanged = MAX_LIST_SIZE\n\n    this.startQueueFlush()\n\n    arrayForEach(this.changeQueue, (changeItem) => {\n      if (typeof changeItem.index === 'number') {\n        lowestIndexChanged = Math.min(lowestIndexChanged, changeItem.index)\n      }\n      this[changeItem.status](changeItem)\n    })\n    this.flushPendingDeletes()\n    this.rendering_queued = false\n\n    // Update our indexes.\n    if (this.updateIndexes) { this.updateIndexes(lowestIndexChanged) }\n\n    this.endQueueFlush()\n    this.changeQueue = []\n\n    // Update the conditional exposed on the domData\n    if (isEmpty !== !this.isNotEmpty()) {\n      this.isNotEmpty(!isEmpty)\n    }\n  }\n\n  /**\n   * Return a function that generates the context for a given node.\n   *\n   * We generate a single function that reduces our inner-loop calculations,\n   * which has a good chance of being optimized by the browser.\n   *\n   * @param  {string} as  The name given to each item in the list\n   * @param  {bool} index Whether to calculate indexes\n   * @return {function}   A function(dataValue) that returns the context\n   */\n  createContextGenerator (as, index) {\n    var $context = this.$context\n    switch ((as && 1) | (index && 2)) {\n      case 0: // no-as & no-index\n        return function (v) {\n          return $context.createChildContext(v, null, extend$context.bind(this, false))\n        }\n\n      case 1: // as + no-index\n        return function (v) {\n          var obj = { $index: undefined, $list: this.data }\n          obj[as] = v\n          return $context.extend(obj)\n        }\n\n      case 2: // no-as + index\n        return function (v) {\n          return $context.createChildContext(v, null, extend$context.bind(this, true))\n        }\n\n      case 3: // as + index\n        return function (v) {\n          var obj = { $index: observable(), $list: this.data }\n          obj[as] = v\n          return $context.extend(obj)\n        }\n    }\n  }\n\n  // Process a changeItem with {status: 'added', ...}\n  added (changeItem) {\n    var index = changeItem.index\n    var valuesToAdd = changeItem.isBatch ? changeItem.values : [changeItem.value]\n    var referenceElement = this.getLastNodeBeforeIndex(index)\n    // gather all childnodes for a possible batch insertion\n    const allChildNodes = []\n    const asyncBindingResults = []\n    var children\n\n    for (var i = 0, len = valuesToAdd.length; i < len; ++i) {\n      // we check if we have a pending delete with reusable nodesets for this data, and if yes, we reuse one nodeset\n      var pendingDelete = this.getPendingDeleteFor(valuesToAdd[i])\n      if (pendingDelete && pendingDelete.nodesets.length) {\n        children = pendingDelete.nodesets.pop()\n      } else {\n        var templateClone = this.templateNode.cloneNode(true)\n        // Apply bindings first, and then process child nodes,\n        // because bindings can add childnodes.\n        const bindingResult = applyBindingsToDescendants(\n          this.generateContext(valuesToAdd[i]), templateClone\n        )\n\n        asyncBindingResults.push(bindingResult)\n\n        children = virtualElements.childNodes(templateClone)\n      }\n\n      // Note discussion at https://github.com/angular/angular.js/issues/7851\n      allChildNodes.push.apply(allChildNodes, Array.prototype.slice.call(children))\n      this.firstLastNodesList.splice(index + i, 0, { first: children[0], last: children[children.length - 1] })\n    }\n\n    if (typeof this.afterAdd === 'function') {\n      this.afterAdd({\n        nodeOrArrayInserted: this.insertAllAfter(allChildNodes, referenceElement),\n        foreachInstance: this\n      })\n    } else {\n      this.insertAllAfter(allChildNodes, referenceElement)\n    }\n\n    this.completeBinding(options.Promise.all(asyncBindingResults))\n  }\n\n  getNodesForIndex (index) {\n    let result = []\n    let ptr = this.firstLastNodesList[index].first\n    let last = this.firstLastNodesList[index].last\n    result.push(ptr)\n    while (ptr && ptr !== last) {\n      ptr = ptr.nextSibling\n      result.push(ptr)\n    }\n    return result\n  }\n\n  getLastNodeBeforeIndex (index) {\n    if (index < 1 || index - 1 >= this.firstLastNodesList.length) { return null }\n    return this.firstLastNodesList[index - 1].last\n  }\n\n  /**\n   * Get the active (focused) node, if it's a child of the given node.\n   */\n  activeChildElement (node) {\n    var active = document.activeElement\n    if (domNodeIsContainedBy(active, node)) {\n      return active\n    }\n  }\n\n  insertAllAfter (nodeOrNodeArrayToInsert, insertAfterNode) {\n    let frag\n    let len\n    let i\n    let active = null\n    let containerNode = this.$element\n\n    // Poor man's node and array check.\n    if (nodeOrNodeArrayToInsert.nodeType === undefined && nodeOrNodeArrayToInsert.length === undefined) {\n      throw new Error('Expected a single node or a node array')\n    }\n    if (nodeOrNodeArrayToInsert.nodeType !== undefined) {\n      active = this.activeChildElement(nodeOrNodeArrayToInsert)\n      virtualElements.insertAfter(containerNode, nodeOrNodeArrayToInsert, insertAfterNode)\n      return [nodeOrNodeArrayToInsert]\n    } else if (nodeOrNodeArrayToInsert.length === 1) {\n      active = this.activeChildElement(nodeOrNodeArrayToInsert[0])\n      virtualElements.insertAfter(containerNode, nodeOrNodeArrayToInsert[0], insertAfterNode)\n    } else if (supportsDocumentFragment) {\n      frag = document.createDocumentFragment()\n      for (i = 0, len = nodeOrNodeArrayToInsert.length; i !== len; ++i) {\n        active = active || this.activeChildElement(nodeOrNodeArrayToInsert[i])\n        frag.appendChild(nodeOrNodeArrayToInsert[i])\n      }\n      virtualElements.insertAfter(containerNode, frag, insertAfterNode)\n    } else {\n      // Nodes are inserted in reverse order - pushed down immediately after\n      // the last node for the previous item or as the first node of element.\n      for (i = nodeOrNodeArrayToInsert.length - 1; i >= 0; --i) {\n        active = active || this.activeChildElement(nodeOrNodeArrayToInsert[i])\n        var child = nodeOrNodeArrayToInsert[i]\n        if (!child) { break }\n        virtualElements.insertAfter(containerNode, child, insertAfterNode)\n      }\n    }\n\n    if (active) { active.focus() }\n\n    return nodeOrNodeArrayToInsert\n  }\n\n  // checks if the deleted data item should be handled with delay for a possible reuse at additions\n  shouldDelayDeletion (data) {\n    return data && (typeof data === 'object' || typeof data === 'function')\n  }\n\n  // gets the pending deletion info for this data item\n  getPendingDeleteFor (data) {\n    var index = data && data[PENDING_DELETE_INDEX_SYM]\n    if (index === undefined) return null\n    return this.pendingDeletes[index]\n  }\n\n  // tries to find the existing pending delete info for this data item, and if it can't, it registeres one\n  getOrCreatePendingDeleteFor (data) {\n    var pd = this.getPendingDeleteFor(data)\n    if (pd) {\n      return pd\n    }\n    pd = {\n      data: data,\n      nodesets: []\n    }\n    data[PENDING_DELETE_INDEX_SYM] = this.pendingDeletes.length\n    this.pendingDeletes.push(pd)\n    return pd\n  }\n\n  // Process a changeItem with {status: 'deleted', ...}\n  deleted (changeItem) {\n    // if we should delay the deletion of this data, we add the nodeset to the pending delete info object\n    if (this.shouldDelayDeletion(changeItem.value)) {\n      let pd = this.getOrCreatePendingDeleteFor(changeItem.value)\n      pd.nodesets.push(this.getNodesForIndex(changeItem.index))\n    } else { // simple data, just remove the nodes\n      this.removeNodes(this.getNodesForIndex(changeItem.index))\n    }\n    this.indexesToDelete.push(changeItem.index)\n  }\n\n  // removes a set of nodes from the DOM\n  removeNodes (nodes) {\n    if (!nodes.length) { return }\n\n    function removeFn () {\n      var parent = nodes[0].parentNode\n      for (var i = nodes.length - 1; i >= 0; --i) {\n        cleanNode(nodes[i])\n        parent.removeChild(nodes[i])\n      }\n    }\n\n    if (this.beforeRemove) {\n      var beforeRemoveReturn = this.beforeRemove({\n        nodesToRemove: nodes, foreachInstance: this\n      }) || {}\n      // If beforeRemove returns a `then`–able e.g. a Promise, we remove\n      // the nodes when that thenable completes.  We pass any errors to\n      // ko.onError.\n      if (typeof beforeRemoveReturn.then === 'function') {\n        beforeRemoveReturn.then(removeFn, options.onError)\n      }\n    } else {\n      removeFn()\n    }\n  }\n\n  // flushes the pending delete info store\n  // this should be called after queue processing has finished, so that data items and remaining (not reused) nodesets get cleaned up\n  // we also call it on dispose not to leave any mess\n  flushPendingDeletes () {\n    for (let i = 0, len = this.pendingDeletes.length; i !== len; ++i) {\n      var pd = this.pendingDeletes[i]\n      while (pd.nodesets.length) {\n        this.removeNodes(pd.nodesets.pop())\n      }\n      if (pd.data && pd.data[PENDING_DELETE_INDEX_SYM] !== undefined) { delete pd.data[PENDING_DELETE_INDEX_SYM] }\n    }\n    this.pendingDeletes = []\n  }\n\n  // We batch our deletion of item indexes in our parallel array.\n  // See brianmhunt/knockout-fast-foreach#6/#8\n  clearDeletedIndexes () {\n    // We iterate in reverse on the presumption (following the unit tests) that KO's diff engine\n    // processes diffs (esp. deletes) monotonically ascending i.e. from index 0 -> N.\n    for (let i = this.indexesToDelete.length - 1; i >= 0; --i) {\n      this.firstLastNodesList.splice(this.indexesToDelete[i], 1)\n    }\n    this.indexesToDelete = []\n  }\n\n  updateIndexes (fromIndex) {\n    let ctx\n    for (let i = fromIndex, len = this.firstLastNodesList.length; i < len; ++i) {\n      ctx = this.getContextStartingFrom(this.firstLastNodesList[i].first)\n      if (ctx) { ctx.$index(i) }\n    }\n  }\n\n  getContextStartingFrom (node) {\n    let ctx\n    while (node) {\n      ctx = contextFor(node)\n      if (ctx) { return ctx }\n      node = node.nextSibling\n    }\n  }\n\n  /**\n   * Set whether the binding is always synchronous.\n   * Useful during testing.\n   */\n  static setSync (toggle) {\n    const w = options.global\n    if (toggle) {\n      ForEachBinding.animateFrame = function (frame) { frame() }\n    } else {\n      ForEachBinding.animateFrame = w.requestAnimationFrame || w.webkitRequestAnimationFrame ||\n        w.mozRequestAnimationFrame || w.msRequestAnimationFrame ||\n        function (cb) { return w.setTimeout(cb, 1000 / 60) }\n    }\n  }\n\n  get controlsDescendants () { return true }\n  static get allowVirtualElements () { return true }\n\n  /* TODO: Remove; for legacy/testing */\n  static get ForEach () { return this }\n  static get PENDING_DELETE_INDEX_SYM () { return PENDING_DELETE_INDEX_SYM }\n}\n","//\n// This becomes ko.options\n// --\n//\n// This is the root 'options', which must be extended by others.\n\nvar _global\n\ntry { _global = window } catch (e) { _global = global }\n\nvar options = {\n  deferUpdates: false,\n\n  useOnlyNativeEvents: false,\n\n  protoProperty: '__ko_proto__',\n\n    // Modify the default attribute from `data-bind`.\n  defaultBindingAttribute: 'data-bind',\n\n    // Enable/disable <!-- ko binding: ... -> style bindings\n  allowVirtualElements: true,\n\n    // Global variables that can be accessed from bindings.\n  bindingGlobals: _global,\n\n    // An instance of the binding provider.\n  bindingProviderInstance: null,\n\n    // jQuery will be automatically set to _global.jQuery in applyBindings\n    // if it is (strictly equal to) undefined.  Set it to false or null to\n    // disable automatically setting jQuery.\n  jQuery: _global && _global.jQuery,\n\n  Promise: _global && _global.Promise,\n\n  taskScheduler: null,\n\n  debug: false,\n\n  global: _global,\n  document: _global.document,\n\n    // Filters for bindings\n    //   data-bind=\"expression | filter_1 | filter_2\"\n  filters: {},\n\n  onError: function (e) { throw e },\n\n  set: function (name, value) {\n    options[name] = value\n  }\n}\n\nObject.defineProperty(options, '$', {\n  get: function () { return options.jQuery }\n})\n\nexport default options\n","//\n// Detection and Workarounds for Internet Explorer\n//\nimport options from './options'\n\n// Detect IE versions for bug workarounds (uses IE conditionals, not UA string, for robustness)\n// Note that, since IE 10 does not support conditional comments, the following logic only detects IE < 10.\n// Currently this is by design, since IE 10+ behaves correctly when treated as a standard browser.\n// If there is a future need to detect specific versions of IE10+, we will amend this.\nvar ieVersion = options.document && (function () {\n  var version = 3, div = options.document.createElement('div'), iElems = div.getElementsByTagName('i')\n\n    // Keep constructing conditional HTML blocks until we hit one that resolves to an empty fragment\n  while (\n        div.innerHTML = '<!--[if gt IE ' + (++version) + ']><i></i><![endif]-->',\n        iElems[0]\n    ) {}\n  return version > 4 ? version : undefined\n}())\n\nvar isIe6 = ieVersion === 6\nvar isIe7 = ieVersion === 7\n\nexport { ieVersion, isIe6, isIe7 }\n","//\n// jQuery\n//\n// TODO: deprecate in favour of options.$\n\nimport options from './options'\n\nexport var jQueryInstance = options.global && options.global.jQuery;\n\nexport function jQuerySetInstance(jquery) {\n    options.jQuery = jQueryInstance = jquery\n}\n","import {\n    extenders\n} from 'tko.observable';\n\nimport {\n    computed\n} from './computed.js';\n\nexport function throttleExtender(target, timeout) {\n    // Throttling means two things:\n\n    // (1) For dependent observables, we throttle *evaluations* so that, no matter how fast its dependencies\n    //     notify updates, the target doesn't re-evaluate (and hence doesn't notify) faster than a certain rate\n    target.throttleEvaluation = timeout;\n\n    // (2) For writable targets (observables, or writable dependent observables), we throttle *writes*\n    //     so the target cannot change value synchronously or faster than a certain rate\n    var writeTimeoutInstance = null;\n    return computed({\n        read: target,\n        write: function(value) {\n            clearTimeout(writeTimeoutInstance);\n            writeTimeoutInstance = setTimeout(function() {\n                target(value);\n            }, timeout);\n        }\n    });\n}\n\n\nextenders.throttle = throttleExtender;\n","\nimport {\n  unwrap\n} from 'tko.observable'\n\nimport {\n  default as operators,\n  LAMBDA\n} from './operators'\n\nconst IS_EXPR_OR_IDENT = Symbol('Node - Is Expression Or Identifier')\n\nexport default class Node {\n  constructor (lhs, op, rhs) {\n    this.lhs = lhs\n    this.op = op\n    this.rhs = rhs\n  }\n\n  static get operators () { return operators }\n\n  get_leaf_value (leaf, context, globals, node) {\n    if (typeof leaf === 'function') {\n      // Expressions on observables are nonsensical, so we unwrap any\n      // function values (e.g. identifiers).\n      return unwrap(leaf())\n    }\n\n    // primitives\n    if (typeof leaf !== 'object' || leaf === null) { return leaf }\n\n    // Identifiers and Expressions\n    if (leaf[Node.isExpressionOrIdentifierSymbol]) {\n      // lhs is passed in as the parent of the leaf. It will be defined in\n      // cases like a.b.c as 'a' for 'b' then as 'b' for 'c'.\n      return unwrap(leaf.get_value(undefined, context, globals, node))\n    }\n\n    // Plain object/class.\n    return leaf\n  }\n\n  /**\n   * Return a function that calculates and returns an expression's value\n   * when called.\n   * @param  {array} ops  The operations to perform\n   * @return {function}   The function that calculates the expression.\n   *\n   * Note that for a lambda, we do not evaluate the RHS expression until\n   * the lambda is called.\n   */\n  get_value (notused, context, globals, node) {\n    var node = this\n\n    if (node.op === LAMBDA) {\n      return () => node.get_leaf_value(node.rhs, context, globals, node)\n    }\n\n    const lhv = node.get_leaf_value(node.lhs, context, globals, node)\n    const earlyOut = node.op.earlyOut\n\n    if (earlyOut && earlyOut(lhv)) { return lhv }\n    const rhv = node.get_leaf_value(node.rhs, context, globals, node)\n\n    return node.op(lhv, rhv, context, globals)\n  }\n\n  //\n  // Class variables.\n  //\n  static get isExpressionOrIdentifierSymbol () { return IS_EXPR_OR_IDENT }\n  get [IS_EXPR_OR_IDENT] () { return true }\n\n  static value_of (item, context, globals, node) {\n    if (item && item[Node.isExpressionOrIdentifierSymbol]) {\n      return item.get_value(item, context, globals, node)\n    }\n    return item\n  }\n\n  /**\n  *  Convert an array of nodes to an executable tree.\n  *  @return {object} An object with a `lhs`, `rhs` and `op` key, corresponding\n  *                      to the left hand side, right hand side, and\n  *                      operation function.\n  */\n  static create_root (nodes) {\n    var root, leaf, op, value\n\n    // Prime the leaf = root node.\n    leaf = root = new Node(nodes.shift(), nodes.shift(), nodes.shift())\n\n    while (true) {\n      op = nodes.shift()\n      value = nodes.shift()\n      if (!op) {\n        break\n      }\n      if (op.precedence < root.op.precedence) {\n        // rebase\n        root = new Node(root, op, value)\n        leaf = root\n      } else {\n        leaf.rhs = new Node(leaf.rhs, op, value)\n        leaf = leaf.rhs\n      }\n    }\n    // console.log('tree', root)\n    return root\n  }\n}\n\n/**\n * Because of cyclical dependencies on operators <-> Node <-> value_of,\n * we need to patch this in here.\n */\noperators['?'] = function ternary (a, b, context, globals, node) {\n  return Node.value_of(a ? b.yes : b.no, context, globals, node)\n}\noperators['?'].precedence = 4\n","\nimport Node from './Node'\n\nexport default class Expression {\n  constructor (nodes) {\n    this.nodes = nodes\n    this.root = Node.create_root(nodes)\n  }\n\n  /**\n   * Return the value of `this` Expression instance.\n   */\n  get_value (parent, context, globals, node) {\n    if (!this.root) {\n      this.root = Node.create_root(this.nodes)\n    }\n    return this.root.get_value(parent, context, globals, node)\n  }\n}\n\nExpression.prototype[Node.isExpressionOrIdentifierSymbol] = true\n","\nimport Node from './Node'\n\nexport default class Arguments {\n  constructor (parser, args) {\n    this.parser = parser\n    this.args = args\n  }\n\n  get_value (parent, context, globals, node) {\n    var deReffedArgs = []\n    for (var i = 0, j = this.args.length; i < j; ++i) {\n      deReffedArgs.push(Node.value_of(this.args[i], context, globals, node))\n    }\n    return deReffedArgs\n  };\n\n  get [Node.isExpressionOrIdentifierSymbol] () { return true }\n}\n","/**\n * The following regular expressions were generated by\n *  https://mathiasbynens.be/demo/javascript-identifier-regex\n */\nexport var IDStart = /[\\$A-Z_a-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/\n\nexport var IDContinue = /[\\$0-9A-Z_a-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B4\\u08E3-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0AF9\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58-\\u0C5A\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D5F-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA8FD\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/\n","\nimport Node from './Node'\nimport Arguments from './Arguments'\n\nimport {\n  isWriteableObservable, isObservable\n} from 'tko.observable'\n\nimport {\n  IDStart, IDContinue\n} from './identifierExpressions'\n\nexport default class Identifier {\n  constructor (parser, token, dereferences) {\n    this.token = token\n    this.dereferences = dereferences\n    this.parser = parser\n  }\n\n  /**\n   * Apply all () and [] functions on the identifier to the lhs value e.g.\n   * a()[3] has deref functions that are essentially this:\n   *     [_deref_call, _deref_this where this=3]\n   *\n   * @param  {mixed} value  Should be an object.\n   * @return {mixed}        The dereferenced value.\n   *\n   * [1] We want to bind any function that is a method of an object, but not\n   *     corrupt any values (e.g. computed()s).   e.g. Running x.bind(obj) where\n   *     we're given `data-bind='binding: obj.x'` and x is a computed will\n   *     break the computed's `this` and it will stop working as expected.\n   *\n   *     The test `!last_value.hasOwnProperty(member)`\n   *     distinguishes between functions on the prototype chain (prototypal\n   *     members) and value-members added directly to the object.  This may\n   *     not be the canonical test for this relationship, but it succeeds\n   *     in the known test cases.\n   *\n   *     See: `this` tests of our dereference function.\n   */\n  dereference (value, $context, globals, node) {\n    let member\n    let refs = this.dereferences || []\n    const $data = $context.$data || {}\n    let lastValue  // becomes `this` in function calls to object properties.\n    let i, n\n\n    for (i = 0, n = refs.length; i < n; ++i) {\n      member = Node.value_of(refs[i], $context, globals, node)\n\n      if (typeof value === 'function' && refs[i] instanceof Arguments) {\n        // fn(args)\n        value = value.apply(lastValue || $data, member)\n        lastValue = value\n      } else {\n        // obj[x] or obj.x dereference.  Note that obj may be a function.\n        lastValue = value\n        value = Node.value_of(value[member], $context, globals, node)\n      }\n    }\n\n    // [1] See note above.\n    if (typeof value === 'function' && n > 0 && lastValue !== value &&\n        !lastValue.hasOwnProperty(member)) {\n      return value.bind(lastValue)\n    }\n\n    return value\n  };\n\n  /**\n   * Return the value as one would get it from the top-level i.e.\n   * $data.token/$context.token/globals.token; this does not return intermediate\n   * values on a chain of members i.e. $data.hello.there -- requesting the\n   * Identifier('there').value will return $data/$context/globals.there.\n   *\n   * This will dereference using () or [arg] member.\n   * @param  {object | Identifier | Expression} parent\n   * @return {mixed}  Return the primitive or an accessor.\n   */\n  get_value (parent, context, globals, node) {\n    const intermediate = parent && !(parent instanceof Identifier)\n      ? Node.value_of(parent, context, globals, node)[this.token]\n      : context.lookup(this.token, globals, node)\n    return this.dereference(intermediate, context, globals, node)\n  }\n\n  assign (object, property, value) {\n    if (isWriteableObservable(object[property])) {\n      object[property](value)\n    } else if (!isObservable(object[property])) {\n      object[property] = value\n    }\n  };\n\n  /**\n   * Set the value of the Identifier.\n   *\n   * @param {Mixed} new_value The value that Identifier is to be set to.\n   */\n  set_value (new_value, $context, globals) {\n    const $data = $context.$data || {}\n    const refs = this.dereferences || []\n    let leaf = this.token\n    let i, n, root\n\n    if (Object.hasOwnProperty.call($data, leaf)) {\n      root = $data\n    } else if (Object.hasOwnProperty.call($context, leaf)) {\n      root = $context\n    } else if (Object.hasOwnProperty.call(globals, leaf)) {\n      root = globals\n    } else {\n      throw new Error('Identifier::set_value -- ' +\n        \"The property '\" + leaf + \"' does not exist \" +\n        'on the $data, $context, or globals.')\n    }\n\n    // Degenerate case. {$data|$context|global}[leaf] = something;\n    n = refs.length\n    if (n === 0) {\n      this.assign(root, leaf, new_value)\n      return\n    }\n\n    // First dereference is {$data|$context|global}[token].\n    root = root[leaf]\n\n    // We cannot use this.dereference because that gives the leaf; to evoke\n    // the ES5 setter we have to call `obj[leaf] = new_value`\n    for (i = 0; i < n - 1; ++i) {\n      leaf = refs[i]\n      if (leaf instanceof Arguments) {\n        root = root()\n      } else {\n        root = root[Node.value_of(leaf)]\n      }\n    }\n\n    // We indicate that a dereference is a function when it is `true`.\n    if (refs[i] === true) {\n      throw new Error('Cannot assign a value to a function.')\n    }\n\n    // Call the setter for the leaf.\n    if (refs[i]) {\n      this.assign(root, Node.value_of(refs[i]), new_value)\n    }\n  };\n\n  /**\n   * Determine if a character is a valid item in an identifier.\n   * Note that we do not check whether the first item is a number, nor do we\n   * support unicode identifiers here.\n   *\n   * From:  http://stackoverflow.com/a/9337047\n   * @param  {String}  ch  The character\n   * @return {Boolean}     True if this is a valid identifier\n   */\n  // function is_identifier_char(ch) {\n  //   return (ch >= 'A' && ch <= 'Z') ||\n  //          (ch >= 'a' && ch <= 'z') ||\n  //          (ch >= '0' && ch <= 9) ||\n  //           ch === '_' || ch === '$';\n  // }\n  static is_valid_start_char (ch) {\n    return IDStart.test(ch)\n  }\n\n  static is_valid_continue_char (ch) {\n    return IDContinue.test(ch)\n  }\n\n  get [Node.isExpressionOrIdentifierSymbol] () { return true }\n}\n","\nimport Node from './Node'\n\nexport default class Ternary {\n  constructor (yes, no) {\n    Object.assign(this, {yes, no})\n  }\n\n  get_value () { return this }\n\n  get [Node.isExpressionOrIdentifierSymbol] () { return true }\n}\n","/**\n * Originally based on (public domain):\n * https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n */\n\nimport {\n  options, objectForEach, clonePlainObjectDeep, extend\n} from 'tko.utils'\n\nimport {default as Expression} from './Expression'\nimport {default as Identifier} from './Identifier'\nimport {default as Arguments} from './Arguments'\nimport {default as Ternary} from './Ternary'\nimport {default as Node} from './Node'\nimport {default as operators} from './operators'\n\nconst escapee = {\n  \"'\": \"'\",\n  '\"': '\"',\n  '`': '`',\n  '\\\\': '\\\\',\n  '/': '/',\n  '$': '$',\n  b: '\\b',\n  f: '\\f',\n  n: '\\n',\n  r: '\\r',\n  t: '\\t'\n}\n\n/**\n * Construct a new Parser instance with new Parser(node, context)\n * @param {Node} node    The DOM element from which we parsed the\n *                         content.\n * @param {object} context The Knockout context.\n * @param {object} globals An object containing any desired globals.\n */\nexport default class Parser {\n  white () {\n    var ch = this.ch\n    while (ch && ch <= ' ') {\n      ch = this.next()\n    }\n    return this.comment(ch)\n  }\n\n/**\n * Slurp any C or C++ style comments\n */\n  comment (ch) {\n    if (ch !== '/') { return ch }\n    var p = this.at\n    var second = this.lookahead()\n    if (second === '/') {\n      while (ch) {\n        ch = this.next()\n        if (ch === '\\n' || ch === '\\r') { break }\n      }\n      ch = this.next()\n    } else if (second === '*') {\n      while (ch) {\n        ch = this.next()\n        if (ch === '*' && this.lookahead() === '/') {\n          this.next()\n          break\n        }\n      }\n      if (!ch) {\n        this.error('Unclosed comment, starting at character ' + p)\n      }\n      this.next()\n      return this.white()\n    }\n    return ch\n  };\n\n  next (c) {\n    if (c && c !== this.ch) {\n      this.error(\"Expected '\" + c + \"' but got '\" + this.ch + \"'\")\n    }\n    this.ch = this.text.charAt(this.at)\n    this.at += 1\n    return this.ch\n  }\n\n  lookahead () {\n    return this.text[this.at]\n  }\n\n  error (m) {\n    if (m instanceof Error) { throw m }\n    let [name, msg] = m.name ? [m.name, m.message] : [m, '']\n    const message = `\\n${name} ${msg} of\n    ${this.text}\\n` + Array(this.at).join(' ') + '_/ 🔥 \\\\_\\n'\n    throw new Error(message)\n  }\n\n  name () {\n  // A name of a binding\n    var name = ''\n    var enclosedBy\n    this.white()\n\n    var ch = this.ch\n\n    if (ch === \"'\" || ch === '\"') {\n      enclosedBy = ch\n      ch = this.next()\n    }\n\n    while (ch) {\n      if (enclosedBy && ch === enclosedBy) {\n        this.white()\n        ch = this.next()\n        if (ch !== ':' && ch !== ',') {\n          this.error(\n          'Object name: ' + name + ' missing closing ' + enclosedBy\n        )\n        }\n        return name\n      } else if (ch === ':' || ch <= ' ' || ch === ',' || ch === '|') {\n        return name\n      }\n      name += ch\n      ch = this.next()\n    }\n\n    return name\n  }\n\n  number () {\n    let number\n    let string = ''\n    let ch = this.ch\n\n    if (ch === '-') {\n      string = '-'\n      ch = this.next('-')\n    }\n    while (ch >= '0' && ch <= '9') {\n      string += ch\n      ch = this.next()\n    }\n    if (ch === '.') {\n      string += '.'\n      ch = this.next()\n      while (ch && ch >= '0' && ch <= '9') {\n        string += ch\n        ch = this.next()\n      }\n    }\n    if (ch === 'e' || ch === 'E') {\n      string += ch\n      ch = this.next()\n      if (ch === '-' || ch === '+') {\n        string += ch\n        ch = this.next()\n      }\n      while (ch >= '0' && ch <= '9') {\n        string += ch\n        ch = this.next()\n      }\n    }\n    number = +string\n    if (!isFinite(number)) {\n      options.onError(new Error('Bad number: ' + number + ' in ' + string))\n    } else {\n      return number\n    }\n  }\n\n/**\n * Add a property to 'object' that equals the given value.\n * @param  {Object} object The object to add the value to.\n * @param  {String} key    object[key] is set to the given value.\n * @param  {mixed}  value  The value, may be a primitive or a function. If a\n *                         function it is unwrapped as a property.\n */\n  objectAddValue (object, key, value) {\n    if (value && value[Node.isExpressionOrIdentifierSymbol]) {\n      Object.defineProperty(object, key, {\n        get: () => Node.value_of(value, ...this.currentContextGlobals),\n        enumerable: true\n      })\n    } else if (Array.isArray(value)) {\n      Object.defineProperty(object, key, {\n        get: () => value.map(v => Node.value_of(v, ...this.currentContextGlobals)),\n        enumerable: true\n      })\n    } else {\n    // primitives\n      object[key] = value\n    }\n  }\n\n  object () {\n    let key\n    let object = {}\n    let ch = this.ch\n\n    if (ch === '{') {\n      this.next('{')\n      ch = this.white()\n      if (ch === '}') {\n        ch = this.next('}')\n        return object\n      }\n      while (ch) {\n        if (ch === '\"' || ch === \"'\" || ch === '`') {\n          key = this.string()\n        } else {\n          key = this.name()\n        }\n        this.white()\n        ch = this.next(':')\n        if (Object.hasOwnProperty.call(object, key)) {\n          this.error('Duplicate key \"' + key + '\"')\n        }\n\n        this.objectAddValue(object, key, this.expression())\n\n        ch = this.white()\n        if (ch === '}') {\n          ch = this.next('}')\n          return object\n        }\n\n        this.next(',')\n        ch = this.white()\n      }\n    }\n    this.error('Bad object')\n  }\n\n/**\n * Read up to delim and return the string\n * @param  {string} delim The delimiter, either ' or \"\n * @return {string}       The string read.\n */\n  readString (delim) {\n    let string = ''\n    let nodes = ['']\n    let plusOp = operators['+']\n    let hex\n    let i\n    let uffff\n    let interpolate = delim === '`'\n    let ch = this.next()\n\n    while (ch) {\n      if (ch === delim) {\n        ch = this.next()\n        if (interpolate) { nodes.push(plusOp) }\n        nodes.push(string)\n        return nodes\n      }\n      if (ch === '\\\\') {\n        ch = this.next()\n        if (ch === 'u') {\n          uffff = 0\n          for (i = 0; i < 4; i += 1) {\n            hex = parseInt(ch = this.next(), 16)\n            if (!isFinite(hex)) {\n              break\n            }\n            uffff = uffff * 16 + hex\n          }\n          string += String.fromCharCode(uffff)\n        } else if (typeof escapee[ch] === 'string') {\n          string += escapee[ch]\n        } else {\n          break\n        }\n      } else if (interpolate && ch === '$') {\n        ch = this.next()\n        if (ch === '{') {\n          this.next('{')\n          nodes.push(plusOp)\n          nodes.push(string)\n          nodes.push(plusOp)\n          nodes.push(this.expression())\n          string = ''\n        // this.next('}');\n        } else {\n          string += '$' + ch\n        }\n      } else {\n        string += ch\n      }\n      ch = this.next()\n    }\n\n    this.error('Bad string')\n  }\n\n  string () {\n    var ch = this.ch\n    if (ch === '\"') {\n      return this.readString('\"').join('')\n    } else if (ch === \"'\") {\n      return this.readString(\"'\").join('')\n    } else if (ch === '`') {\n      return Node.create_root(this.readString('`'))\n    }\n\n    this.error('Bad string')\n  }\n\n  array () {\n    let array = []\n    let ch = this.ch\n\n    if (ch === '[') {\n      ch = this.next('[')\n      this.white()\n      if (ch === ']') {\n        ch = this.next(']')\n        return array\n      }\n      while (ch) {\n        array.push(this.expression())\n        ch = this.white()\n        if (ch === ']') {\n          ch = this.next(']')\n          return array\n        }\n        this.next(',')\n        ch = this.white()\n      }\n    }\n    this.error('Bad array')\n  }\n\n  value () {\n    var ch\n    this.white()\n    ch = this.ch\n    switch (ch) {\n      case '{': return this.object()\n      case '[': return this.array()\n      case '\"': case \"'\": case '`': return this.string()\n      case '-': return this.number()\n      default:\n        return ch >= '0' && ch <= '9' ? this.number() : this.identifier()\n    }\n  }\n\n/**\n * Get the function for the given operator.\n * A `.precedence` value is added to the function, with increasing\n * precedence having a higher number.\n * @return {function} The function that performs the infix operation\n */\n  operator (opts) {\n    let op = ''\n    let opFn\n    let ch = this.white()\n    let isIdentifierChar = Identifier.is_valid_start_char\n\n    while (ch) {\n      if (isIdentifierChar(ch) || ch <= ' ' || ch === '' ||\n        ch === '\"' || ch === \"'\" || ch === '{' || ch === '(' ||\n        ch === '`' || ch === ')' || (ch <= '9' && ch >= '0')) {\n        break\n      }\n\n      if (!opts.not_an_array && ch === '[') {\n        break\n      }\n\n      op += ch\n      ch = this.next()\n\n    // An infix followed by the prefix e.g. a + @b\n    // TODO: other prefix unary operators\n      if (ch === '@') {\n        break\n      }\n\n      isIdentifierChar = Identifier.is_valid_continue_char\n    }\n\n    if (op !== '') {\n      if (opts.prefix && op === '-') { op = '&-' }\n      opFn = operators[op]\n\n      if (!opFn) {\n        this.error(\"Bad operator: '\" + op + \"'.\")\n      }\n    }\n\n    return opFn\n  }\n\n/**\n * Filters\n * Returns what the Node interprets as an \"operator\".\n * e.g.\n *   <span data-bind=\"text: name | fit:20 | uppercase\"></span>\n */\n  filter () {\n    let ch = this.next()\n    let args = []\n    let nextFilter = function (v) { return v }\n    let name = this.name()\n\n    if (!options.filters[name]) {\n      options.onError('Cannot find filter by the name of: ' + name)\n    }\n\n    ch = this.white()\n\n    while (ch) {\n      if (ch === ':') {\n        ch = this.next()\n        args.push(this.expression('|'))\n      }\n\n      if (ch === '|') {\n        nextFilter = this.filter()\n        break\n      }\n\n      if (ch === ',') { break }\n\n      ch = this.white()\n    }\n\n    var filter = function filter (value, ignored, context, globals, node) {\n      var argValues = [value]\n\n      for (var i = 0, j = args.length; i < j; ++i) {\n        argValues.push(Node.value_of(args[i], context, globals, node))\n      }\n\n      return nextFilter(options.filters[name].apply(null, argValues))\n    }\n\n  // Lowest precedence.\n    filter.precedence = 1\n    return filter\n  }\n\n/**\n * Parse an expression – builds an operator tree, in something like\n * Shunting-Yard.\n *   See: http://en.wikipedia.org/wiki/Shunting-yard_algorithm\n *\n * @return {function}   A function that computes the value of the expression\n *                      when called or a primitive.\n */\n  expression (filterable) {\n    let op\n    let nodes = []\n    let ch = this.white()\n\n    while (ch) {\n    // unary prefix operators\n      op = this.operator({ prefix: true })\n      if (op) {\n        nodes.push(undefined)  // LHS Tree node.\n        nodes.push(op)\n        ch = this.white()\n      }\n\n      if (ch === '(') {\n        this.next()\n        nodes.push(this.expression())\n        this.next(')')\n      } else {\n        nodes.push(this.value())\n      }\n      ch = this.white()\n\n      if (ch === ':' || ch === '}' || ch === ',' || ch === ']' ||\n        ch === ')' || ch === '' || ch === '`' || (ch === '|' && filterable === '|')) {\n        break\n      }\n\n    // filters\n      if (ch === '|' && this.lookahead() !== '|' && filterable) {\n        nodes.push(this.filter())\n        nodes.push(undefined)\n        break\n      }\n\n    // infix or postfix operators\n      op = this.operator({ not_an_array: true })\n\n      if (op === operators['?']) {\n        this.ternary(nodes)\n        break\n      } else if (op === operators['.']) {\n        nodes.push(op)\n        nodes.push(this.member())\n        op = null\n      } else if (op === operators['[']) {\n        nodes.push(op)\n        nodes.push(this.expression())\n        ch = this.next(']')\n        op = null\n      } else if (op) {\n        nodes.push(op)\n      }\n\n      ch = this.white()\n\n      if (ch === ']' || (!op && ch === '(')) { break }\n    }\n\n    if (nodes.length === 0) {\n      return undefined\n    }\n\n    var dereferences = this.dereferences()\n\n    if (nodes.length === 1 && !dereferences.length) {\n      return nodes[0]\n    }\n\n    for (var i = 0, j = dereferences.length; i < j; ++i) {\n      var deref = dereferences[i]\n      if (deref.constructor === Arguments) {\n        nodes.push(operators.call)\n      } else {\n        nodes.push(operators['.'])\n      }\n      nodes.push(deref)\n    }\n\n    return new Expression(nodes)\n  }\n\n  ternary (nodes) {\n    var ternary = new Ternary()\n    ternary.yes = this.expression()\n    this.next(':')\n    ternary.no = this.expression()\n    nodes.push(operators['?'])\n    nodes.push(ternary)\n  }\n\n/**\n * Parse the arguments to a function, returning an Array.\n *\n */\n  funcArguments () {\n    let args = []\n    let ch = this.next('(')\n\n    while (ch) {\n      ch = this.white()\n      if (ch === ')') {\n        this.next(')')\n        return new Arguments(this, args)\n      } else {\n        args.push(this.expression())\n        ch = this.white()\n      }\n      if (ch !== ')') { this.next(',') }\n    }\n\n    this.error('Bad arguments to function')\n  }\n\n/**\n * The literal string reference `abc` in an `x.abc` expression.\n */\n  member () {\n    let member = ''\n    let ch = this.white()\n    let isIdentifierChar = Identifier.is_valid_start_char\n\n    while (ch) {\n      if (!isIdentifierChar(ch)) {\n        break\n      }\n      member += ch\n      ch = this.next()\n      isIdentifierChar = Identifier.is_valid_continue_char\n    }\n    return member\n  }\n\n/**\n * A dereference applies to an identifer, being either a function\n * call \"()\" or a membership lookup with square brackets \"[member]\".\n * @return {fn or undefined}  Dereference function to be applied to the\n *                            Identifier\n */\n  dereference () {\n    let member\n    let ch = this.white()\n\n    while (ch) {\n      if (ch === '(') {\n      // a(...) function call\n        return this.funcArguments()\n      } else if (ch === '[') {\n      // a[x] membership\n        this.next('[')\n        member = this.expression()\n        this.white()\n        this.next(']')\n\n        return member\n      } else if (ch === '.') {\n      // a.x membership\n        this.next('.')\n        return this.member()\n      } else {\n        break\n      }\n    }\n  }\n\n  dereferences () {\n    let ch = this.white()\n    let dereferences = []\n    let deref\n\n    while (ch) {\n      deref = this.dereference()\n      if (deref !== undefined) {\n        dereferences.push(deref)\n      } else {\n        break\n      }\n    }\n    return dereferences\n  }\n\n  identifier () {\n    let token = ''\n    let isIdentifierChar = Identifier.is_valid_start_char\n    let ch = this.white()\n\n    while (ch) {\n      if (!isIdentifierChar(ch)) {\n        break\n      }\n      token += ch\n      ch = this.next()\n      isIdentifierChar = Identifier.is_valid_continue_char\n    }\n    switch (token) {\n      case 'true': return true\n      case 'false': return false\n      case 'null': return null\n      case 'undefined': return void 0\n      case 'function':\n        throw new Error('Knockout: Anonymous functions are no longer supported, but `=>` lambas are.')\n    // return this.anonymous_fn();\n    }\n    return new Identifier(this, token, this.dereferences())\n  }\n\n  readBindings () {\n    let key\n    let bindings = {}\n    let sep\n    let expr\n    let ch = this.ch\n\n    while (ch) {\n      key = this.name()\n      sep = this.white()\n\n      if (!sep || sep === ',') {\n        if (sep) {\n          ch = this.next(',')\n        } else {\n          ch = ''\n        }\n      // A \"bare\" binding e.g. \"text\"; substitute value of 'null'\n      // so it becomes \"text: null\".\n        bindings[key] = null\n      } else {\n        if (key.indexOf('.') !== -1) {\n        // Namespaced – i.e.\n        //    `attr.css: x` becomes `attr: { css: x }`\n        //     ^^^ - key\n          key = key.split('.')\n          bindings[key[0]] = bindings[key[0]] || {}\n\n          if (key.length !== 2) {\n            options.onError('Binding ' + key + ' should have two parts (a.b).')\n          } else if (bindings[key[0]].constructor !== Object) {\n            options.onError('Binding ' + key[0] + '.' + key[1] + ' paired with a non-object.')\n          }\n\n          ch = this.next(':')\n          this.objectAddValue(bindings[key[0]], key[1], this.expression(true))\n        } else {\n          ch = this.next(':')\n          if (bindings[key] && typeof bindings[key] === 'object' && bindings[key].constructor === Object) {\n          // Extend a namespaced bindings e.g. we've previously seen\n          // on.x, now we're seeing on: { 'abc' }.\n            expr = this.expression(true)\n            if (typeof expr !== 'object' || expr.constructor !== Object) {\n              options.onError('Expected plain object for ' + key + ' value.')\n            } else {\n              extend(bindings[key], expr)\n            }\n          } else {\n            bindings[key] = this.expression(true)\n          }\n        }\n\n        this.white()\n        if (this.ch) {\n          ch = this.next(',')\n        } else {\n          ch = ''\n        }\n      }\n    }\n    return bindings\n  }\n\n  valueAsAccessor (value, context, globals, node) {\n    if (!value) { return () => value }\n    if (typeof value === 'function') { return value }\n\n    if (value[Node.isExpressionOrIdentifierSymbol]) {\n      return () => Node.value_of(value, context, globals, node)\n    }\n\n    if (Array.isArray(value)) {\n      return () => value.map(v => Node.value_of(v, context, globals, node))\n    }\n\n    if (typeof (value) !== 'function') {\n      return () => clonePlainObjectDeep(value)\n    }\n\n    throw new Error('Value has cannot be converted to accessor: ' + value)\n  }\n\n  /**\n  * Convert result[name] from a value to a function (i.e. `valueAccessor()`)\n  * @param  {object} result [Map of top-level names to values]\n  * @return {object}        [Map of top-level names to functions]\n  *\n  * Accessors may be one of (below) constAccessor, identifierAccessor,\n  * expressionAccessor, or nodeAccessor.\n  */\n  convertToAccessors (result, context, globals, node) {\n    objectForEach(result, (name, value) => {\n      if (value instanceof Identifier) {\n        // Return a function that, with no arguments returns\n        // the value of the identifier, otherwise sets the\n        // value of the identifier to the first given argument.\n        Object.defineProperty(result, name, {\n          value: function (optionalValue, options) {\n            const currentValue = value.get_value(undefined, context, globals, node)\n            if (arguments.length === 0) { return currentValue }\n            const unchanged = optionalValue === currentValue\n            if (options && options.onlyIfChanged && unchanged) { return }\n            return value.set_value(optionalValue, context, globals)\n          }\n        })\n      } else {\n        result[name] = this.valueAsAccessor(value, context, globals, node)\n      }\n    })\n    return result\n  }\n\n  runParse (source, fn) {\n    this.text = (source || '').trim()\n    this.at = 0\n    this.ch = ' '\n\n    try {\n      var result = fn()\n      this.white()\n      if (this.ch) {\n        this.error('Syntax Error')\n      }\n      return result\n    } catch (e) {\n      options.onError(e)\n    }\n  }\n\n  /**\n   * Get the bindings as name: accessor()\n   * @param  {string} source The binding string to parse.\n   * @return {object}        Map of name to accessor function.\n   */\n  parse (source, context = {}, globals = {}, node) {\n    if (!source) { return () => null }\n    this.currentContextGlobals = [context, globals, node]\n    const parseFn = () => this.readBindings()\n    const bindingAccessors = this.runParse(source, parseFn)\n    return this.convertToAccessors(bindingAccessors, context, globals, node)\n  }\n\n  /**\n   * Return a function that evaluates and returns the result of the expression.\n   */\n  parseExpression (source, context = {}, globals = {}, node) {\n    if (!source) { return () => '' }\n    this.currentContextGlobals = [context, globals, node]\n    const parseFn = () => this.expression(true)\n    const bindingAccessors = this.runParse(source, parseFn)\n    return this.valueAsAccessor(bindingAccessors, context, globals, node)\n  }\n}\n","\nimport {\n  options\n} from 'tko.utils'\n\nexport default class BindingHandlerObject {\n  set (nameOrObject, value) {\n    if (typeof nameOrObject === 'string') {\n      this[nameOrObject] = value\n    } else if (typeof nameOrObject === 'object') {\n      if (value !== undefined) {\n        options.onError(\n          new Error('Given extraneous `value` parameter (first param should be a string, but it was an object).' + nameOrObject))\n      }\n      Object.assign(this, nameOrObject)\n    } else {\n      options.onError(\n        new Error('Given a bad binding handler type: ' + nameOrObject))\n    }\n  }\n\n  /**\n   * The handler may have a `.` in it, e.g. `attr.title`, in which case the\n   * handler is `attr`.  Otherwise it's the name given\n   */\n  get (nameOrDotted) {\n    const [name] = nameOrDotted.split('.')\n    return this[name]\n  }\n}\n","\nimport BindingHandlerObject from './BindingHandlerObject'\n\nexport default class Provider {\n  constructor (params = {}) {\n    if (this.constructor === Provider) {\n      throw new Error('Provider is an abstract base class.')\n    }\n    if (!('FOR_NODE_TYPES' in this)) {\n      // FOR_NODE_TYPES must return a list of integers corresponding to the\n      // node.nodeType's that the provider handles.\n      throw new Error('Providers must have FOR_NODE_TYPES property')\n    }\n    this.bindingHandlers = params.bindingHandlers || new BindingHandlerObject()\n    this.globals = params.globals || {}\n  }\n\n  nodeHasBindings (/* node */) {}\n  getBindingAccessors (/* node, context */) {}\n  preprocessNode (/* node */) {}\n  postProcess (/* node */) {}\n}\n","import {\n  Parser, parseObjectLiteral\n} from 'tko.utils.parser'\n\nimport {\n   Provider\n } from 'tko.provider'\n\n/**\n * BindingStringProvider is an abstract base class parses a binding string.\n *\n * Children must implement `nodeHasBindings` and `getBindingString`.\n */\nexport default class BindingStringProvider extends Provider {\n  /** Call bindingHandler.preprocess on each respective binding string.\n   *\n   * The `preprocess` property of bindingHandler must be a static\n   * function (i.e. on the object or constructor).\n   */\n  * processBinding (key, value) {\n    // Get the \"on\" binding from \"on.click\"\n    const [handlerName, property] = key.split('.')\n    const handler = this.bindingHandlers.get(handlerName)\n\n    if (handler && handler.preprocess) {\n      const bindingsAddedByHandler = []\n      const chainFn = (...args) => bindingsAddedByHandler.push(args)\n      value = handler.preprocess(value, key, chainFn)\n      for (const [key, value] of bindingsAddedByHandler) {\n        yield * this.processBinding(key, value)\n      }\n    } else if (property) {\n      value = `{${property}:${value}}`\n    }\n\n    yield `${handlerName}:${value}`\n  }\n\n  * generateBindingString (bindingString) {\n    for (const {key, unknown, value} of parseObjectLiteral(bindingString)) {\n      yield * this.processBinding(key || unknown, value)\n    }\n  }\n\n  preProcessBindings (bindingString) {\n    return Array.from(this.generateBindingString(bindingString)).join(',')\n  }\n\n  getBindingAccessors (node, context) {\n    const bindingString = node && this.getBindingString(node)\n    if (!bindingString) { return }\n    const processed = this.preProcessBindings(bindingString)\n    return new Parser().parse(processed, context, this.globals, node)\n  }\n\n  getBindingString () { throw new Error('Overload getBindingString.') }\n}\n","import {\n  virtualElements\n} from 'tko.utils'\n\nimport {\n  BindingStringProvider\n} from 'tko.provider.bindingstring'\n\nexport default class VirtualProvider extends BindingStringProvider {\n  get FOR_NODE_TYPES () { return [ 8 ] } // document.COMMENT_NODE\n\n  getBindingString (node) {\n    if (node.nodeType === document.COMMENT_NODE) {\n      return virtualElements.virtualNodeBindingValue(node)\n    }\n  }\n\n  nodeHasBindings (node) {\n    if (node.nodeType === document.COMMENT_NODE) {\n      return virtualElements.isStartComment(node)\n    }\n  }\n}\n","\nimport {\n   BindingStringProvider\n } from 'tko.provider.bindingstring'\n\nexport default class DataBindProvider extends BindingStringProvider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  get BIND_ATTRIBUTE () {\n    return 'data-bind'\n  }\n\n  getBindingString (node) {\n    if (node.nodeType === document.ELEMENT_NODE) {\n      return node.getAttribute(this.BIND_ATTRIBUTE)\n    }\n  }\n\n  nodeHasBindings (node) {\n    if (node.nodeType === document.ELEMENT_NODE) {\n      return node.hasAttribute(this.BIND_ATTRIBUTE)\n    }\n  }\n}\n","'use strict'\n\nimport {\n    addDisposeCallback, createSymbolOrString\n} from 'tko.utils'\n\nimport {\n    computed\n} from 'tko.computed'\n\nconst SUBSCRIPTIONS = createSymbolOrString('LifeCycle Subscriptions List')\nconst ANCHOR_NODE = createSymbolOrString('LifeCycle Anchor Node')\n\nexport default class LifeCycle {\n  // NOTE: For more advanced integration as an ES6 mixin, see e.g.:\n  // http://justinfagnani.com/2015/12/21/real-mixins-with-javascript-classes/\n\n  /**\n   * Copy the properties of the LifeCycle class to the target (or its prototype)\n   *\n   * NOTE: getOwnPropertyNames is needed to copy the non-enumerable properties.\n   */\n  static mixInto (Constructor) {\n    const target = Constructor.prototype || Constructor\n    const mixin = LifeCycle.prototype\n    for (let prop of Object.getOwnPropertyNames(mixin)) {\n      target[prop] = mixin[prop]\n    }\n  }\n\n  subscribe (observable, action) {\n    if (typeof action === 'string') { action = this[action].bind(this) }\n    this.addDisposable(observable.subscribe(action))\n  }\n\n  computed (params) {\n    if (typeof params === 'string') {\n      params = { read: this[params], write: this[params], owner: this }\n    } else if (typeof params === 'object') {\n      // Pass directly.\n    } else if (typeof params === 'function') {\n      params = { read: params, write: params }\n    } else {\n      throw new Error('LifeCycle::computed not given a valid type.')\n    }\n\n    params.disposeWhenNodeIsRemoved = this[ANCHOR_NODE]\n    return this.addDisposable(computed(params))\n  }\n\n  /**\n   * Add an event listener for the given or anchored node.\n   * @param {node} [node] (optional) The target node (otherwise the anchored node)\n   * @param {string} [type] Event type\n   * @param {function|string} [action] Either call the given function or `this[action]`\n   * @param {object} [options] (optional) Passed as `options` to `node.addEventListener`\n   */\n  addEventListener (...args) {\n    const node = args[0].nodeType ? args.shift() : this[ANCHOR_NODE]\n    const [type, act, options] = args\n    const handler = typeof act === 'string' ? this[act].bind(this) : act\n    this.__addEventListener(node, type, handler, options)\n  }\n\n  __addEventListener (node, eventType, handler, options) {\n    node.addEventListener(eventType, handler, options)\n    function dispose () { node.removeEventListener(eventType, handler) }\n    addDisposeCallback(node, dispose)\n    this.addDisposable({ dispose })\n  }\n\n  anchorTo (node) {\n    addDisposeCallback(node, () => this.dispose())\n    this[ANCHOR_NODE] = node\n  }\n\n  dispose () {\n    const subscriptions = this[SUBSCRIPTIONS] || []\n    subscriptions.forEach(s => s.dispose())\n    this[SUBSCRIPTIONS] = []\n    this[ANCHOR_NODE] = null\n  }\n\n  addDisposable (subscription) {\n    const subscriptions = this[SUBSCRIPTIONS] || []\n    if (!this[SUBSCRIPTIONS]) { this[SUBSCRIPTIONS] = subscriptions }\n    if (typeof subscription.dispose !== 'function') {\n      throw new Error('Lifecycle::addDisposable argument missing `dispose`.')\n    }\n    subscriptions.push(subscription)\n    return subscription\n  }\n}\n","/**\n * Component --- Abstract Base Class\n *\n * This simplifies and compartmentalizes Components.  Use this:\n *\n *    class CompX extends ComponentABC {\n *    \tstatic get element () { return 'comp-x-id' }\n *    \tstatic get sync () { return false }\n *    \tstatic get elementName () { return 'comp-x' }\n *    }\n *    CompX.register()\n *\n * instead of:\n *\n *   class CompX {}\n *   \n *   ko.components.register('comp-x', {\n *     viewModel: CompX,\n *     synchronous: false,\n *     template: { element: 'comp-x' }\n *   })\n *\n * As well, gain all the benefits of a LifeCycle, namely automated\n * event and subscription addition/removal.\n * \n * NOTE: A Component created this way can add events to the component node\n * with `this.addEventListener(type, action)`.\n */\nimport {LifeCycle} from 'tko.lifecycle'\nimport {register} from './loaders'\n\nexport class ComponentABC extends LifeCycle {\n\t/**\n\t * @return {string} The custom node name of this component.\n\t */\n\tstatic get elementName () {\n\t\tthrow new Error(\"[ComponentABC] `elementName` must be overloaded.\")\t\n\t}\n\n\t/**\n\t * Overload this to return:\n\t * 1. A string of markup\n\t * 2. An array of DOM nodes\n\t * 3. A document fragment\n\t * 4. An AMD module (with `{require: 'some/template'}`)\n\t * @return {mixed} One of the accepted template types for the ComponentBinding.\n\t */\n\tstatic get template () { return { element: this.element } }\n\n\t/**\n\t * This is called by the default `template`.  Overload this to return:\n\t * 1. The element ID\n\t * 2. A DOM node itself\n\t * @return {string|HTMLElement} either the element ID or actual element.\n\t */\n\tstatic get element () {\n\t\tthrow new Error(\"[ComponentABC] `element` must be overloaded.\")\n\t}\n\n\t/**\n\t * @return {bool} True if the component shall load synchronously\n\t */\n\tstatic get sync () { return true }\n\n\tstatic register (name = this.elementName) {\n\t\tconst viewModel = this\n\t\tconst {template} = this\n\t\tconst synchronous = this.sync\n\t\tregister(name, { viewModel, template, synchronous })\n\t}\n}","\nimport {registry} from './registry'\n\nimport { ComponentABC } from './ComponentABC'\n\n\nimport {\n  register,\n  isRegistered,\n  unregister,\n  defaultLoader,\n  defaultConfigRegistry\n} from './loaders'\n\nexport default {\n  ComponentABC,\n  // -- Registry --\n  get: registry.get,\n  clearCachedDefinition: registry.clearCachedDefinition,\n\n  // -- Loader --\n  register,\n  isRegistered,\n  unregister,\n  defaultLoader,\n  // \"Privately\" expose the underlying config registry for use in old-IE shim\n  _allRegisteredComponents: defaultConfigRegistry,\n\n  get loaders () { return registry.loaders },\n  set loaders (loaders) { registry.loaders = loaders }\n}\n","\nimport {\n  tagNameLower, objectMap\n} from 'tko.utils'\n\nimport registry from 'tko.utils.component'\n\nimport {\n  unwrap, isWriteableObservable\n} from 'tko.observable'\n\nimport {\n  computed\n} from 'tko.computed'\n\nimport {\n  Provider\n} from 'tko.provider'\n\nimport {\n  Parser\n} from 'tko.utils.parser'\n\nexport default class ComponentProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  nodeHasBindings (node) {\n    return Boolean(this.getComponentNameForNode(node))\n  }\n\n  getBindingAccessors (node, context) {\n    const componentName = this.getComponentNameForNode(node)\n    if (!componentName) { return }\n    const component = () => ({\n      name: componentName,\n      params: this.getComponentParams(node, context)\n    })\n    return { component }\n  }\n\n  getComponentNameForNode (node) {\n    if (node.nodeType !== node.ELEMENT_NODE) { return }\n    const tagName = tagNameLower(node)\n    if (registry.isRegistered(tagName)) {\n      const hasDash = tagName.includes('-')\n      const isUnknownEntity = ('' + node) === '[object HTMLUnknownElement]'\n      if (hasDash || isUnknownEntity) { return tagName }\n    }\n  }\n\n  getComponentParams (node, context) {\n    const parser = new Parser(node, context, this.globals)\n    const paramsString = (node.getAttribute('params') || '').trim()\n    const accessors = parser.parse(paramsString, context, node)\n    if (!accessors || Object.keys(accessors).length === 0) {\n      return { $raw: {} }\n    }\n    const $raw = objectMap(accessors,\n      (value) => computed(value, null, { disposeWhenNodeIsRemoved: node })\n    )\n    const params = objectMap($raw, (v) => this.makeParamValue(node, v))\n    return Object.assign({ $raw }, params)\n  }\n\n  makeParamValue (node, paramValueComputed) {\n    const paramValue = paramValueComputed.peek()\n    // Does the evaluation of the parameter value unwrap any observables?\n    if (!paramValueComputed.isActive()) {\n      // No it doesn't, so there's no need for any computed wrapper. Just pass through the supplied value directly.\n      // Example: \"someVal: firstName, age: 123\" (whether or not firstName is an observable/computed)\n      return paramValue\n    }\n    // Yes it does. Supply a computed property that unwraps both the outer (binding expression)\n    // level of observability, and any inner (resulting model value) level of observability.\n    // This means the component doesn't have to worry about multiple unwrapping. If the value is a\n    // writable observable, the computed will also be writable and pass the value on to the observable.\n    const isWriteable = isWriteableObservable(paramValue)\n\n    return computed({\n      read: () => unwrap(paramValueComputed()),\n      write: isWriteable ? (v) => paramValueComputed()(v) : null,\n      disposeWhenNodeIsRemoved: node\n    })\n  }\n}\n","\nimport {\n  Provider\n} from 'tko.provider'\n\n/**\n * Convert attributes with ko-* to bindings.\n *\n * e.g.\n * <div ko-visible='value'></div>\n */\nexport default class AttrProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  get PREFIX () { return 'ko-' }\n\n  getBindingAttributesList (node) {\n    if (!node.hasAttributes()) { return [] }\n    return Array.from(node.attributes)\n      .filter(attr => attr.name.startsWith(this.PREFIX))\n  }\n\n  nodeHasBindings (node) {\n    return this.getBindingAttributesList(node).length > 0\n  }\n\n  getBindingAccessors (node, context) {\n    return Object.assign({}, ...this.handlersFromAttributes(node, context))\n  }\n\n  * handlersFromAttributes (node, context) {\n    for (const attr of this.getBindingAttributesList(node)) {\n      const name = attr.name.substr(this.PREFIX.length)\n      yield {[name]: () => this.getValue(attr.value, context, node)}\n    }\n  }\n\n  getValue (token, $context, node) {\n    /* FIXME: This duplicates Identifier.prototype.lookup_value; it should\n       be refactored into e.g. a BindingContext method */\n    if (!token) { return }\n    const $data = $context.$data\n\n    switch (token) {\n      case '$element': return node\n      case '$context': return $context\n      case 'this': case '$data': return $context.$data\n    }\n\n    if ($data instanceof Object && token in $data) { return $data[token] }\n    if (token in $context) { return $context[token] }\n    if (token in this.globals) { return this.globals[token] }\n\n    throw new Error(`The variable '${token} not found.`)\n  }\n}\n","\nimport {\n  Provider\n} from 'tko.provider'\n\nexport default class MultiProvider extends Provider {\n  get FOR_NODE_TYPES () { return this.nodeTypes }\n\n  constructor (params = {}) {\n    super(params)\n    const providers = params.providers || []\n    this.nodeTypeMap = {}\n    this.nodeTypes = []\n    this.providers = []\n    providers.forEach(p => this.addProvider(p))\n  }\n\n  addProvider (provider) {\n    this.providers.push(provider)\n    provider.bindingHandlers = this.bindingHandlers\n    provider.globals = this.globals\n    const nodeTypeMap = this.nodeTypeMap\n    for (const nodeType of provider.FOR_NODE_TYPES) {\n      if (!nodeTypeMap[nodeType]) { nodeTypeMap[nodeType] = [] }\n      nodeTypeMap[nodeType].push(provider)\n    }\n    this.nodeTypes = Object.keys(this.nodeTypeMap).map(k => parseInt(k, 10))\n  }\n\n  providersFor (node) {\n    return this.nodeTypeMap[node.nodeType] || []\n  }\n\n  nodeHasBindings (node) {\n    return this.providersFor(node).some(p => p.nodeHasBindings(node))\n  }\n\n  preprocessNode (node) {\n    for (const provider of this.providersFor(node)) {\n      const newNodes = provider.preprocessNode(node)\n      if (newNodes) { return newNodes }\n    }\n  }\n\n  * enumerateProviderBindings (node, ctx) {\n    for (const provider of this.providersFor(node)) {\n      const bindings = provider.getBindingAccessors(node, ctx) || {}\n      for (const [key, accessor] of Object.entries(bindings || {})) {\n        yield [key, accessor]\n      }\n    }\n  }\n\n  getBindingAccessors (node, ctx) {\n    node = this.preprocessNode(node) || node\n    const bindings = {}\n    for (const [key, accessor] of this.enumerateProviderBindings(node, ctx)) {\n      if (key in bindings) {\n        throw new Error(`The binding \"${key}\" is duplicated by multiple providers`)\n      }\n      bindings[key] = accessor\n    }\n    return bindings\n  }\n}\n","\nimport {\n  unwrap\n} from 'tko.observable'\n\nimport {\n  Provider\n} from 'tko.provider'\n\nimport {\n  parseInterpolation\n} from './mustacheParser'\n\n/**\n * These are bindings that are mapped specific attributes, such as\n * two-way communication (value/checked) or which have anti-collision\n * properties (css).\n */\nconst DEFAULT_ATTRIBUTE_BINDING_MAP = {\n  value: 'value',\n  checked: 'checked',\n  class: 'css'\n}\n\n/**\n *  Interpret {{ }} inside DOM attributes e.g. <div class='{{ classes }}'>\n */\nexport default class AttributeMustacheProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  constructor (params = {}) {\n    super(params)\n    this.ATTRIBUTES_TO_SKIP = new Set(params.attributesToSkip || ['data-bind'])\n    this.ATTRIBUTES_BINDING_MAP = params.attributesBindingMap || DEFAULT_ATTRIBUTE_BINDING_MAP\n  }\n\n  * attributesToInterpolate (attributes) {\n    for (const attr of Array.from(attributes)) {\n      if (this.ATTRIBUTES_TO_SKIP.has(attr.name)) { continue }\n      if (attr.specified && attr.value.includes('{{')) { yield attr }\n    }\n  }\n\n  nodeHasBindings (node) {\n    return !this.attributesToInterpolate(node.attributes).next().done\n  }\n\n  partsTogether (parts, context, node, ...valueToWrite) {\n    if (parts.length > 1) {\n      return parts\n        .map(p => unwrap(p.asAttr(context, this.globals, node))).join('')\n    }\n    // It may be a writeable observable e.g. value=\"{{ value }}\".\n    const part = parts[0].asAttr(context, this.globals)\n    if (valueToWrite.length) { part(valueToWrite[0]) }\n    return part\n  }\n\n  attributeBinding (name, parts) {\n    return [name, parts]\n  }\n\n  * bindingParts (node, context) {\n    for (const attr of this.attributesToInterpolate(node.attributes)) {\n      const parts = Array.from(parseInterpolation(attr.value))\n      if (parts.length) { yield this.attributeBinding(attr.name, parts) }\n    }\n  }\n\n  getPossibleDirectBinding (attrName) {\n    const bindingName = this.ATTRIBUTES_BINDING_MAP[attrName]\n    return bindingName && this.bindingHandlers.get(attrName)\n  }\n\n  * bindingObjects (node, context) {\n    for (const [attrName, parts] of this.bindingParts(node, context)) {\n      const bindingForAttribute = this.getPossibleDirectBinding(attrName)\n      const handler = bindingForAttribute ? attrName : `attr.${attrName}`\n      const accessorFn = bindingForAttribute\n        ? (...v) => this.partsTogether(parts, context, node, ...v)\n        : (...v) => ({[attrName]: this.partsTogether(parts, context, node, ...v)})\n      node.removeAttribute(attrName)\n      yield { [handler]: accessorFn }\n    }\n  }\n\n  getBindingAccessors (node, context) {\n    return Object.assign({}, ...this.bindingObjects(node, context))\n  }\n}\n","import {\n  Provider\n} from 'tko.provider'\n\nimport {\n  parseInterpolation\n} from './mustacheParser'\n\n/**\n * Interpret {{ }}, {{{ }}}, {{# /}}, and {{# }} ... {{/ }} inside text nodes.\n *\n * This binding must come before the VirtualProvider.\n */\nexport default class TextMustacheProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 3 ] } // document.TEXT_NODE\n\n  * textToNodes (textNode) {\n    const parent = textNode.parentNode\n    const isTextarea = parent && parent.nodeName === 'TEXTAREA'\n    const hasStash = textNode.nodeValue && textNode.nodeValue.includes('{{')\n\n    if (!hasStash || isTextarea) { return }\n\n    for (const part of parseInterpolation(textNode.nodeValue)) {\n      yield * part.textNodeReplacement(textNode)\n    }\n  }\n\n  textInterpolation (textNode) {\n    const newNodes = Array.from(this.textToNodes(textNode))\n\n    if (newNodes.length === 0) { return }\n\n    if (textNode.parentNode) {\n      const parent = textNode.parentNode\n      const n = newNodes.length\n      for (let i = 0; i < n; ++i) {\n        parent.insertBefore(newNodes[i], textNode)\n      }\n      parent.removeChild(textNode)\n    }\n\n    return newNodes\n  }\n\n  /**\n   * We convert as follows:\n   *\n   *   {{# ... }} into <!-- ko ... -->\n   *   {{/ ... }} into <!-- /ko -->\n   *   {{# ... /}} into <!-- ko ... --><!-- /ko -->\n   *   {{ ... }} into <!-- ko text: ... --><!-- /ko -->\n   *   {{{ ... }}} into <!-- ko html: ... --><!-- /ko -->\n   *\n   * VirtualProvider can then pick up and do the actual binding.\n   */\n  preprocessNode (node) {\n    return this.textInterpolation(node)\n  }\n}\n","\nimport {\n    options\n} from 'tko.utils'\n\nimport {\n    LifeCycle\n} from 'tko.lifecycle'\n\nexport class BindingHandler extends LifeCycle {\n  constructor (params) {\n    super()\n    const {$element, valueAccessor, allBindings, $context} = params\n    Object.assign(this, {\n      valueAccessor,\n      allBindings,\n      $element,\n      $context,\n      $data: $context.$data\n    })\n\n    this.anchorTo($element)\n  }\n\n  get value () { return this.valueAccessor() }\n  set value (v) { return this.valueAccessor(v) }\n\n  get controlsDescendants () { return false }\n\n  static get allowVirtualElements () { return false }\n  static get isBindingHandlerClass () { return true }\n\n  /* Overload this for asynchronous bindings or bindings that recursively\n     apply bindings (e.g. components, foreach, template).\n\n     A binding should be complete when it has run through once, notably\n     in server-side bindings for pre-rendering.\n  */\n  get bindingCompleted () { return true }\n\n  static registerAs (name, provider = options.bindingProviderInstance) {\n    provider.bindingHandlers.set(name, this)\n  }\n}\n\n/**\n * An AsyncBindingHandler shall call `completeBinding` when the binding\n * is to be considered complete.\n */\nexport class AsyncBindingHandler extends BindingHandler {\n  constructor (params) {\n    super(params)\n    this.bindingCompletion = new options.Promise((resolve) => { this.completeBinding = resolve })\n  }\n\n  get bindingCompleted () { return this.bindingCompletion }\n}\n","\nimport {\n  virtualElements, options\n} from 'tko.utils'\n\nimport {\n  dependencyDetection\n} from 'tko.observable'\n\nimport {\n  BindingHandler\n} from './BindingHandler'\n\n/**\n * We have no guarantees, for users employing legacy bindings,\n * that it has not been changed with a modification like\n *\n *    ko.bindingHandlers[name] = { init: ...}\n *\n * ... so we have to keep track by way of a map.\n */\nconst PossibleWeakMap = options.global.WeakMap || Map\nconst legacyBindingMap = new PossibleWeakMap()\n\nexport class LegacyBindingHandler extends BindingHandler {\n  constructor (params) {\n    super(params)\n    const handler = this.handler\n\n    if (typeof handler.dispose === 'function') {\n      this.addDisposable(handler)\n    }\n\n    try {\n      this.initReturn = handler.init && handler.init(...this.legacyArgs)\n    } catch (e) { params.onError('init', e) }\n\n    if (typeof handler.update === 'function') {\n      this.computed(() => {\n        try {\n          handler.update(...this.legacyArgs)\n        } catch (e) {\n          params.onError('update', e)\n        }\n      })\n    }\n  }\n\n  get legacyArgs () {\n    return [\n      this.$element, this.valueAccessor, this.allBindings,\n      this.$data, this.$context\n    ]\n  }\n\n  get controlsDescendants () {\n    const objectToTest = this.initReturn || this.handler || {}\n    return objectToTest.controlsDescendantBindings\n  }\n\n  /**\n   * Create a handler instance from the `origin`, which may be:\n   *\n   * 1. an object (becomes LegacyBindingHandler)\n   * 2. a function (becomes LegacyBindingHandler with `init: function`)\n   *\n   * If given an object (the only kind supported in knockout 3.x and before), it\n   * shall draw the `init`, `update`, and `allowVirtualElements` properties\n   */\n  static getOrCreateFor (key, handler) {\n    if (legacyBindingMap.has(handler)) {\n      return legacyBindingMap.get(handler)\n    }\n    const newLegacyHandler = this.createFor(key, handler)\n    legacyBindingMap.set(handler, newLegacyHandler)\n    return newLegacyHandler\n  }\n\n  static createFor (key, handler) {\n    if (typeof handler === 'function') {\n      const [initFn, disposeFn] = [handler, handler.dispose]\n      return class extends LegacyBindingHandler {\n        get handler () {\n          const init = initFn.bind(this)\n          const dispose = disposeFn ? disposeFn.bind(this) : null\n          return { init, dispose }\n        }\n        static get after () { return handler.after }\n        static get allowVirtualElements () {\n          return handler.allowVirtualElements || virtualElements.allowedBindings[key]\n        }\n      }\n    }\n\n    if (typeof handler === 'object') {\n      return class extends LegacyBindingHandler {\n        get handler () { return handler }\n        static get after () { return handler.after }\n        static get allowVirtualElements () {\n          return handler.allowVirtualElements || virtualElements.allowedBindings[key]\n        }\n      }\n    }\n\n    throw new Error('The given handler is not an appropriate type.')\n  }\n}\n","\nimport {\n    objectForEach, registerEventHandler, makeArray\n} from 'tko.utils';\n\n// For certain common events (currently just 'click'), allow a simplified data-binding syntax\n// e.g. click:handler instead of the usual full-length event:{click:handler}\nexport function makeEventHandlerShortcut(eventName) {\n    return {\n        init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n            var newValueAccessor = function () {\n                var result = {};\n                result[eventName] = valueAccessor();\n                return result;\n            };\n            eventHandler.init.call(this, element, newValueAccessor, allBindings, viewModel, bindingContext);\n        }\n    };\n}\n\nexport var eventHandler = {\n    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n        var eventsToHandle = valueAccessor() || {};\n        objectForEach(eventsToHandle, function(eventName) {\n            if (typeof eventName == \"string\") {\n                registerEventHandler(element, eventName, function (event) {\n                    var handlerReturnValue;\n                    var handlerFunction = valueAccessor()[eventName];\n                    if (!handlerFunction)\n                        return;\n\n                    try {\n                        // Take all the event args, and prefix with the viewmodel\n                        var argsForHandler = makeArray(arguments);\n                        viewModel = bindingContext['$data'];\n                        argsForHandler.unshift(viewModel);\n                        handlerReturnValue = handlerFunction.apply(viewModel, argsForHandler);\n                    } finally {\n                        if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.\n                            if (event.preventDefault)\n                                event.preventDefault();\n                            else\n                                event.returnValue = false;\n                        }\n                    }\n\n                    var bubble = allBindings.get(eventName + 'Bubble') !== false;\n                    if (!bubble) {\n                        event.cancelBubble = true;\n                        if (event.stopPropagation)\n                            event.stopPropagation();\n                    }\n                });\n            }\n        });\n    }\n};\n\n\nexport var onHandler = {\n    init: eventHandler.init,\n    preprocess: function (value, key, addBinding) {\n      addBinding(key.replace('on.', ''), '=>' + value)\n    }\n};\n","\nimport {\n    makeEventHandlerShortcut\n} from './event.js';\n\n// 'click' is just a shorthand for the usual full-length event:{click:handler}\nexport var click = makeEventHandlerShortcut('click');\n","\nimport {\n    createSymbolOrString, toggleDomNodeCssClass, objectForEach, stringTrim\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\n\n\nexport var css = {\n    aliases: ['class'],\n    update: function (element, valueAccessor) {\n        var value = unwrap(valueAccessor());\n        if (value !== null && typeof value == \"object\") {\n            objectForEach(value, function(className, shouldHaveClass) {\n                shouldHaveClass = unwrap(shouldHaveClass);\n                toggleDomNodeCssClass(element, className, shouldHaveClass);\n            });\n        } else {\n            value = stringTrim(String(value || '')); // Make sure we don't try to store or set a non-string value\n            toggleDomNodeCssClass(element, element[css.classesWrittenByBindingKey], false);\n            element[css.classesWrittenByBindingKey] = value;\n            toggleDomNodeCssClass(element, value, true);\n        }\n    },\n    classesWrittenByBindingKey: createSymbolOrString('__ko__cssValue')\n};\n","\nimport {\n    unwrap\n} from 'tko.observable';\n\nexport var enable = {\n    update: function (element, valueAccessor) {\n        var value = unwrap(valueAccessor());\n        if (value && element.disabled) {\n            element.removeAttribute(\"disabled\");\n        } else if ((!value) && (!element.disabled)) {\n            element.disabled = true;\n        }\n    }\n};\n\nexport var disable = {\n    update: function (element, valueAccessor) {\n        enable.update(element, function() { return !unwrap(valueAccessor()); });\n    }\n};\n","\nimport {\n    createSymbolOrString, triggerEvent, registerEventHandler\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable';\n\nvar hasfocusUpdatingProperty = createSymbolOrString('__ko_hasfocusUpdating');\nvar hasfocusLastValue = createSymbolOrString('__ko_hasfocusLastValue');\n\nexport var hasfocus = {\n    init: function(element, valueAccessor /*, allBindings */) {\n        var handleElementFocusChange = function(isFocused) {\n            // Where possible, ignore which event was raised and determine focus state using activeElement,\n            // as this avoids phantom focus/blur events raised when changing tabs in modern browsers.\n            // However, not all KO-targeted browsers (Firefox 2) support activeElement. For those browsers,\n            // prevent a loss of focus when changing tabs/windows by setting a flag that prevents hasfocus\n            // from calling 'blur()' on the element when it loses focus.\n            // Discussion at https://github.com/SteveSanderson/knockout/pull/352\n            element[hasfocusUpdatingProperty] = true;\n            var ownerDoc = element.ownerDocument;\n            if (\"activeElement\" in ownerDoc) {\n                var active;\n                try {\n                    active = ownerDoc.activeElement;\n                } catch(e) {\n                    // IE9 throws if you access activeElement during page load (see issue #703)\n                    active = ownerDoc.body;\n                }\n                isFocused = (active === element);\n            }\n            // var modelValue = valueAccessor();\n            valueAccessor(isFocused, {onlyIfChanged: true});\n\n            //cache the latest value, so we can avoid unnecessarily calling focus/blur in the update function\n            element[hasfocusLastValue] = isFocused;\n            element[hasfocusUpdatingProperty] = false;\n        };\n        var handleElementFocusIn = handleElementFocusChange.bind(null, true);\n        var handleElementFocusOut = handleElementFocusChange.bind(null, false);\n\n        registerEventHandler(element, \"focus\", handleElementFocusIn);\n        registerEventHandler(element, \"focusin\", handleElementFocusIn); // For IE\n        registerEventHandler(element, \"blur\",  handleElementFocusOut);\n        registerEventHandler(element, \"focusout\",  handleElementFocusOut); // For IE\n    },\n    update: function(element, valueAccessor) {\n        var value = !!unwrap(valueAccessor());\n\n        if (!element[hasfocusUpdatingProperty] && element[hasfocusLastValue] !== value) {\n            value ? element.focus() : element.blur();\n\n            // In IE, the blur method doesn't always cause the element to lose focus (for example, if the window is not in focus).\n            // Setting focus to the body element does seem to be reliable in IE, but should only be used if we know that the current\n            // element was focused already.\n            if (!value && element[hasfocusLastValue]) {\n                element.ownerDocument.body.focus();\n            }\n\n            // For IE, which doesn't reliably fire \"focus\" or \"blur\" events synchronously\n            dependencyDetection.ignore(triggerEvent, null, [element, value ? \"focusin\" : \"focusout\"]);\n        }\n    }\n};\n","\nimport { domData, tagNameLower } from 'tko.utils';\n\n\nvar hasDomDataExpandoProperty = '__ko__hasDomDataOptionValue__';\n\n// Normally, SELECT elements and their OPTIONs can only take value of type 'string' (because the values\n// are stored on DOM attributes). ko.selectExtensions provides a way for SELECTs/OPTIONs to have values\n// that are arbitrary objects. This is very convenient when implementing things like cascading dropdowns.\nexport var selectExtensions = {\n    optionsValueDomDataKey: undefined,\n\n    readValue : function(element) {\n        switch (tagNameLower(element)) {\n        case 'option':\n            if (element[hasDomDataExpandoProperty] === true)\n                return domData.get(element, selectExtensions.optionValueDomDataKey);\n            return element.value;\n        case 'select':\n            return element.selectedIndex >= 0 ? selectExtensions.readValue(element.options[element.selectedIndex]) : undefined;\n        default:\n            return element.value;\n        }\n    },\n\n    writeValue: function(element, value, allowUnset) {\n        switch (tagNameLower(element)) {\n        case 'option':\n            switch(typeof value) {\n            case \"string\":\n                domData.set(element, selectExtensions.optionValueDomDataKey, undefined);\n                if (hasDomDataExpandoProperty in element) { // IE <= 8 throws errors if you delete non-existent properties from a DOM node\n                    delete element[hasDomDataExpandoProperty];\n                }\n                element.value = value;\n                break;\n            default:\n                // Store arbitrary object using DomData\n                domData.set(element, selectExtensions.optionValueDomDataKey, value);\n                element[hasDomDataExpandoProperty] = true;\n\n                // Special treatment of numbers is just for backward compatibility. KO 1.2.1 wrote numerical values to element.value.\n                element.value = typeof value === \"number\" ? value : \"\";\n                break;\n            }\n            break;\n        case 'select':\n            if (value === \"\" || value === null)       // A blank string or null value will select the caption\n                value = undefined;\n            var selection = -1;\n            for (var i = 0, n = element.options.length, optionValue; i < n; ++i) {\n                optionValue = selectExtensions.readValue(element.options[i]);\n                // Include special check to handle selecting a caption with a blank string value\n                if (optionValue == value || (optionValue === \"\" && value === undefined)) {\n                    selection = i;\n                    break;\n                }\n            }\n            if (allowUnset || selection >= 0 || (value === undefined && element.size > 1)) {\n                element.selectedIndex = selection;\n            }\n            break;\n        default:\n            if ((value === null) || (value === undefined))\n                value = \"\";\n            element.value = value;\n            break;\n        }\n    }\n};\n","\nimport {\n    tagNameLower, arrayFilter, arrayMap, setTextContent, arrayIndexOf,\n    setOptionNodeSelectionState, triggerEvent, domData,\n    ensureSelectElementIsRenderedCorrectly\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable';\n\nimport {\n    setDomNodeChildrenFromArrayMapping\n} from 'tko.bind';\n\nimport {\n    selectExtensions\n} from './selectExtensions';\n\nvar captionPlaceholder = {};\n\nexport var options = {\n    init: function(element) {\n        if (tagNameLower(element) !== \"select\")\n            throw new Error(\"options binding applies only to SELECT elements\");\n\n        // Remove all existing <option>s.\n        while (element.length > 0) {\n            element.remove(0);\n        }\n\n        // Ensures that the binding processor doesn't try to bind the options\n        return { 'controlsDescendantBindings': true };\n    },\n    update: function (element, valueAccessor, allBindings) {\n        function selectedOptions() {\n            return arrayFilter(element.options, function (node) { return node.selected; });\n        }\n\n        var selectWasPreviouslyEmpty = element.length == 0,\n            multiple = element.multiple,\n            previousScrollTop = (!selectWasPreviouslyEmpty && multiple) ? element.scrollTop : null,\n            unwrappedArray = unwrap(valueAccessor()),\n            valueAllowUnset = allBindings.get('valueAllowUnset') && allBindings['has']('value'),\n            includeDestroyed = allBindings.get('optionsIncludeDestroyed'),\n            arrayToDomNodeChildrenOptions = {},\n            captionValue,\n            filteredArray,\n            previousSelectedValues = [];\n\n        if (!valueAllowUnset) {\n            if (multiple) {\n                previousSelectedValues = arrayMap(selectedOptions(), selectExtensions.readValue);\n            } else if (element.selectedIndex >= 0) {\n                previousSelectedValues.push(selectExtensions.readValue(element.options[element.selectedIndex]));\n            }\n        }\n\n        if (unwrappedArray) {\n            if (typeof unwrappedArray.length == \"undefined\") // Coerce single value into array\n                unwrappedArray = [unwrappedArray];\n\n            // Filter out any entries marked as destroyed\n            filteredArray = arrayFilter(unwrappedArray, function(item) {\n                return includeDestroyed || item === undefined || item === null || !unwrap(item['_destroy']);\n            });\n\n            // If caption is included, add it to the array\n            if (allBindings['has']('optionsCaption')) {\n                captionValue = unwrap(allBindings.get('optionsCaption'));\n                // If caption value is null or undefined, don't show a caption\n                if (captionValue !== null && captionValue !== undefined) {\n                    filteredArray.unshift(captionPlaceholder);\n                }\n            }\n        } else {\n            // If a falsy value is provided (e.g. null), we'll simply empty the select element\n        }\n\n        function applyToObject(object, predicate, defaultValue) {\n            var predicateType = typeof predicate;\n            if (predicateType == \"function\")    // Given a function; run it against the data value\n                return predicate(object);\n            else if (predicateType == \"string\") // Given a string; treat it as a property name on the data value\n                return object[predicate];\n            else                                // Given no optionsText arg; use the data value itself\n                return defaultValue;\n        }\n\n        // The following functions can run at two different times:\n        // The first is when the whole array is being updated directly from this binding handler.\n        // The second is when an observable value for a specific array entry is updated.\n        // oldOptions will be empty in the first case, but will be filled with the previously generated option in the second.\n        var itemUpdate = false;\n        function optionForArrayItem(arrayEntry, index, oldOptions) {\n            if (oldOptions.length) {\n                previousSelectedValues = !valueAllowUnset && oldOptions[0].selected ? [ selectExtensions.readValue(oldOptions[0]) ] : [];\n                itemUpdate = true;\n            }\n            var option = element.ownerDocument.createElement(\"option\");\n            if (arrayEntry === captionPlaceholder) {\n                setTextContent(option, allBindings.get('optionsCaption'));\n                selectExtensions.writeValue(option, undefined);\n            } else {\n                // Apply a value to the option element\n                var optionValue = applyToObject(arrayEntry, allBindings.get('optionsValue'), arrayEntry);\n                selectExtensions.writeValue(option, unwrap(optionValue));\n\n                // Apply some text to the option element\n                var optionText = applyToObject(arrayEntry, allBindings.get('optionsText'), optionValue);\n                setTextContent(option, optionText);\n            }\n            return [option];\n        }\n\n        // By using a beforeRemove callback, we delay the removal until after new items are added. This fixes a selection\n        // problem in IE<=8 and Firefox. See https://github.com/knockout/knockout/issues/1208\n        arrayToDomNodeChildrenOptions['beforeRemove'] =\n            function (option) {\n                element.removeChild(option);\n            };\n\n        function setSelectionCallback(arrayEntry, newOptions) {\n            if (itemUpdate && valueAllowUnset) {\n                // The model value is authoritative, so make sure its value is the one selected\n                // There is no need to use dependencyDetection.ignore since setDomNodeChildrenFromArrayMapping does so already.\n                selectExtensions.writeValue(element, unwrap(allBindings.get('value')), true /* allowUnset */);\n            } else if (previousSelectedValues.length) {\n                // IE6 doesn't like us to assign selection to OPTION nodes before they're added to the document.\n                // That's why we first added them without selection. Now it's time to set the selection.\n                var isSelected = arrayIndexOf(previousSelectedValues, selectExtensions.readValue(newOptions[0])) >= 0;\n                setOptionNodeSelectionState(newOptions[0], isSelected);\n\n                // If this option was changed from being selected during a single-item update, notify the change\n                if (itemUpdate && !isSelected) {\n                    dependencyDetection.ignore(triggerEvent, null, [element, \"change\"]);\n                }\n            }\n        }\n\n        var callback = setSelectionCallback;\n        if (allBindings['has']('optionsAfterRender') && typeof allBindings.get('optionsAfterRender') == \"function\") {\n            callback = function(arrayEntry, newOptions) {\n                setSelectionCallback(arrayEntry, newOptions);\n                dependencyDetection.ignore(allBindings.get('optionsAfterRender'), null, [newOptions[0], arrayEntry !== captionPlaceholder ? arrayEntry : undefined]);\n            }\n        }\n\n        setDomNodeChildrenFromArrayMapping(element, filteredArray, optionForArrayItem, arrayToDomNodeChildrenOptions, callback);\n\n        dependencyDetection.ignore(function () {\n            if (valueAllowUnset) {\n                // The model value is authoritative, so make sure its value is the one selected\n                selectExtensions.writeValue(element, unwrap(allBindings.get('value')), true /* allowUnset */);\n            } else {\n                // Determine if the selection has changed as a result of updating the options list\n                var selectionChanged;\n                if (multiple) {\n                    // For a multiple-select box, compare the new selection count to the previous one\n                    // But if nothing was selected before, the selection can't have changed\n                    selectionChanged = previousSelectedValues.length && selectedOptions().length < previousSelectedValues.length;\n                } else {\n                    // For a single-select box, compare the current value to the previous value\n                    // But if nothing was selected before or nothing is selected now, just look for a change in selection\n                    selectionChanged = (previousSelectedValues.length && element.selectedIndex >= 0)\n                        ? (selectExtensions.readValue(element.options[element.selectedIndex]) !== previousSelectedValues[0])\n                        : (previousSelectedValues.length || element.selectedIndex >= 0);\n                }\n\n                // Ensure consistency between model value and selected option.\n                // If the dropdown was changed so that selection is no longer the same,\n                // notify the value or selectedOptions binding.\n                if (selectionChanged) {\n                    triggerEvent(element, \"change\");\n                }\n            }\n        });\n\n        // Workaround for IE bug\n        ensureSelectElementIsRenderedCorrectly(element);\n\n        if (previousScrollTop && Math.abs(previousScrollTop - element.scrollTop) > 20)\n            element.scrollTop = previousScrollTop;\n    }\n};\n\nselectExtensions.optionValueDomDataKey = domData.nextKey();\n","\nimport {\n    arrayForEach, setOptionNodeSelectionState, arrayIndexOf,\n    registerEventHandler, tagNameLower\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nimport {\n    selectExtensions\n} from './selectExtensions';\n\n\nexport var selectedOptions = {\n    after: ['options', 'foreach'],\n\n    init: function (element, valueAccessor, allBindings) {\n        registerEventHandler(element, \"change\", function () {\n            var value = valueAccessor(), valueToWrite = [];\n            arrayForEach(element.getElementsByTagName(\"option\"), function(node) {\n                if (node.selected)\n                    valueToWrite.push(selectExtensions.readValue(node));\n            });\n            valueAccessor(valueToWrite);\n        });\n    },\n\n    update: function (element, valueAccessor) {\n        if (tagNameLower(element) != \"select\")\n            throw new Error(\"values binding applies only to SELECT elements\");\n\n        var newValue = unwrap(valueAccessor()),\n            previousScrollTop = element.scrollTop;\n\n        if (newValue && typeof newValue.length == \"number\") {\n            arrayForEach(element.getElementsByTagName(\"option\"), function(node) {\n                var isSelected = arrayIndexOf(newValue, selectExtensions.readValue(node)) >= 0;\n                if (node.selected != isSelected) {      // This check prevents flashing of the select element in IE\n                    setOptionNodeSelectionState(node, isSelected);\n                }\n            });\n        }\n\n        element.scrollTop = previousScrollTop;\n    }\n};\n","\nimport {\n    domData, registerEventHandler, ieVersion, safeSetTimeout, options,\n    arrayForEach, tagNameLower\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nimport {\n    computed\n} from 'tko.computed';\n\nvar parseVersion, operaVersion, userAgent, safariVersion, firefoxVersion, w = options.global;\n\nif (w.navigator) {\n    parseVersion = function (matches) {\n        if (matches) {\n            return parseFloat(matches[1]);\n        }\n    };\n\n    // Detect various browser versions because some old versions don't fully support the 'input' event\n    operaVersion = w.opera && w.opera.version && parseInt(w.opera.version()),\n        userAgent = w.navigator.userAgent,\n        safariVersion = parseVersion(userAgent.match(/^(?:(?!chrome).)*version\\/([^ ]*) safari/i)),\n        firefoxVersion = parseVersion(userAgent.match(/Firefox\\/([^ ]*)/));\n}\n\n// IE 8 and 9 have bugs that prevent the normal events from firing when the value changes.\n// But it does fire the 'selectionchange' event on many of those, presumably because the\n// cursor is moving and that counts as the selection changing. The 'selectionchange' event is\n// fired at the document level only and doesn't directly indicate which element changed. We\n// set up just one event handler for the document and use 'activeElement' to determine which\n// element was changed.\nif (ieVersion < 10) {\n    var selectionChangeRegisteredName = domData.nextKey(),\n        selectionChangeHandlerName = domData.nextKey();\n    var selectionChangeHandler = function(event) {\n        var target = this.activeElement,\n            handler = target && domData.get(target, selectionChangeHandlerName);\n        if (handler) {\n            handler(event);\n        }\n    };\n    var registerForSelectionChangeEvent = function (element, handler) {\n        var ownerDoc = element.ownerDocument;\n        if (!domData.get(ownerDoc, selectionChangeRegisteredName)) {\n            domData.set(ownerDoc, selectionChangeRegisteredName, true);\n            registerEventHandler(ownerDoc, 'selectionchange', selectionChangeHandler);\n        }\n        domData.set(element, selectionChangeHandlerName, handler);\n    };\n}\n\nexport var textInput = {\n    aliases: 'textinput',\n    init: function (element, valueAccessor) {\n\n        var previousElementValue = element.value,\n            timeoutHandle,\n            elementValueBeforeEvent;\n\n        var updateModel = function (event) {\n            clearTimeout(timeoutHandle);\n            elementValueBeforeEvent = timeoutHandle = undefined;\n\n            var elementValue = element.value;\n            if (previousElementValue !== elementValue) {\n                // Provide a way for tests to know exactly which event was processed\n                if (options.debug && event) element['_ko_textInputProcessedEvent'] = event.type;\n                previousElementValue = elementValue;\n                valueAccessor(elementValue);\n            }\n        };\n\n        var deferUpdateModel = function (event) {\n            if (!timeoutHandle) {\n                // The elementValueBeforeEvent variable is set *only* during the brief gap between an\n                // event firing and the updateModel function running. This allows us to ignore model\n                // updates that are from the previous state of the element, usually due to techniques\n                // such as rateLimit. Such updates, if not ignored, can cause keystrokes to be lost.\n                elementValueBeforeEvent = element.value;\n                var handler = options.debug ? updateModel.bind(element, {type: event.type}) : updateModel;\n                timeoutHandle = safeSetTimeout(handler, 4);\n            }\n        };\n\n        // IE9 will mess up the DOM if you handle events synchronously which results in DOM changes (such as other bindings);\n        // so we'll make sure all updates are asynchronous\n        var ieUpdateModel = ieVersion === 9 ? deferUpdateModel : updateModel;\n\n        var updateView = function () {\n            var modelValue = unwrap(valueAccessor());\n\n            if (modelValue === null || modelValue === undefined) {\n                modelValue = '';\n            }\n\n            if (elementValueBeforeEvent !== undefined && modelValue === elementValueBeforeEvent) {\n                safeSetTimeout(updateView, 4);\n                return;\n            }\n\n            // Update the element only if the element and model are different. On some browsers, updating the value\n            // will move the cursor to the end of the input, which would be bad while the user is typing.\n            if (element.value !== modelValue) {\n                previousElementValue = modelValue;  // Make sure we ignore events (propertychange) that result from updating the value\n                element.value = modelValue;\n            }\n        };\n\n        var onEvent = function (event, handler) {\n            registerEventHandler(element, event, handler);\n        };\n\n        if (options.debug && textInput._forceUpdateOn) {\n            // Provide a way for tests to specify exactly which events are bound\n            arrayForEach(textInput._forceUpdateOn, function(eventName) {\n                if (eventName.slice(0,5) == 'after') {\n                    onEvent(eventName.slice(5), deferUpdateModel);\n                } else {\n                    onEvent(eventName, updateModel);\n                }\n            });\n        } else {\n            if (ieVersion < 10) {\n                // Internet Explorer <= 8 doesn't support the 'input' event, but does include 'propertychange' that fires whenever\n                // any property of an element changes. Unlike 'input', it also fires if a property is changed from JavaScript code,\n                // but that's an acceptable compromise for this binding. IE 9 does support 'input', but since it doesn't fire it\n                // when using autocomplete, we'll use 'propertychange' for it also.\n                onEvent('propertychange', function(event) {\n                    if (event.propertyName === 'value') {\n                        ieUpdateModel(event);\n                    }\n                });\n\n                if (ieVersion == 8) {\n                    // IE 8 has a bug where it fails to fire 'propertychange' on the first update following a value change from\n                    // JavaScript code. It also doesn't fire if you clear the entire value. To fix this, we bind to the following\n                    // events too.\n                    onEvent('keyup', updateModel);      // A single keystoke\n                    onEvent('keydown', updateModel);    // The first character when a key is held down\n                }\n                if (ieVersion >= 8) {\n                    // Internet Explorer 9 doesn't fire the 'input' event when deleting text, including using\n                    // the backspace, delete, or ctrl-x keys, clicking the 'x' to clear the input, dragging text\n                    // out of the field, and cutting or deleting text using the context menu. 'selectionchange'\n                    // can detect all of those except dragging text out of the field, for which we use 'dragend'.\n                    // These are also needed in IE8 because of the bug described above.\n                    registerForSelectionChangeEvent(element, ieUpdateModel);  // 'selectionchange' covers cut, paste, drop, delete, etc.\n                    onEvent('dragend', deferUpdateModel);\n                }\n            } else {\n                // All other supported browsers support the 'input' event, which fires whenever the content of the element is changed\n                // through the user interface.\n                onEvent('input', updateModel);\n\n                if (safariVersion < 5 && tagNameLower(element) === \"textarea\") {\n                    // Safari <5 doesn't fire the 'input' event for <textarea> elements (it does fire 'textInput'\n                    // but only when typing). So we'll just catch as much as we can with keydown, cut, and paste.\n                    onEvent('keydown', deferUpdateModel);\n                    onEvent('paste', deferUpdateModel);\n                    onEvent('cut', deferUpdateModel);\n                } else if (operaVersion < 11) {\n                    // Opera 10 doesn't always fire the 'input' event for cut, paste, undo & drop operations.\n                    // We can try to catch some of those using 'keydown'.\n                    onEvent('keydown', deferUpdateModel);\n                } else if (firefoxVersion < 4.0) {\n                    // Firefox <= 3.6 doesn't fire the 'input' event when text is filled in through autocomplete\n                    onEvent('DOMAutoComplete', updateModel);\n\n                    // Firefox <=3.5 doesn't fire the 'input' event when text is dropped into the input.\n                    onEvent('dragdrop', updateModel);       // <3.5\n                    onEvent('drop', updateModel);           // 3.5\n                }\n            }\n        }\n\n        // Bind to the change event so that we can catch programmatic updates of the value that fire this event.\n        onEvent('change', updateModel);\n\n        computed(updateView, null, { disposeWhenNodeIsRemoved: element });\n    }\n};\n\n// // textinput is an alias for textInput\n// ko.bindingHandlers['textinput'] = {\n//     // preprocess is the only way to set up a full alias\n//     'preprocess': function (value, name, addBinding) {\n//         addBinding('textInput', value);\n//     }\n// };\n","\nimport {\n    setElementName\n} from 'tko.utils';\n\nexport var uniqueName = {\n    init: function (element, valueAccessor) {\n        if (valueAccessor()) {\n            var name = \"ko_unique_\" + (++uniqueName.currentIndex);\n            setElementName(element, name);\n        }\n    },\n    currentIndex: 0\n};\n","import {\n    unwrap\n} from 'tko.observable';\n\nexport var visible = {\n    update: function (element, valueAccessor) {\n        var value = unwrap(valueAccessor());\n        var isCurrentlyVisible = !(element.style.display == \"none\");\n        if (value && !isCurrentlyVisible)\n            element.style.display = \"\";\n        else if ((!value) && isCurrentlyVisible)\n            element.style.display = \"none\";\n    }\n};\n\nexport var hidden = {\n    update: function (element, valueAccessor) {\n        visible.update.call(this, element, function () { return !unwrap(valueAccessor()); });\n    }\n};\n","\nimport {\n  unwrap, peek\n} from 'tko.observable'\n\nimport {\n    nativeTemplateEngine\n} from './nativeTemplateEngine'\n\nimport {\n  TemplateBindingHandler\n} from './templating'\n\n// \"foreach: someExpression\" is equivalent to \"template: { foreach: someExpression }\"\n// \"foreach: { data: someExpression, afterAdd: myfn }\" is equivalent to \"template: { foreach: someExpression, afterAdd: myfn }\"\nexport class TemplateForEachBindingHandler extends TemplateBindingHandler {\n  get value () {\n    const modelValue = this.valueAccessor()\n    const unwrappedValue = peek(modelValue)    // Unwrap without setting a dependency here\n\n        // If unwrappedValue is the array, pass in the wrapped value on its own\n        // The value will be unwrapped and tracked within the template binding\n        // (See https://github.com/SteveSanderson/knockout/issues/523)\n    if (!unwrappedValue || typeof unwrappedValue.length === 'number') {\n      return { foreach: modelValue, templateEngine: nativeTemplateEngine.instance }\n    }\n\n    // If unwrappedValue.data is the array, preserve all relevant options and unwrap again value so we get updates\n    unwrap(modelValue)\n    return {\n      foreach: unwrappedValue.data,\n      as: unwrappedValue.as,\n      includeDestroyed: unwrappedValue.includeDestroyed,\n      afterAdd: unwrappedValue.afterAdd,\n      beforeRemove: unwrappedValue.beforeRemove,\n      afterRender: unwrappedValue.afterRender,\n      beforeMove: unwrappedValue.beforeMove,\n      afterMove: unwrappedValue.afterMove,\n      templateEngine: nativeTemplateEngine.instance\n    }\n  }\n}\n","\nimport {\n  IfBindingHandler,\n  ElseBindingHandler,\n  UnlessBindingHandler,\n  WithBindingHandler\n} from './ifIfnotWith'\n\nexport const bindings = {\n  'if': IfBindingHandler,\n  'with': WithBindingHandler,\n  ifnot: UnlessBindingHandler,\n  unless: UnlessBindingHandler,\n  'else': ElseBindingHandler,\n  'elseif': ElseBindingHandler\n}\n","import { ForEachBinding } from './foreach.js'\n\nexport var bindings = {\n  foreach: ForEachBinding\n}\n\n// By default, foreach will be async.\nForEachBinding.setSync(false)\n","\nimport {\n    unwrap, toJS\n} from 'tko.observable';\n\nvar sproto = String.prototype;\n\nvar filters = {};\n\n// Convert value to uppercase\nfilters.uppercase = function(value) {\n    return sproto.toUpperCase.call(unwrap(value));\n};\n\n// Convert value to lowercase\nfilters.lowercase = function(value) {\n    return sproto.toLowerCase.call(unwrap(value));\n};\n\n// Return default value if the input value is empty or null\nfilters['default'] = function (value, defaultValue) {\n    value = unwrap(value);\n    if (typeof value === \"function\") {\n        return value;\n    }\n    if (typeof value === \"string\") {\n        return sproto.trim.call(value) === '' ? defaultValue : value;\n    }\n    return value == null || value.length == 0 ? defaultValue : value;\n};\n\n// Return the value with the search string replaced with the replacement string\nfilters.replace = function(value, search, replace) {\n    return sproto.replace.call(unwrap(value), search, replace);\n};\n\nfilters.fit = function(value, length, replacement, trimWhere) {\n    value = unwrap(value);\n    if (length && ('' + value).length > length) {\n        replacement = '' + (replacement || '...');\n        length = length - replacement.length;\n        value = '' + value;\n        switch (trimWhere) {\n            case 'left':\n                return replacement + value.slice(-length);\n            case 'middle':\n                var leftLen = Math.ceil(length / 2);\n                return value.substr(0, leftLen) + replacement + value.slice(leftLen-length);\n            default:\n                return value.substr(0, length) + replacement;\n        }\n    } else {\n        return value;\n    }\n};\n\n// Convert a model object to JSON\nfilters.json = function(rootObject, space, replacer) {\n       // replacer and space are optional\n    return JSON.stringify(toJS(rootObject), replacer, space);\n};\n\n// Format a number using the browser's toLocaleString\nfilters.number = function(value) {\n    return (+unwrap(value)).toLocaleString();\n};\n\n// Export the filters object for general access\nexport { filters };\n","//\n// Binding Handler for Components\n//\n\nimport {\n    virtualElements, makeArray, cloneNodes\n} from 'tko.utils'\n\nimport {\n    unwrap\n} from 'tko.observable'\n\nimport {\n    applyBindingsToDescendants, AsyncBindingHandler\n} from 'tko.bind'\n\nimport {LifeCycle} from 'tko.lifecycle'\n\nimport registry from 'tko.utils.component'\n\nvar componentLoadingOperationUniqueId = 0\n\nexport default class ComponentBinding extends AsyncBindingHandler {\n  constructor (params) {\n    super(params)\n    this.originalChildNodes = makeArray(\n      virtualElements.childNodes(this.$element)\n    )\n    this.computed('computeApplyComponent')\n  }\n\n  cloneTemplateIntoElement (componentName, componentDefinition, element) {\n    const template = componentDefinition['template']\n    if (!template) {\n      throw new Error('Component \\'' + componentName + '\\' has no template')\n    }\n    const clonedNodesArray = cloneNodes(template)\n    virtualElements.setDomNodeChildren(element, clonedNodesArray)\n  }\n\n  createViewModel (componentDefinition, element, originalChildNodes, componentParams) {\n    const componentViewModelFactory = componentDefinition.createViewModel\n    return componentViewModelFactory\n      ? componentViewModelFactory.call(componentDefinition, componentParams, { 'element': element, 'templateNodes': originalChildNodes })\n      : componentParams // Template-only component\n  }\n\n  computeApplyComponent () {\n    const value = unwrap(this.value)\n    let componentName\n    let componentParams\n\n    if (typeof value === 'string') {\n      componentName = value\n    } else {\n      componentName = unwrap(value['name'])\n      componentParams = unwrap(value['params'])\n    }\n\n    this.latestComponentName = componentName\n\n    if (!componentName) {\n      throw new Error('No component name specified')\n    }\n\n    this.loadingOperationId = this.currentLoadingOperationId = ++componentLoadingOperationUniqueId\n    registry.get(componentName, (defn) => this.applyComponentDefinition(componentName, componentParams, defn))\n  }\n\n  applyComponentDefinition (componentName, componentParams, componentDefinition) {\n    // If this is not the current load operation for this element, ignore it.\n    if (this.currentLoadingOperationId !== this.loadingOperationId ||\n        this.latestComponentName !== componentName) { return }\n\n    // Clean up previous state\n    this.cleanUpState()\n\n    const element = this.$element\n\n    // Instantiate and bind new component. Implicitly this cleans any old DOM nodes.\n    if (!componentDefinition) {\n      throw new Error('Unknown component \\'' + componentName + '\\'')\n    }\n    this.cloneTemplateIntoElement(componentName, componentDefinition, element)\n\n    const componentViewModel = this.createViewModel(componentDefinition, element, this.originalChildNodes, componentParams)\n\n    if (componentViewModel instanceof LifeCycle) {\n      componentViewModel.anchorTo(this.$element)\n    }\n\n    const ctxExtender = (ctx) => Object.assign(ctx, {\n      $component: componentViewModel,\n      $componentTemplateNodes: this.originalChildNodes\n    })\n\n    const childBindingContext = this.$context.createChildContext(componentViewModel, /* dataItemAlias */ undefined, ctxExtender)\n    this.currentViewModel = componentViewModel\n\n    applyBindingsToDescendants(childBindingContext, this.$element)\n      .then(this.completeBinding)\n  }\n\n  cleanUpState () {\n    const currentView = this.currentViewModel\n    const currentViewDispose = currentView && currentView.dispose\n    if (typeof currentViewDispose === 'function') {\n      currentViewDispose.call(currentView)\n    }\n    this.currentViewModel = null\n    // Any in-flight loading operation is no longer relevant, so make sure we ignore its completion\n    this.currentLoadingOperationId = null\n  }\n\n  dispose () {\n    this.cleanUpState()\n    super.dispose()\n  }\n\n  get controlsDescendants () { return true }\n  static get allowVirtualElements () { return true }\n}\n","\nimport component from './componentBinding'\nexport var bindings = { component }\n","/* eslint semi: 0 */\nimport * as utils from 'tko.utils'\n\nimport {\n    // applyExtenders,\n    // arrayChangeEventName,\n    // deferUpdates,\n    dependencyDetection,\n    extenders,\n    isObservable,\n    isSubscribable,\n    isWriteableObservable,\n    observable,\n    observableArray,\n    peek,\n    subscribable,\n    toJS,\n    toJSON,\n    unwrap\n} from 'tko.observable'\n\nimport {\n    computed,\n    isComputed,\n    isPureComputed,\n    pureComputed\n} from 'tko.computed'\n\nimport { VirtualProvider } from 'tko.provider.virtual'\nimport { DataBindProvider } from 'tko.provider.databind'\nimport { ComponentProvider } from 'tko.provider.component'\nimport { AttributeProvider } from 'tko.provider.attr'\nimport { MultiProvider } from 'tko.provider.multi'\nimport {\n  TextMustacheProvider, AttributeMustacheProvider\n} from 'tko.provider.mustache'\n\nimport {\n    applyBindingAccessorsToNode,\n    applyBindings,\n    applyBindingsToDescendants,\n    applyBindingsToNode,\n    contextFor,\n    dataFor,\n    getBindingHandler,\n    BindingHandler,\n    AsyncBindingHandler,\n    setDomNodeChildrenFromArrayMapping\n} from 'tko.bind';\n\nimport {\n    bindings as coreBindings\n} from 'tko.binding.core';\n\nimport {\n    anonymousTemplate,\n    bindings as templateBindings,\n    domElement,\n    nativeTemplateEngine,\n    renderTemplate,\n    setTemplateEngine,\n    templateEngine\n    // templateSources\n} from 'tko.binding.template';\n\nimport {\n    bindings as ifBindings\n} from 'tko.binding.if';\n\nimport {\n    bindings as foreachBindings\n} from 'tko.binding.foreach';\n\nimport {\n  filters as punchesFilters\n} from 'tko.filter.punches';\n\nimport {\n  bindings as componentBindings\n} from 'tko.binding.component'\n\nimport components from 'tko.utils.component'\n\nvar coreUtils = {}\n\nutils.arrayForEach([\n  'extend',\n  'setTimeout',\n  'arrayForEach',\n  'arrayFirst',\n  'arrayFilter',\n  'arrayGetDistinctValues',\n  'arrayIndexOf',\n  'arrayMap',\n  'arrayPushAll',\n  'arrayRemoveItem',\n  'getFormFields',\n  'peekObservable',\n  'postJson',\n  'parseJson',\n  'registerEventHandler',\n  'stringifyJson',\n  'range',\n  'toggleDomNodeCssClass',\n  'triggerEvent',\n  'unwrapObservable',\n  'objectForEach',\n  'addOrRemoveItem',\n  'setTextContent',\n  'domData',\n  'parseHtmlFragment',\n  'setHtml',\n  'compareArrays',\n  'setDomNodeChildrenFromArrayMapping'\n], function (coreUtil) {\n  coreUtils[coreUtil] = utils[coreUtil]\n})\n\ncoreUtils.domNodeDisposal = {\n  addDisposeCallback: utils.addDisposeCallback,\n  otherNodeCleanerFunctions: utils.otherNodeCleanerFunctions,\n  removeDisposeCallback: utils.removeDisposeCallback,\n  removeNode: utils.removeNode\n}\n\nutils.extend(coreUtils, {\n  setDomNodeChildrenFromArrayMapping: setDomNodeChildrenFromArrayMapping,\n  unwrapObservable: unwrap,\n  peekObservable: peek\n})\n\n// Create the binding provider and default bindings.\nconst provider = new MultiProvider({\n  globals: utils.options.bindingGlobals,\n  providers: [\n    new AttributeMustacheProvider(),\n    new TextMustacheProvider(),\n    new ComponentProvider(),\n    new DataBindProvider(),\n    new VirtualProvider(),\n    new AttributeProvider()\n  ]\n})\n\nutils.options.bindingProviderInstance = provider\n\nprovider.bindingHandlers.set(coreBindings)\nprovider.bindingHandlers.set(templateBindings)\nprovider.bindingHandlers.set(ifBindings)\nprovider.bindingHandlers.set(foreachBindings)\nprovider.bindingHandlers.set({ each: foreachBindings.foreach })\nprovider.bindingHandlers.set(componentBindings)\n\nObject.assign(utils.options.filters, punchesFilters);\n\n// Expose the API.\nexport default {\n    // --- Top-level ---\n  version: '{{VERSION}}',\n  options: utils.options,\n\n  extenders: extenders,\n  filters: utils.options.filters,\n  Component: components.ComponentABC,\n\n    // --- Utilities ---\n  cleanNode: utils.cleanNode,\n  memoization: utils.memoization,\n  removeNode: utils.removeNode,\n  tasks: utils.tasks,\n  utils: coreUtils,\n  dependencyDetection,\n  ignoreDependencies: dependencyDetection.ignore,\n\n    // -- Observable ---\n  isObservable,\n  isSubscribable,\n  isWriteableObservable,\n  isWritableObservable: isWriteableObservable,\n  observable,\n  observableArray,\n  peek,\n  subscribable,\n  unwrap,\n  toJS,\n  toJSON,\n\n    // ... Computed ...\n  computed,\n  isComputed,\n  isPureComputed,\n  pureComputed,\n\n    // --- Templates ---\n  nativeTemplateEngine,\n  renderTemplate,\n  setTemplateEngine,\n  templateEngine,\n  templateSources: { domElement, anonymousTemplate },\n\n    // --- Binding ---\n  applyBindingAccessorsToNode,\n  applyBindings,\n  applyBindingsToDescendants,\n  applyBindingsToNode,\n  bindingHandlers: provider.bindingHandlers,\n  bindingProvider: provider,\n  contextFor,\n  dataFor,\n  getBindingHandler,\n  BindingHandler,\n  AsyncBindingHandler,\n  virtualElements: utils.virtualElements,\n  domNodeDisposal: coreUtils.domNodeDisposal,\n\n    // --- Components ---\n  components\n}\n","\nimport {attr} from './attr.js';\nimport {checked, checkedValue} from './checked.js';\nimport {click} from './click.js';\nimport {css} from './css.js';\nimport {enable, disable} from './enableDisable.js';\nimport {eventHandler, onHandler} from './event.js';\nimport {hasfocus} from './hasfocus.js';\nimport {html} from './html.js';\nimport $let from './let.js';\nimport {options} from './options.js';\nimport {selectedOptions} from './selectedOptions.js';\nimport {style} from './style.js';\nimport {submit} from './submit.js';\nimport {text} from './text.js';\nimport {textInput} from './textInput.js';\nimport {uniqueName} from './uniqueName.js';\nimport {value} from './value.js';\nimport {visible, hidden} from './visible.js';\nimport {using} from './using.js';\n\nexport var bindings = {\n    attr: attr,\n    checked: checked,\n    checkedValue: checkedValue,\n    click: click,\n    css: css, 'class': css,\n    enable: enable,\n    'event': eventHandler,\n    disable: disable,\n    hasfocus: hasfocus, hasFocus: hasfocus,\n    hidden: hidden,\n    html: html,\n    'let': $let,\n    on: onHandler,\n    options: options,\n    selectedOptions: selectedOptions,\n    style: style,\n    submit: submit,\n    text: text,\n    textInput: textInput,\n    textinput: textInput,\n    uniqueName: uniqueName,\n    using: using,\n    value: value,\n    visible: visible\n};","\nimport {\n  setElementName, objectForEach\n} from 'tko.utils';\n\nimport {\n  unwrap\n} from 'tko.observable';\n\n\n\nvar attrHtmlToJavascriptMap = { 'class': 'className', 'for': 'htmlFor' };\n\nexport var attr = {\n    update: function(element, valueAccessor, allBindings) {\n        var value = unwrap(valueAccessor()) || {};\n        objectForEach(value, function(attrName, attrValue) {\n            attrValue = unwrap(attrValue);\n\n            // Find the namespace of this attribute, if any.\n            // Defaulting to `null` should be ok, as\n            //\n            //  element.setAttributeNS( null, name, value ) ~ element.setAttribute( name, value )\n            //  element.removetAttributeNS( null, name ) ~ element.removeAttribute( name )\n            //\n            var prefixLen = attrName.indexOf(':');\n            var namespace = prefixLen < 0 ? null : element.lookupNamespaceURI( attrName.substr(0, prefixLen) );\n\n            // To cover cases like \"attr: { checked:someProp }\", we want to remove the attribute entirely\n            // when someProp is a \"no value\"-like value (strictly null, false, or undefined)\n            // (because the absence of the \"checked\" attr is how to mark an element as not checked, etc.)\n            var toRemove = (attrValue === false) || (attrValue === null) || (attrValue === undefined);\n\n            if (toRemove) {\n                element.removeAttributeNS(namespace, attrName);\n            } else {\n                element.setAttributeNS(namespace, attrName, attrValue.toString());\n            }\n\n            // Treat \"name\" specially - although you can think of it as an attribute, it also needs\n            // special handling on older versions of IE (https://github.com/SteveSanderson/knockout/pull/333)\n            // Deliberately being case-sensitive here because XHTML would regard \"Name\" as a different thing\n            // entirely, and there's no strong reason to allow for such casing in HTML.\n            if (attrName === \"name\") {\n                setElementName(element, toRemove ? \"\" : attrValue.toString());\n            }\n        });\n    }\n};\n","\nimport {\n    registerEventHandler, arrayIndexOf, addOrRemoveItem\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection, isWriteableObservable\n} from 'tko.observable';\n\nimport {\n    computed, pureComputed\n} from 'tko.computed';\n\nexport var checked = {\n    after: ['value', 'attr'],\n    init: function (element, valueAccessor, allBindings) {\n        var checkedValue = pureComputed(function() {\n            // Treat \"value\" like \"checkedValue\" when it is included with \"checked\" binding\n            if (allBindings['has']('checkedValue')) {\n                return unwrap(allBindings.get('checkedValue'));\n            } else if (allBindings['has']('value')) {\n                return unwrap(allBindings.get('value'));\n            }\n\n            return element.value;\n        });\n\n        function updateModel() {\n            // This updates the model value from the view value.\n            // It runs in response to DOM events (click) and changes in checkedValue.\n            var isChecked = element.checked,\n                elemValue = useCheckedValue ? checkedValue() : isChecked;\n\n            // When we're first setting up this computed, don't change any model state.\n            if (dependencyDetection.isInitial()) {\n                return;\n            }\n\n            // We can ignore unchecked radio buttons, because some other radio\n            // button will be getting checked, and that one can take care of updating state.\n            if (isRadio && !isChecked) {\n                return;\n            }\n\n            var modelValue = dependencyDetection.ignore(valueAccessor);\n            if (valueIsArray) {\n                var writableValue = rawValueIsNonArrayObservable ? modelValue.peek() : modelValue;\n                if (oldElemValue !== elemValue) {\n                    // When we're responding to the checkedValue changing, and the element is\n                    // currently checked, replace the old elem value with the new elem value\n                    // in the model array.\n                    if (isChecked) {\n                        addOrRemoveItem(writableValue, elemValue, true);\n                        addOrRemoveItem(writableValue, oldElemValue, false);\n                    }\n\n                    oldElemValue = elemValue;\n                } else {\n                    // When we're responding to the user having checked/unchecked a checkbox,\n                    // add/remove the element value to the model array.\n                    addOrRemoveItem(writableValue, elemValue, isChecked);\n                }\n                if (rawValueIsNonArrayObservable && isWriteableObservable(modelValue)) {\n                    modelValue(writableValue);\n                }\n            } else {\n                valueAccessor(elemValue, {onlyIfChanged: true});\n            }\n        };\n\n        function updateView() {\n            // This updates the view value from the model value.\n            // It runs in response to changes in the bound (checked) value.\n            var modelValue = unwrap(valueAccessor());\n\n            if (valueIsArray) {\n                // When a checkbox is bound to an array, being checked represents its value being present in that array\n                element.checked = arrayIndexOf(modelValue, checkedValue()) >= 0;\n            } else if (isCheckbox) {\n                // When a checkbox is bound to any other value (not an array), being checked represents the value being trueish\n                element.checked = modelValue;\n            } else {\n                // For radio buttons, being checked means that the radio button's value corresponds to the model value\n                element.checked = (checkedValue() === modelValue);\n            }\n        };\n\n        var isCheckbox = element.type == \"checkbox\",\n            isRadio = element.type == \"radio\";\n\n        // Only bind to check boxes and radio buttons\n        if (!isCheckbox && !isRadio) {\n            return;\n        }\n\n        var rawValue = valueAccessor(),\n            valueIsArray = isCheckbox && (unwrap(rawValue) instanceof Array),\n            rawValueIsNonArrayObservable = !(valueIsArray && rawValue.push && rawValue.splice),\n            oldElemValue = valueIsArray ? checkedValue() : undefined,\n            useCheckedValue = isRadio || valueIsArray;\n\n        // Set up two computeds to update the binding:\n\n        // The first responds to changes in the checkedValue value and to element clicks\n        computed(updateModel, null, { disposeWhenNodeIsRemoved: element });\n        registerEventHandler(element, \"click\", updateModel);\n\n        // The second responds to changes in the model value (the one associated with the checked binding)\n        computed(updateView, null, { disposeWhenNodeIsRemoved: element });\n\n        rawValue = undefined;\n    }\n};\n\nexport var checkedValue = {\n    update: function (element, valueAccessor) {\n        element.value = unwrap(valueAccessor());\n    }\n};\n","import {\n    setHtml, parseHtmlFragment, virtualElements\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nexport var html = {\n    init: function() {\n        // Prevent binding on the dynamically-injected HTML (as developers are unlikely to expect that, and it has security implications)\n        return {\n            'controlsDescendantBindings': true\n        };\n    },\n    //\n    // Modify internal, per ko.punches and :\n    //      http://stackoverflow.com/a/15348139\n    update: function(element, valueAccessor) {\n        setHtml(element, valueAccessor());\n    },\n    allowVirtualElements: true\n};","\nimport {\n    applyBindingsToDescendants\n} from 'tko.bind';\n\n\nexport default {\n    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n        // Make a modified binding context, with extra properties, and apply it to descendant elements\n        var innerContext = bindingContext['extend'](valueAccessor);\n        applyBindingsToDescendants(innerContext, element);\n\n        return { 'controlsDescendantBindings': true };\n    },\n    allowVirtualElements: true\n};\n","\nimport {\n    objectForEach\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nexport var style = {\n    update: function (element, valueAccessor) {\n        var value = unwrap(valueAccessor() || {});\n        objectForEach(value, function(styleName, styleValue) {\n            styleValue = unwrap(styleValue);\n\n            if (styleValue === null || styleValue === undefined || styleValue === false) {\n                // Empty string removes the value, whereas null/undefined have no effect\n                styleValue = \"\";\n            }\n\n            element.style[styleName] = styleValue;\n        });\n    }\n};\n","\nimport {\n    registerEventHandler\n} from 'tko.utils';\n\nexport var submit = {\n    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n        if (typeof valueAccessor() != \"function\")\n            throw new Error(\"The value for a submit binding must be a function\");\n        registerEventHandler(element, \"submit\", function (event) {\n            var handlerReturnValue;\n            var value = valueAccessor();\n            try { handlerReturnValue = value.call(bindingContext['$data'], element); }\n            finally {\n                if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.\n                    if (event.preventDefault)\n                        event.preventDefault();\n                    else\n                        event.returnValue = false;\n                }\n            }\n        });\n    }\n};\n","import {\n    setTextContent\n} from 'tko.utils';\n\nexport var text = {\n    init: function() {\n        // Prevent binding on the dynamically-injected text node (as developers are unlikely to expect that, and it has security implications).\n        // It should also make things faster, as we no longer have to consider whether the text node might be bindable.\n        return { controlsDescendantBindings: true };\n    },\n    update: function (element, valueAccessor) {\n        setTextContent(element, valueAccessor());\n    },\n    allowVirtualElements: true\n};\n","import {\n  applyBindingsToDescendants\n} from 'tko.bind';\n\n\nexport var using = {\n    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n        var innerContext = bindingContext.createChildContext(valueAccessor);\n        applyBindingsToDescendants(innerContext, element);\n        return { controlsDescendantBindings: true };\n    },\n    allowVirtualElements: true\n};\n","\nimport {\n    arrayPushAll, arrayGetDistinctValues, ieVersion, arrayIndexOf,\n    registerEventHandler, stringStartsWith, safeSetTimeout,\n    tagNameLower, triggerEvent, arrayForEach\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable';\n\nimport {\n    computed\n} from 'tko.computed';\n\nimport {\n    applyBindingAccessorsToNode\n} from 'tko.bind';\n\nimport {\n    selectExtensions\n} from './selectExtensions';\n\n\nexport var value = {\n    after: ['options', 'foreach'],\n    init: function (element, valueAccessor, allBindings) {\n        // If the value binding is placed on a radio/checkbox, then just pass through to checkedValue and quit\n        if (element.tagName.toLowerCase() == \"input\" && (element.type == \"checkbox\" || element.type == \"radio\")) {\n            applyBindingAccessorsToNode(element, { 'checkedValue': valueAccessor });\n            return;\n        }\n\n        // Always catch \"change\" event; possibly other events too if asked\n        var eventsToCatch = [\"change\"];\n        var requestedEventsToCatch = allBindings.get(\"valueUpdate\");\n        var propertyChangedFired = false;\n        var elementValueBeforeEvent = null;\n\n        if (requestedEventsToCatch) {\n            if (typeof requestedEventsToCatch == \"string\") // Allow both individual event names, and arrays of event names\n                requestedEventsToCatch = [requestedEventsToCatch];\n            arrayPushAll(eventsToCatch, requestedEventsToCatch);\n            eventsToCatch = arrayGetDistinctValues(eventsToCatch);\n        }\n\n        var valueUpdateHandler = function() {\n            elementValueBeforeEvent = null;\n            propertyChangedFired = false;\n            var modelValue = valueAccessor();\n            var elementValue = selectExtensions.readValue(element);\n            valueAccessor(elementValue);\n        }\n\n        // Workaround for https://github.com/SteveSanderson/knockout/issues/122\n        // IE doesn't fire \"change\" events on textboxes if the user selects a value from its autocomplete list\n        var ieAutoCompleteHackNeeded = ieVersion && element.tagName.toLowerCase() == \"input\" && element.type == \"text\"\n                                       && element.autocomplete != \"off\" && (!element.form || element.form.autocomplete != \"off\");\n        if (ieAutoCompleteHackNeeded && arrayIndexOf(eventsToCatch, \"propertychange\") == -1) {\n            registerEventHandler(element, \"propertychange\", function () { propertyChangedFired = true });\n            registerEventHandler(element, \"focus\", function () { propertyChangedFired = false });\n            registerEventHandler(element, \"blur\", function() {\n                if (propertyChangedFired) {\n                    valueUpdateHandler();\n                }\n            });\n        }\n\n        arrayForEach(eventsToCatch, function(eventName) {\n            // The syntax \"after<eventname>\" means \"run the handler asynchronously after the event\"\n            // This is useful, for example, to catch \"keydown\" events after the browser has updated the control\n            // (otherwise, ko.selectExtensions.readValue(this) will receive the control's value *before* the key event)\n            var handler = valueUpdateHandler;\n            if (stringStartsWith(eventName, \"after\")) {\n                handler = function() {\n                    // The elementValueBeforeEvent variable is non-null *only* during the brief gap between\n                    // a keyX event firing and the valueUpdateHandler running, which is scheduled to happen\n                    // at the earliest asynchronous opportunity. We store this temporary information so that\n                    // if, between keyX and valueUpdateHandler, the underlying model value changes separately,\n                    // we can overwrite that model value change with the value the user just typed. Otherwise,\n                    // techniques like rateLimit can trigger model changes at critical moments that will\n                    // override the user's inputs, causing keystrokes to be lost.\n                    elementValueBeforeEvent = selectExtensions.readValue(element);\n                    safeSetTimeout(valueUpdateHandler, 0);\n                };\n                eventName = eventName.substring(\"after\".length);\n            }\n            registerEventHandler(element, eventName, handler);\n        });\n\n        var updateFromModel = function () {\n            var newValue = unwrap(valueAccessor());\n            var elementValue = selectExtensions.readValue(element);\n\n            if (elementValueBeforeEvent !== null && newValue === elementValueBeforeEvent) {\n                safeSetTimeout(updateFromModel, 0);\n                return;\n            }\n\n            var valueHasChanged = (newValue !== elementValue);\n\n            if (valueHasChanged) {\n                if (tagNameLower(element) === \"select\") {\n                    var allowUnset = allBindings.get('valueAllowUnset');\n                    var applyValueAction = function () {\n                        selectExtensions.writeValue(element, newValue, allowUnset);\n                    };\n                    applyValueAction();\n\n                    if (!allowUnset && newValue !== selectExtensions.readValue(element)) {\n                        // If you try to set a model value that can't be represented in an already-populated dropdown, reject that change,\n                        // because you're not allowed to have a model value that disagrees with a visible UI selection.\n                        dependencyDetection.ignore(triggerEvent, null, [element, \"change\"]);\n                    } else {\n                        // Workaround for IE6 bug: It won't reliably apply values to SELECT nodes during the same execution thread\n                        // right after you've changed the set of OPTION nodes on it. So for that node type, we'll schedule a second thread\n                        // to apply the value as well.\n                        safeSetTimeout(applyValueAction, 0);\n                    }\n                } else {\n                    selectExtensions.writeValue(element, newValue);\n                }\n            }\n        };\n\n        computed(updateFromModel, null, { disposeWhenNodeIsRemoved: element });\n    }\n};\n","\nimport {\n  TemplateForEachBindingHandler\n} from './foreach'\n\nimport {\n  TemplateBindingHandler\n} from './templating'\n//    'let': letBinding,\n//    template: template,\n\nexport const bindings = {\n  foreach: TemplateForEachBindingHandler,\n  template: TemplateBindingHandler\n}\n\nexport * from './nativeTemplateEngine'\nexport * from './templateEngine'\nexport * from './templating'\nexport * from './templateSources'\n"],"names":["length","Array","prototype","indexOf","call","splice","shift","push","apply","peek","reverse","onError","arguments","setTimeout","clearTimeout","hasOwnProperty","constructor","Object","__proto__","trim","toString","replace","substring","JSON","stringify","Error","Symbol","classList","match","className","join","nodeType","contains","parentNode","compareDocumentPosition","ownerDocument","documentElement","tagName","toLowerCase","window","HTMLElement","DocumentFragment","domData.get","domData.set","slice","domData.clear","firstChild","nextSibling","getElementsByTagName","removeChild","cleanData","type","useOnlyNativeEvents","bind","addEventListener","attachEvent","detachEvent","trigger","document","createEvent","dispatchEvent","initEvent","global","click","fireEvent","setAttribute","selected","style","zoom","width","test","text","nodeValue","childNodes","setRegularDomNodeChildren","insertBefore","appendChild","previousSibling","createElement","cloneNode","name","mergeAttributes","virtualElements.firstChild","virtualElements.nextSibling","virtualElements.setDomNodeChildren","createTextNode","data","innerHTML","lastChild","content","parseHTML","clean","html","virtualElements.emptyNode","Math","random","domNode","memoId","taskScheduler","_deferUpdates","limit","tasks.cancel","tasks.schedule","notifySubscribers","_target","callback","disposeCallback","isDisposed","init","subscribe","pop","callbackTarget","subscribable","_id","computed","getDependenciesCount","isInitial","isDifferent","valueWillMutate","valueHasMutated","dependencyDetection.registerDependency","fn","deferUpdates","_limitBeforeChange","_origNotifySubscribers","_limitChange","hasWriteFunction","concat","hasSubscriptionsForEvent","compareArrays","compareArrayOptions","sparse","cacheDiffForKnownOperation","beforeSubscriptionAdd","afterSubscriptionRemove","dispose","RegExp","Date","String","Number","Boolean","save","get","keys","values","evaluatorFunctionTarget","isStale","isSleeping","haveDependenciesChanged","evaluateImmediate","latestValue","options","read","write","isBeingEvaluated","suppressDisposalUntilDisposeWhenReturnsFalse","pure","readFunction","owner","disposeWhenNodeIsRemoved","disposeWhen","domNodeDisposalCallback","dependencyTracking","dependenciesCount","evaluationTimeoutInstance","deferEvaluation","koOptions","deferred","debug","_options","isActive","computedObservable","disposalCount","disposalCandidates","addDependencyTracking","subscribeToDependency","charCodeAt","key","value","substr","synchronous","definition","isSynchronousComponent","registry","loaders","suppressLoaderExceptions","_getFirstResultFromLoaders","getElementById","require","amdRequire","_subscribable","$parents","$root","ko","knockoutInstance","$rawData","$data","exportDependencies","equalityComparer","_addNode","isBindingHandlerClass","getOrCreateFor","getBindingHandler","bindingProviderInstance","bindingHandlers","dependencyDetection.ignore","getBindings","preprocessNode","FOR_NODE_TYPES","includes","nodeHasBindings","virtualElements.normaliseVirtualElementDomStructure","shouldBindDescendants","after","during","errorCaptured","element","getBindingAccessors","bindingContext","$component","has","from","bindings","allBindings","bindingKey","valueAccessor","allowVirtualElements","$element","$context","controlsDescendants","bindingCompleted","Promise","add","Set","all","jQuery","body","message","stack","mappedNodes","dependentObservable","indexObservable","arrayEntry","virtualElements.insertAfter","initialized","domElement","tagNameLower","tagNameLowerFn","templateType","then","memoization.unmemoizeDomNodeAndDescendants","templateEngine","renderTemplate","afterRender","memoization.memoize","virtualElements.childNodes","ifNodes","elseNodes","status","index","$index","$list","max","min","protoProperty","defaultBindingAttribute","bindingGlobals","filters","set","defineProperty","WeakMap","delete","domData.nextKey","navigator","userAgent","createComment","MutationObserver","standalone","observe","attributes","toggle","onreadystatechange","parse","Function","notify","rateLimit","timeout","method","_subscriptions","_versionNumber","updateVersion","dependencyDetection.begin","dependencyDetection.end","getVersion","hasChanged","getSubscriptionsCount","once","when","resolve","yet","next","extend","_notificationIsPending","trackArrayChanges","remove","removeAll","destroy","destroyAll","_order","_version","markDirty","_evalDelayed","respondToChange","evaluatePossiblyAsync","throttleEvaluation","evaluateImmediate_CallReadWithDependencyDetection","evaluateImmediate_CallReadThenEndDependencyDetection","throttle","precedence","earlyOut","lhs","op","rhs","operators","get_leaf_value","isExpressionOrIdentifierSymbol","get_value","value_of","create_root","yes","no","nodes","root","parser","args","token","dereferences","dereference","lookup","assign","set_value","is_valid_start_char","is_valid_continue_char","b","f","n","r","t","white","ch","comment","at","lookahead","error","charAt","number","isFinite","objectAddValue","currentContextGlobals","enumerable","isArray","map","object","string","expression","readString","parseInt","fromCharCode","array","identifier","operator","not_an_array","prefix","filter","ternary","member","funcArguments","readBindings","split","valueAsAccessor","convertToAccessors","onlyIfChanged","runParse","parseExpression","globals","postProcess","processBinding","preprocess","generateBindingString","unknown","preProcessBindings","getBindingString","COMMENT_NODE","virtualElements.virtualNodeBindingValue","virtualElements.isStartComment","BIND_ATTRIBUTE","ELEMENT_NODE","getAttribute","hasAttribute","clearCachedDefinition","mixInto","getOwnPropertyNames","addDisposable","__addEventListener","removeEventListener","anchorTo","forEach","getConfig","loadComponent","loadTemplate","loadViewModel","elementName","template","sync","register","viewModel","ComponentABC","isRegistered","unregister","defaultLoader","_allRegisteredComponents","getComponentNameForNode","component","params","getComponentParams","$raw","makeParamValue","PREFIX","getBindingAttributesList","hasAttributes","startsWith","handlersFromAttributes","getValue","nodeTypes","providers","nodeTypeMap","addProvider","providersFor","some","enumerateProviderBindings","entries","asAttr","textNodeReplacement","checked","class","ATTRIBUTES_TO_SKIP","attributesToSkip","ATTRIBUTES_BINDING_MAP","attributesBindingMap","attributesToInterpolate","specified","done","partsTogether","attributeBinding","bindingParts","getPossibleDirectBinding","bindingObjects","removeAttribute","textToNodes","nodeName","textInterpolation","createChildContext","$parentContext","$parent","unshift","createStaticChildContext","registerAs","bindingCompletion","completeBinding","Map","handler","initReturn","legacyArgs","update","controlsDescendantBindings","createFor","virtualElements.allowedBindings","preventDefault","returnValue","cancelBubble","stopPropagation","aliases","classesWrittenByBindingKey","disabled","activeElement","focus","blur","optionsValueDomDataKey","readValue","optionValueDomDataKey","selectedIndex","writeValue","size","w","parseFloat","opera","version","_forceUpdateOn","propertyName","currentIndex","display","containerData","textData","renderTemplateSource","createJavaScriptEvaluatorBlock","makeTemplateSource","elseChainSatisfied","onValueChange","if","ifnot","foreach","as","disposeOldComputedAndStoreNewOne","instance","includeDestroyed","afterAdd","beforeRemove","beforeMove","afterMove","hasElse","completesElseChain","render","elseChainIsAlreadySatisfied","needsRefresh","isFirstRender","shouldDisplayIf","didDisplayOnLastUpdate","getIfElseNodes","ifElseNodes","dependencyDetection.getDependenciesCount","_elseChain","readElseChain","virtualElements.previousSibling","createDocumentFragment","noIndex","container","generateContext","createContextGenerator","updateIndexes","templateNode","changeQueue","firstLastNodesList","indexesToDelete","rendering_queued","pendingDeletes","isNotEmpty","onArrayChange","changeSubs","flushPendingDeletes","added","deleted","isBatch","processQueue","animateFrame","startQueueFlush","beforeQueueFlush","endQueueFlush","afterQueueFlush","getLastNodeBeforeIndex","getPendingDeleteFor","nodesets","first","last","nodeOrArrayInserted","insertAllAfter","foreachInstance","getNodesForIndex","activeChildElement","shouldDelayDeletion","getOrCreatePendingDeleteFor","removeNodes","nodesToRemove","clearDeletedIndexes","getContextStartingFrom","setSync","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","ForEach","PENDING_DELETE_INDEX_SYM","uppercase","toUpperCase","lowercase","fit","ceil","json","toLocaleString","originalChildNodes","cloneTemplateIntoElement","createViewModel","computeApplyComponent","latestComponentName","loadingOperationId","currentLoadingOperationId","applyComponentDefinition","cleanUpState","$componentTemplateNodes","currentViewModel","utils.arrayForEach","domNodeDisposal","addDisposeCallback","otherNodeCleanerFunctions","removeDisposeCallback","removeNode","utils.extend","setDomNodeChildrenFromArrayMapping","unwrapObservable","peekObservable","utils.options","attr","lookupNamespaceURI","removeAttributeNS","setAttributeNS","dependencyDetection.isInitial","checkedValue","css","enable","disable","hasfocus","hasFocus","hidden","on","multiple","scrollTop","abs","selectedOptions","submit","textInput","textinput","uniqueName","using","autocomplete","form","visible","unless","each","foreachBindings","extenders","Component","components","cleanNode","memoization","tasks","utils","dependencyDetection","ignoreDependencies","isObservable","isSubscribable","isWriteableObservable","isWritableObservable","observable","observableArray","unwrap","toJS","toJSON","isComputed","isPureComputed","pureComputed","nativeTemplateEngine","setTemplateEngine","templateSources","anonymousTemplate","applyBindingAccessorsToNode","applyBindings","applyBindingsToDescendants","applyBindingsToNode","bindingProvider","contextFor","dataFor","BindingHandler","AsyncBindingHandler","virtualElements"],"mappings":"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"}